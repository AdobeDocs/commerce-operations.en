---
title: Magento Open Source 2.4.6 release notes
description: Learn about new features, enhancements, bug fixes and known issues in the 2.4.6 Magento Open Source release.
recommendations: noCatalog
exl-id: bf25d53e-dfb1-4ff9-89fe-f26bc99f3f01
---
# Magento Open Source 2.4.6 release notes

Magento Open Source 2.4.6 introduces support for PHP 8.2. PHP 8.1 remains fully supported, but support for PHP 7.4 has been removed. It includes significant performance and scalability enhancements. GraphQL operations for bulk cart operations and category tree rendering response have been optimized.

This release includes over quality fixes and enhancements. Core Composer dependencies and third-party libraries have been upgraded to the latest versions that are compatible with PHP 8.2.

{{bics}}

## Other release information

Although code for these features is bundled with releases of the Magento Open Source core code, several of these projects are also released independently. Bug fixes for these projects are documented in the separate, project-specific release information that is available in the documentation for each project.

## Magento Open Source 2.4.6 highlights

Look for the following highlights in this release.

### Security enhancements

This release includes eight security fix and platform security improvements.

No confirmed attacks related to these issues have occurred to date. However, certain vulnerabilities can potentially be exploited to access customer information or take over administrator sessions. Most of these issues require that an attacker first obtains access to the Admin. As a result, we remind you to take all necessary steps to protect your Admin, including but not limited to these efforts:

*  IP allowlisting
*  [two-factor authentication](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/)
*  use of a VPN
*  use of a unique location rather than `/admin`
*  good password hygiene

See [Adobe Security Bulletin](https://helpx.adobe.com/security/products/magento/apsb23-17.html) for the latest discussion of these fixed issues.

#### Additional security enhancements

Security improvements for this release improve compliance with the latest security best practices, including:

*  Gaps in Admin action logs have been addressed with more specific auditing of actions within grid views, mass actions, and exports. <!-- AC-1553 -->

*  reCAPTCHA validation no longer fails during checkout when unexpected errors occur during payment processing. [GitHub-35093](https://github.com/magento/magento2/issues/35093) <!-- AC-2642 -->

*  **New system configuration for requiring email confirmation when an admin user changes their email**. To reduce site vulnerability, a new system configuration setting (disabled by default) was added to require email confirmation when an admin user changes their email: **[!UICONTROL Stores]** > **[!UICONTROL Settings:Configuration]** > **[!UICONTROL Customers]** > **[!UICONTROL Customer Configuration]** > **[!UICONTROL Account Information Options]** > **[!UICONTROL Require email confirmation if an email has been changed]**. When this option is enabled, the application will request email confirmation every time the admin user changes their email address. The following module is affected by this change: `Magento_Customer`. <!-- AC-3064 -->

### Platform enhancements

Magento Open Source 2.4.6 introduces support for PHP 8.2. PHP 8.1 remains fully supported. <!-- AC-6598 -->

PHP 7.4 support has been removed from this release. You cannot run Magento Open Source 2.4.6 on PHP 7.4.

Magento Open Source now supports:

*  Composer 2.2.x. Composer 1.x has been removed. <!-- AC-2839 -->

*  Redis 7.0.x. Although compatibility with Redis 6.2 remains, we recommend deploying this release with Redis 7.0.x because Redis 6.2 is expected to reach end of life in 2024. <!-- AC-6606 -->

*  OpenSearch is now supported as the default search engine for Magento Open Source on-premises and cloud deployments. It is supported as an independent search engine for Magento Open Source. This release supports OpenSearch v2.x and has been tested with OpenSearch 2.5. Although compatibility with OpenSearch 1.x remains, we recommend using this release with OpenSearch 2.x. You can install and run Magento Open Source and Magento Open Source 2.4.6 with OpenSearch 2.x on both Cloud and on-premises [Search engine prerequisites](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/prerequisites/search-engine/overview.html). <!-- AC-449 3555 -->

*  Elasticsearch 8.x. See [Upgrade Elasticsearch](../../../upgrade/prepare/prerequisites.md#upgrade-elasticsearch). <!-- AC-6597 -->

*  MariaDB 10.6 (LTS version). This release is still compatible with MariaDB 10.4, but we recommend upgrading to MariaDB 10.6. <!-- AC-6921 -->

#### Other upgrades and replacements

*  The DHL schema has been migrated from v6.2 to v10.0. <!-- AC-3023-->

*  Outdated JavaScript libraries have been updated to their latest versions, and outdated dependencies have been removed. These changes are backward compatible. <!-- AC-2036-->

*  PHP 7.4 compatibility has been removed from the Commerce and Magento Open Source code bases. <!-- AC-2841-->

*  Symfony dependencies have been upgraded to the new LTS version. Dependencies include:<!-- AC-2656-->

    * `friendsofphp/php-cs-fixer`
    * `symfony/console`
    * `symfony/event-dispatcher`
    * `symfony/finder`
    * `symfony/process`
    * `web-token/jwt-framework`

*  `jquery-migrate` has been removed from the Commerce and Magento Open Source code bases. [GitHub-21406](https://github.com/magento/magento2/issues/21406) <!-- AC-1199 -->

*  Upgraded `jQuery/fileUpload` library to v10.32. <!-- AC-2658-->

*  Zend framework (ZF1) components that have reached end of life have been removed from the codebase. See [Backward-incompatible changes highlights](https://developer-stage.adobe.com/commerce/php/development/backward-incompatible-changes/highlights/).<!-- AC-1512 -->

*  Laminas dependencies have been updated to support PHP 8.2. <!-- AC-7019-->

*  The `laminas/laminas-dependency-plugin` Composer plugin has been removed. [GitHub-36515](https://github.com/magento/magento2/issues/36515) <!-- AC-7100-->

*  Replaced `Zend_Filter` with `laminas/laminas-filter`. <!-- AC-5922-->

*  Upgraded `web-token/jwt-framework` to v3.0.5. (latest version) <!-- AC-3772-->

*  Upgraded `allure-framework/allure-phpunit` to v2.x. <!-- AC-2660-->

*  Upgraded the `Chart-js` library to v3.9.1 <!-- AC-2661-->

### Accessibility updates

The focus of this release has been on creating a storefront experience on Venia (PWA) that is more perceivable, operable, understandable, and robust. These enhancements include:

<!-- AC-2479-->

*  The visual text label for the **[!UICONTROL Sign in]** button now matches its accessible name. (Best practice recommends that a UI element's accessible name starts with the visible label text.)

<!-- AC-2481 2492-->

*  Descriptive accessible names have been added to buttons throughout the storefront.

<!-- AC-2488-->

*  Verbal descriptive labels have been added to the **[!UICONTROL Has Video]** checkboxes in search filters.

<!-- AC-2787-->

*  Keyboard-only users can now access all page functionality on the storefront. Previously, shoppers could not access sub-navigation links using only keystrokes.


### Adobe Commerce integration with Adobe IMS

The following Adobe IMS modules have been decoupled from the Adobe Commerce and Magento Open Source core code and are now packaged as a separate metapackage: 

*  `adobe-ims`
*  `adobe-ims-api`
*  `admin-adobe-ims`

The new `adobe-ims-metapackage` v2.2.0 is bundled with Adobe Commerce 2.4.6 and Magento Open Source 2.4.6. No functionality has changed in this release.<!-- CABPI-505-->

### Braintree

<!-- BUNDLE-3107-->

*  The **[!UICONTROL Pay Later]** button and banners (messages) for Italy and Spain have been enabled for Braintree.

<!-- BUNDLE-3109-->

*  PayLater messaging with PayPal Vault has been enabled.

<!-- BUNDLE-3140-->

*  Added Fraud Protection and ACH web hooks. The Fraud Protection web hook is triggered when a risk decision has been made in Braintree. The ACH web hook is triggered when the status of an ACH payment is updated to `settled` or `settlement decline`.

<!-- BUNDLE-3141-->

*  Added LPM (Local Payment Methods) web hook.

### GraphQL

GraphQL performance enhancements include:

**Improved response time when querying categories with category permissions enabled**. Response times have improved when querying products in categories for which category permissions are enabled and that contain many customer groups or shared catalogs. Code changes that support this performance improvement include: <!-- B2B-2179 2404 2329-->

*  GraphQL resolver operation has been optimized.
*  The data provider no longer re-sets runtime-cached data for every new product being processed, which has improved performance. <!-- B2B-2452-->
*  Product permission processing has been optimized in the GraphQL resolver. Product permissions are now applied to product collections instead now on a per-product basis.  <!-- B2B-2404-->
*  Optimized permissions read in shared catalogs in the `addProductsToCart` mutation. <!-- B2B-2424-->
*  Product permissions have been optimized with product inline fragments. <!-- B2B-2459-->

**Optimized performance of category tree rendering**. The `categoryList` query has been optimized to support customers with a large number of categories. Merchants using this query to search more than 1500 categories with up to five levels of nested subcategories will notice a performance improvement. The loading of category children by refactoring code has been improved by removing unnecessary method calls, improving caching of the category tree, and loading category data recursively.  Code changes that support this performance improvement include: <!-- B2B-2484 2469 2472-->

*  Custom attributes metadata fetching for category models has been improved. <!-- B2B-2463-->
*  Category ID fetching has been improved,  and `getChildren` calls have been reduced. <!-- B2B-2464-->
*  Category children loading has been improved.<!-- B2B-2469-->

**Reduced bulk cart operations query response times**. The add product mutations have been optimized to improve query performance when adding up to 500 simple and configurable products. Bundle products are not affected. The optimized mutations include `addProductsToCart`, `addConfigurableProductsToCart`, `addDownloadableProductsToCart`, `addSimpleProductsToCart`, `addVirtualProductsToCart`,`addWishlistItemsToCart`, and `updateCartItems`. <!-- B2B-2331 2423-->

**customer query now supports order sorting**. The `orders` output object of the `customer` query now contains a sort field. You can now sort orders by order number or creation date and in ascending or descending order. <!-- AC-6903-->

New mutations:

`deleteCustomer` <!-- AC-2879-->


### Page Builder

Page Builder v.1.7.3 is compatible with Magento Open Source 2.4.6.

### PWA Studio

PWA Studio v.13.0.x is compatible with Magento Open Source 2.4.6. It includes multiple enhancements to improve accessibility. For information about bug fixes, see [PWA Studio releases](https://github.com/magento/pwa-studio/releases). See [Version compatibility](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) for a list of PWA Studio versions and their compatible Adobe Commerce core versions.


### Known issue

**Issue**:  New Relic is not currently compatible with PHP 8.2. Deployments running New Relic can run Adobe Commerce 2.4.6 on PHP 8.1 but not PHP 8.2. **Workaround**:  Run Adobe Commerce 2.4.6 on PHP 8.1 until a new version of New Relic is released that supports PHP 8.2. This release is expected Summer 2023. <!-- AC-7769-->

## Fixed issues

We have fixed hundreds of issues in the Magento Open Source 2.4.6 core code.

### Installation, upgrade, deployment

<!-- ACP2E-1168-->

*  Static content deployment no longer times out or fails during standard or compact deployments with multiple locales and websites.

<!-- ACP2E-923-->

*  Compact strategy no longer causes an invalid reference to an external domain when running static content deployment (`bin/magento set:static-content:deploy -f --strategy compact`).

<!-- AC-5994-->

*  Executing `bin/magento setup:di:compile -vvv` (or with the `-v` or `-vv` options) now returns an informative message on failure. [GitHub-35391](https://github.com/magento/magento2/issues/35391)

<!-- AC-5973-->

*  Magento Open Source no longer throws the following exception when you run the `bin/magento setup:upgrade` command in a deployment already running the data migration tool: `PHP Fatal error:  Declaration of Migration\Logger\Logger::addRecord(int $level, string $message, array $context = []): bool must be compatible with Monolog\Logger::addRecord(int $level, string $message, array $context = [], ?Monolog\DateTimeImmutable $datetime = null): bool in /var/www/html/vendor/magento/data-migration-tool/src/Migration/Logger/Logger.php on line 34`. [GitHub-35604](https://github.com/magento/magento2/issues/35604)

<!-- AC-5970-->

*  The `bin/magento setup:db:status` command no longer fails in environments running MySQL 8.0.29. Previously, command output stated erroneously that the declarative schema was outdated. [GitHub-35671](https://github.com/magento/magento2/issues/35671)

<!-- AC-1377-->

*  The `composer install` command no longer overwrites `.gitignore` files. [GitHub-32888](https://github.com/magento/magento2/issues/32888)

<!-- AC-6671-->

*  Running `bin/magento sampledata:remove` to remove sample data after upgrade on Alpine Linux no longer fails with this error: `Undefined constant "MagentoHackathon\Composer\Magento\Deploystrategy\GLOB_BRACE`. [GitHub-36062](https://github.com/magento/magento2/issues/36062)


<!-- AC-6933-->

*  `bin/magento setup:upgrade` now executes successfully after first executing `composer install --no-dev`. [GitHub-36351](https://github.com/magento/magento2/issues/36351)

<!-- AC-6796-->

*  Exceptions and exception stack trace entries are now included in `var/log/exception.log`. [GitHub-36054](https://github.com/magento/magento2/issues/36054)

<!-- AC-2681-->
Magento Open Source now throws a parameter validation error when you use the command line to set a Redis connection without a password.


### Accessibility

<!-- AC-6678 6679 6677-->

*  The **[!UICONTROL Proceed to Checkout]**, **[!UICONTROL Review Order]**, and **[!UICONTROL Place Order]** buttons in the checkout workflow now work as expected with keyboard input.

<!-- AC-2485-->

*  Visual indication of focus on buttons when using **[!UICONTROL TAB]** or **[!UICONTROL SHIFT + TAB]** to navigate through page controls now works as expected.


#### Screen readers

<!-- AC-2498-->

*  The screen reader for the order history page now reads the correct image description.

Screen readers now announce:

*  Total item count found in search results as expected <!--- AC-3522-->
*  Logged-in user's name when a user successfully signs in using keyboard controls <!--- AC-6477-->
*  Product search result page header now reads the correct value for the `<title>` element <!--- AC-2489-->
*  Whether input fields are required <!--- AC-2494-->
*  Correct current state of accordion elements (collapsed and expanded) <!--- AC-2487-->
*  When page content has been refreshed after the user has clicked the **[!UICONTROL Create an account]** button <!---AC-6676-->


### Bundle products

<!-- ACP2E-906-->

*  Updating bundle product via API for a specific store view now does not override other store views data for the same bundle product. Previously, bundle product option titles were overridden with the first option title for other store views.

<!-- AC-3769-->

*  Bundled products can now be filtered successfully from Admin **[!UICONTROL Catalog]** > **[!UICONTROL Products]** when using a Dutch locale. Previously, Magento Open Source displayed this error when you tried to filter on `Type: Bundle Product`: `Something went wrong with processing the default view and we have restored the filter to its original state`. [GitHub-35704](https://github.com/magento/magento2/issues/35704)

<!-- ACP2E-1038-->

*  The products grid no longer throws an exception when bundle products have a special price that exceeds 1000. Previously, when you either searched for the product by SKU or navigated to **[!UICONTROL Catalog]** > **[!UICONTROL Products]**, Magento Open Source threw this error: `Non Numeric value encountered`. [GitHub-36284](https://github.com/magento/magento2/issues/36284))

<!-- ACP2E-1220-->

*  Columns in credit memo and invoice PDFs for orders that contain a mix of bundle and simple products are now rendered correctly. Previously, columns were distorted or misaligned.

<!-- ACP2E-1315-->

*   In GraphQL queries that contain a `BundleProduct` fragment, the `items.options.product` object contains data as expected. Previously, the object could be null in some circumstances.

<!-- AC-6548-->

*  Decimal quantities for bundle options are now rendered correctly when **[!UICONTROL Quantity uses decimals]** is enabled. Previously, only the integer part of the quantity was rendered, not the fractional component. For example, a quantity of 1.5 was rendered as 1.0. [GitHub-35964](https://github.com/magento/magento2/issues/35964)

<!-- B2B-2453-->

*  GraphQL product queries now return only bundle product options within the scope of the store being queried. 

<!-- B2B-2455-->

*  Products that are not assigned to categories but that are product options for bundle or grouped products are now returned in responses when the **[!UICONTROL Allow Category Browsing]** configuration setting is enabled for the customer sending the query.

### Cache

<!-- ACP2E-134-->

*  Full-page cache is no longer flushed after order fulfillment unless the ordered product is out of stock. Previously, the cache was purged for the category whenever a shipment was created.

<!-- ACP2E-1321-->

*  Data is now cached successfully when the L2 cache is configured and remote data is partially evicted. Previously, after flushing only the data cache without hashes of those data, the new cache was not saved while the data hashes existed.

<!-- B2B-2471-->

*  Corrected defects in `CatalogUrlResolverIdentity` and `CmsUrlResolverIdentity` that prevented caching. This affected route query caching on multiple requests. 

### Cart and checkout


<!-- ACP2E-965-->

*  Shoppers can now add an additional item to their cart when their cart contains the minimum quantity of the simple product.

<!-- ACP2E-964-->

*  REST API calls to retrieve cart data now return the same `grand_total` and `base_grand_total` values when the store currency and base currency are the same. [GitHub-34649](https://github.com/magento/magento2/issues/34649)

<!-- ACP2E-962-->

*  The exported value of **[!UICONTROL Maximum Qty Allowed in Shopping Cart]** now matches the default value set in the Admin configuration setting.

<!-- ACP2E-889-->

*  Magento Open Source now correctly calculates the grand total for refunds of orders with a discount for shipping.

<!-- ACP2E-876-->

*  Google reCAPTCHA now works as expected for storefront orders. Previously, Magento Open Source displayed these errors when Google ReCAPTCHA was not first selected before a shopper first attempted to place an order: `ReCaptcha validation failed, please try again` and `No such cart with id = ID`.

<!-- AC-2338-->

*  CAPTCHA image refresh now honors the Admin configuration setting and is not triggered when the setting is disabled. Previously, the refresh was triggered whenever the payment method changed regardless of whether the setting was enabled or disabled. [GitHub-34855](https://github.com/magento/magento2/issues/34855)

<!-- ACP2E-479-->

*  Magento Open Source now displays a confirmation popup as expected before redirecting a shopper to the next page when the shopper changes product quantity on the cart page without updating the cart and then tries to navigate to the next page.

<!-- AC-5987-->

*  Shoppers can now decrease a product's quantity from their cart after it was decreased in the Admin. Previously, Magento Open Source threw the following error when a shopper tried to decrease product quantity: `The requested qty is not available`. [GitHub-35780](https://github.com/magento/magento2/issues/35780)

<!-- AC-6744-->

*  Magento Open Source no longer throws an error in the JavaScript console when product quantity exceeds the configured maximum during multi-shipping checkout. Instead, Magento Open Source now displays an informative error message. [GitHub-36184](https://github.com/magento/magento2/issues/36184)

<!-- ACP2E-1276-->

*  Item quantity on the shopping cart page is no longer represented as a negative number when a shopper uses the down arrow key on their keyboard to change product quantity. [GitHub-36299](https://github.com/magento/magento2/issues/36299)

<!-- ACP2E-1232-->

*  Shoppers can no longer add to the cart a product from a category that is now disallowed after changing the customer group to which the shopper belongs. Magento Open Source now checks customer group permission access for specific categories when the permission configuration settings have been changed.

<!-- ACP2E-926-->

*  Customer shopping carts are no longer emptied before Admin order creation, and cart contents are now restored if the order is canceled or abandoned. Items are now removed from the cart only after order creation. Previously, whenever an admin user tried to create an order on the Admin Manage Shopping Cart page, the cart was emptied.

<!-- AC-6939-->

*  The mini cart now displays correct product images after you run `bin/magento catalog:image:resize`. Previously, all images were replaced by the default product placeholder image. [GitHub-35535](https://github.com/magento/magento2/issues/35535)

<!-- AC-2376-->

*  Checkout can now complete successfully when the shipping address contains an extension attribute. Previously, Magento Open Source threw this error: `Object of class Magento\Quote\Api\Data\AddressExtension could not be converted to string`. [GitHub-34202](https://github.com/magento/magento2/issues/34202)

<!-- AC-2793-->

*  The `addBundleProductsToCart` mutation no longer adds products to a quote if a required product option has no value. [GitHub-25676](https://github.com/magento/magento2/issues/25676)

<!-- B2B-2458-->

*  Magento Open Source now returns an informative message when an `addProductsToCart` mutation fails when adding a product to the cart with insufficient permissions.

<!-- ACP2E-1242-->

*  Magento Open Source no longer throws an error on the cart page when Quick Order is used to add a product in a quantity that exceeds available inventory.


### Cart price rule

<!-- AC-2242-->

*  Cart price rule free shipping options that are set during rule creation are now applied to orders as expected. Previously, free shipping options applied during rule created were ignored during checkout, and free shipping was not permitted when the rule was applied. [GitHub-35013](https://github.com/magento/magento2/issues/35013)

<!-- ACP2E-1074-->

*  The `discount_percent` column of the `sales_order_item` table for a product is now populated as expected with the discount percentage when the item discount quantity is not set or it is greater than or equal to order item quantity. Previously, this column was not populated when a cart price rule was applied to this product.

### Catalog

<!-- ACP2E-1181-->

*  The product list widget no longer displays incorrect or cached prices for a logged-in shopper. The price displayed in the home page widget now matches the shopper's address and is updated when the shopper updates the address. Previously, the browser cache did not update product prices on the home page based on customer group tax rules.

<!-- ACP2E-1007-->

*  The Compare Products list feature now works correctly in a multi-website deployment and is dependent on website.

<!-- ACP2E-900-->

*  Magento Open Source no longer displays data from the previous page when you reload a product detail page. Previously, when the product detail page was reloaded, data from the first tab was merged with the newly loaded data for a split second.

<!-- ACP2E-816-->

*  Categories with subcategories can now be expanded in the main menu on mobile devices as expected. Previously, shoppers could not open or expand categories with subcategories in mobile deployments. [GitHub-35329](https://github.com/magento/magento2/issues/35329)

<!-- ACP2E-789-->

*  Category listings are now updated as expected when a product is assigned to a new website or store. Previously, the product price indexer was not marked as invalid and subsequently re-triggered on a `cron` run as expected. As a result, the product's price entry was missing from the price index table and was not displayed on the new store or website.

<!-- AC-6395-->

*  The storefront inventory count is now accurate when the **[!UICONTROL Display Out of Stock Products]** configuration setting is enabled. [GitHub-35899](https://github.com/magento/magento2/issues/35899)

<!-- AC-6384-->

*  The category page is no longer empty when the **[!UICONTROL Allow All Products Per Page]** setting is enabled. [GitHub-35900](https://github.com/magento/magento2/issues/35900)

<!-- AC-6330-->

*  The **[!UICONTROL Display Out of Stock Products]** configuration option now works as expected when enabled. Previously, all products were displayed as out-of-stock on the storefront when this option was enabled on the Admin. [GitHub-35898](https://github.com/magento/magento2/issues/35898)

<!-- ACP2E-1306-->

*  Product sorting by Boolean attributes now works as expected. [GitHub-36390](https://github.com/magento/magento2/issues/36390)

<!-- ACP2E-1206-->

*  Catalog price rule discounts are no longer applied to fixed price custom product options but are applied to only the product's original price.

<!-- AC-6810-->

*  Catalog price rules now take into account the selected scope and are applied to products only for the websites for which the attribute has an option value that matches the rule. Previously, the rule did not take into account the selected scope in multi-site deployments. [GitHub-36049](https://github.com/magento/magento2/issues/36049)

<!-- ACP2E-891-->

*  The swatch options color and size attributes are now pre-selected in the product detail page when a shopper modifies the configurable product from the My Cart page. (jQuery 3.x version now supports the `swatchRenderer` widget name, which is now camel case.) Previously, the swatch option is not pre-selected.

<!-- ACP2E-1361-->

*  Customers are now notified for product price drops when the customer is subscribed to the price drop alert. Previously, price drop notifications were not always sent due to application level caching.

<!-- ACP2E-1348-->

*  Catalog rules that are based on SKUs with the **[!UICONTROL is not one of]** condition now work as expected.

<!-- AC-729-->

*  Magento Open Source no longer erroneously assumes that one category is the parent category of another based on category path. Previously, when two categories were adjacent and one category ID starts with another category's category ID, Adobe Commerce assumed that the categories had the same parent category. [GitHub-32464](https://github.com/magento/magento2/issues/32464)

### Configurable products


<!-- ACP2E-1083-->

*  Magento Open Source no longer throws an error when an admin user adds products manually to a configurable product that already has many simple products assigned to it. Previously, Magento Open Source displayed this error: `Something went wrong with processing the default view and we have restored the filter to its original state`.

<!-- AC-2877-->

*  Shoppers can no longer add configurable products with a salable quantity of 0 to their shopping cart in deployments with back orders disabled. Magento Open Source now indicates that the product is out of stock. [GitHub-35319](https://github.com/magento/magento2/issues/35319)

<!-- AC-2678-->

*  Creating a new product by importing a configurable product with many options from a different store view now results in an exact copy of the first product as expected. Previously, the sort order of the new product's configurable options was incorrect, and titles were not translated to the new store view's locale in deployments with multiple store views and locales. [GitHub-35200](https://github.com/magento/magento2/issues/35200)

<!-- AC-535-->

*  Configurable products with all out-of-stock child products are now displayed as out of stock on the storefront.

<!-- AC-6852-->

*  Configurable product SKUs and product names are now displayed accurately. Previously, name and SKUs were displayed as undefined after you moved an attribute group above the Product Details group on **[!UICONTROL Stores]** > **[!UICONTROL Attribute set]**. [GitHub-36309](https://github.com/magento/magento2/issues/36309)


### Coupons

<!-- ACP2E-1053-->

*  Validation logic has been added to the Manage Coupon Codes workflow to enforce the coupon code settings when generating coupons. Previously, coupon code generation ignored the **[!UICONTROL Code Length]** setting when the **Coupon Qty** value was greater than 2500.

<!-- ACP2E-1029-->

*  Reward points are now added to a customer's account as expected when a rewards coupon is applied during checkout with the PayPal Express payment method.

<!-- ACP2E-1225-->

*  You can now apply a coupon code during Admin order creation when the cart price rule has weight as a condition. Previously, coupon codes were not set if other fields were not selected for the product. [GitHub-36271](https://github.com/magento/magento2/issues/36271)

<!-- ACP2E-1223-->

*  You can now filter coupon reports by multiple cart price rules. [GitHub-36272](https://github.com/magento/magento2/issues/36272)

<!-- AC-2812-->

*  Custom options are now applied and saved when an admin user presses **[!UICONTROL Enter]** while configuring a product with custom options. Previously, you were able to select options and add the product to an order, but the options were not saved, and the admin user was prompted to re-select product options. [GitHub-35284](https://github.com/magento/magento2/issues/35284)

<!-- AC-6688-->

*  Coupon codes can now be successfully exported to Excel XML. Previously, the generated file did not contain all selected coupon codes but only as many items as were selected in the items per page selector.[GitHub-36073](https://github.com/magento/magento2/issues/36073)


### cron

<!-- ACP2E-1243-->

*  The `catalog_index_refresh_price` cron job now executes successfully. Previously, Magento Open Source logged this error during cron execution: `report.ERROR: Cron Job catalog_index_refresh_price has an error: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens`.

### Currency

<!-- ACP2E-1012-->

*  A missing space between custom currency symbols and prices has been added to both storefront and Admin product prices. The appropriate condition and regex expression has been added to allow a custom NBSP in currency symbols. For example, IDRx 105.00 was previously displayed as IDRx105.00.


### Email


<!-- ACP2E-1063-->

*  Magento Open Source no longer sends a customer duplicate emails after an order is created from the Admin.

<!-- ACP2E-1200-->

*  Admin order emails are no longer sent when the **[!UICONTROL Email order confirmation]** setting is disabled. [GitHub-36256](https://github.com/magento/magento2/issues/36256)

<!-- ACP2E-1151-->

*  Image options are no longer displayed as HTML markup in the credit memo, order confirmation, and invoice customer emails (default template) for products with custom options.

### Frameworks


<!-- AC-6385-->

*  Admin users can now successfully open the Admin **[!UICONTROL Store]** > **[!UICONTROL Configuration]** page when no country in the **European Union Countries** setting (**[!UICONTROL Stores]** > **[!UICONTROL Configuration]** > **[!UICONTROL General]** > **[!UICONTROL Country options]** > **[!UICONTROL European Union Countries]**). Previously, when an admin user tried to open this page, Magento Open Source threw this error: `TypeError: explode(): Argument #2 ($string) must be of type string, null given in /var/www/php/folder/vendor/magento/module-config/ViewModel/CountryFilter.php:46`. [GitHub-35901](https://github.com/magento/magento2/issues/35901)

<!-- AC-6361-->

*  `jquery.cookie` dependencies now work as expected with JavaScript dependencies. Previously, you could not use aliases for `jquery/jquery.cookie`. [GitHub-35913](https://github.com/magento/magento2/issues/35913)

<!-- AC-3226-->

*  The `bin/magento i18n:collect-phrases` command now includes `<title>` text in the exported CSV file. [GitHub-35462](https://github.com/magento/magento2/issues/35462)

<!-- AC-6841-->

*  `Magento\Framework\Code\Reader\ArgumentsReader::getParentCall()` now supports named constructor arguments. You can now call a function by setting the parameters by their name.

<!-- ACP2E-1287-->

*  Errors are now logged as expected in the `exception.log` file. Previously, although errors were logged in the `system.log` file, errors were not logged in `var/log/exception.log`.

<!-- AC-3758-->

*  Merchants now have the ability to specify a custom external SMTP provider. [GitHub-26104](https://github.com/magento/magento2/issues/26104)

<!-- AC-3752-->

*  OAuth integrations can now be re-authorized as expected on deployments running Magento Open Source 2.4.3-p2. Previously, re-authorization failed with this error: `The attempt to post data to consumer failed due to an unexpected error. Please try again later`. Magento Open Source also attempted to decrypt unencrypted values. [GitHub-35313](https://github.com/magento/magento2/issues/35313)

<!-- ACP2E-1201-->

*  The correct `rowId` parameter is now passed when the category `urlKey` is saved for categories that have child categories. Previously, the wrong `categoryId` was passed when saving the category `URLKey`.

<!-- ACP2E-981-->

*  The product attribute code `event` has been added to the list of reserved product attribute codes, which eliminates errors associated with using an attribute with this name on the storefront. Previously, the application threw this error on the product detail and search/product list pages when `event` was used:  `report.CRITICAL: Error: Call to a member function getStatus() on string in /home/mer33515/public_html/ee24develop/magento2ee/app/code/Magento/CatalogEvent/Observer/ApplyIsSalableToProduct.php:23`.

<!-- AC-5985-->

*  Storefront validation error messages that occur during order placement are now displayed consistently. Previously, messages appeared, collapsed, then re-appeared. [GitHub-35651](https://github.com/magento/magento2/issues/35651)

<!-- AC-2943-->

*  AMQP consumers no longer fail due to a deprecated `trim()` function on deployments running PHP 8.1. Previously, when the AMQP consumer started after installation, Magento Open Source threw this error: `Deprecated Functionality: trim(): Passing null to parameter #1 ($string) of type string is deprecated in .../vendor/magento/framework-amqp/Config.php on line 143`. [GitHub-35380](https://github.com/magento/magento2/issues/35380)

<!-- AC-2882-->

*  The `getFilteredTimerIds` method now works as expected.  Class `Magento\Framework\Profiler\Driver\Standard\Stat` is now compatible with PHP 8.1. Previously, Magento Open Source threw an exception when this method was called. [GitHub-35307](https://github.com/magento/magento2/issues/35307)

<!-- AC-2784-->

*  Removed dependency on the `imagemin-svgo` library.

<!-- AC-2058-->

*  The minifying template process now successfully processes consecutive comments when the first comment begins with `//`. [GitHub-34880](https://github.com/magento/magento2/issues/34880)

<!-- AC-2241-->

*  Corrected a database query issued by the `BundleGraphQl` module that returned this error: `"debugMessage": "Notice: Undefined offset: 16 in vendor/magento/module-bundle-graph-ql/Model/Resolver/Options/Collection.php on line 130"`.[GitHub-34991](https://github.com/magento/magento2/issues/34991)


### General fixes


<!-- ACP2E-1068-->

*  Magento Open Source now displays an accurate time range when an admin user selects the **[!UICONTROL Last 24 Hours]** option from the Admin statistics dashboard. Previously, Magento Open Source displayed an incorrect time range. This occurred because the timezone of the database remained unchanged.

<!-- ACP2E-1066-->

*  Credit memos can now be generated for both integer and decimal quantities. Previously, only integer quantities were supported.

<!-- ACP2E-1001-->

*  The Customer Zip Code input validation rule for type **numeric only** now works as expected in the **[!UICONTROL Edit Customer Address]** field (**[!UICONTROL Store]** > **[!UICONTROL Attribute]** > **[!UICONTROL Customer Address]**). Previously, customer address information was saved without zip code validation.

<!-- ACP2E-873-->

*  Globally shared customer accounts now have addresses that are validated against the list of allowed countries for the current website and saved successfully. Previously, these accounts were incorrectly validated against the allowed countries of the website where customer was registered.

<!-- AC-3167-->

*  Breadcrumbs from the CMS page hierarchy are no longer displayed when **[!UICONTROL Enable Hierarchy Functionality]** is disabled. Previously, breadcrumbs were displayed, and when shoppers clicked on them, a 404 page was displayed. [GitHub-35513](https://github.com/magento/magento2/issues/35513)

<!-- AC-2567-->

*  Removing a product from all websites via the Admin no longer causes the following error: `SQLSTATE[42000]: Syntax error or access violation`. [GitHub-35133](https://github.com/magento/magento2/issues/35133)

<!-- AC-2235-->

*  Customers who exceed the maximum login failed attempts can now log in after password reset. [GitHub-34981](https://github.com/magento/magento2/issues/34981)

<!-- AC-2020-->

*  The dynamic rows component now behaves as expected when an admin user adds a new element. Previously, the row component behaved incorrectly when a new simple product was added to a grouped product. [GitHub-34850](https://github.com/magento/magento2/issues/34850)

<!-- magento/magento2/pull/35598-->

*  Corrected typos and incorrect grammar in the `app/code/Magento/Backend/etc/menu.xsd` file.

<!-- magento/magento2/pull/35818-->

*  The `app/code/Magento/Authorization/README.md` file has been updated to accurately describe table creation.

<!-- magento/magento2/pull/35940-->

*  The `recordLogin` method has been updated to set login values on the user model as well as preserving the correct values in the `logdate` and `lognum` fields of the `admin_user` table. Previously, login attempts for updated Admin users were not recorded.

<!-- magento/magento2/pull/35990-->

*  GitHub issue templates have been converted to issue forms for developer experience issues and feature requests.

<!-- ACP2E-961-->

*  The `Is required` customer attribute is now implemented properly per website scope for the Admin customer edit form.

<!-- ACP2E-895-->

*  The **[!UICONTROL Grid Filter Condition Type]** field of customer and customer address attributes is no longer visible on the attribute edit page when the **[!UICONTROL Use in Filter Option]s** setting is disabled.

<!-- AC-6020-->

*  Magento Open Source now displays an informative error message if a merchant fails to enter an optional SKU attribute value when creating a product. Previously, the application threw this exception when the attribute was optional: `Deprecated Functionality: trim(): Passing null to parameter #1 ($string) of type string is deprecated in /var/www/html/mg244/project-community-edition/vendor/magento/module-eav/Model/Entity/AbstractEntity.php on line 932`. [GitHub-35810](https://github.com/magento/magento2/issues/35810)

<!-- ACP2E-716-->

*  The **[!UICONTROL Show my quotes]** filter on the **[!UICONTROL My Quotes]** page now works as expected. Previously, filter results included other admin users's quotes.


### GraphQL


<!-- AC-1730-->

*  `Types` that implement multiple Interfaces in GraphQL code can now separated by an `&` sign as well as `,` in accordance with the GraphQL `@doc`specification.

<!-- ACP2E-885-->

*  The `setShippingAddressesOnCart` mutation now supports setting numeric region codes as `region`. Previously, this mutation worked incorrectly for numeric region code values.

<!-- ACP2E-1237-->

*  The `products` query now returns only reviews associated with the specified scope. Previously, queries returned reviews from all stores.

<!-- ACP2E-882-->

*  Category permissions are now respected during GraphQL requests.

<!-- AC-1805-->

*  The `customer` query now filters on orders with a specified `from` and `to` range correctly. [GitHub-31537](https://github.com/magento/magento2/issues/31537)

<!-- AC-5984-->

*  The `product` query now returns correct category data in aggregation. Previously, `attribute_code.category_uid` returned the value of `category_id` instead of `category_uid`.

<!-- AC-6084-->

*  The `customerOrders` query no longer throws an `\"model\" value should be specified`error. [GitHub-35852](https://github.com/magento/magento2/issues/35852)

<!-- ACP2E-894-->

*  The `customer` query now filters orders based on scope. You can now specify whether the query should filter orders by store, website, or globally.

<!-- ACP2E-1172-->

*  The `categoryList` query now returns an accurate product count for both anchored and unanchored parent categories. The new `is_anchor` attribute has been added to the category collection selected columns list. Previously, requests returned a 0 product count. [GitHub-36300](https://github.com/magento/magento2/issues/36300)

<!-- AC-2500-->

*  The `generateCustomerTokenAsAdmin` mutation now works as expected when creating a token to log in to a non-default store in a multi-store deployment. [GitHub-35084](https://github.com/magento/magento2/issues/35084)

<!-- AC-1731-->

*  The `createEmptyCart` mutation now throws an exception as expected when an expired token is used. [GitHub-26112](https://github.com/magento/magento2/issues/26112)

<!-- AC-1965-->

*  Cart query error messages have been made more informative. [GitHub-34546](https://github.com/magento/magento2/issues/34546)

<!-- AC-2798-->

*  Aggregation data in the response of a `products` query now includes correct values for price type attribute `attribute_code` and `label`. [GitHub-28878](https://github.com/magento/magento2/issues/28878)

<!-- AC-6685-->

*  The `products` query returns category information as expected when the database prefix has a non-null value. Previously, it returned an `Internal server error`. [GitHub-36117](https://github.com/magento/magento2/issues/36117)

<!-- AC-1003-->

*  Corrected the return type for the `getCustomerIsGuest` method. [GitHub-29529](https://github.com/magento/magento2/issues/29529)

<!-- B2B-2221-->

*  The `Magento\CatalogGraphQl\Plugin\DesignLoader` plugin as been refactored.

<!-- B2B-2379-->

*  Cart reload is now triggered once only as expected when the cart is initialized by GraphQL mutations. Previously, cart loading triggered unnecessary cart revalidation against stock inventory, which consumed significant resources every time the cart was loaded. 

<!-- AC-1726-->

*  Added the `gift_message` type to the `OrderItemInterface`. [GitHub-29418](https://github.com/magento/magento2/issues/29418)

<!-- AC-2454-->

*  Product options returned in GraphQL responses now include only the products that are within the catalog to which the user belongs. If the user belongs to a shared catalog, then only products in shared catalogs are returned. If user is a guest or not part of a custom shared catalog, then only products in public catalog are returned. 


### Google ReCAPTCHA

<!-- AC-3179-->

*  A reCAPTCHA error in the `var/log/exception.log` file for the Google V3 reCAPTCHA Admin login has been resolved, and no error messages are logged. Previously, the following error was thrown every few seconds when an admin user configured their **[!UICONTROL Configuration]** > **[!UICONTROL Security]** > **[!UICONTROL Google reCAPTCHA Admin Panel]** settings: `main.ERROR: Can not resolve reCAPTCHA parameter. {"exception":"[object] (Magento\Framework\Exception\InputException(code: 0): Can not resolve reCAPTCHA parameter. at /home/xxxxxxx/public_html/vendor/magento/module-re-captcha-ui/Model/CaptchaResponseResolver.php:25)"} []`. [GitHub-34975](https://github.com/magento/magento2/issues/34975)


### Image

<!-- ACP2E-905-->

*  Updated the recommendations on the logo size for PDF Invoice slip.


### Import/export


<!-- ACP2E-957-->

*  Importing a product with the same numeric URL key as an existing product but without its terminal alphabetical character no longer causes a validation error when the **[!UICONTROL Product URL Suffix]** is set to empty in the Admin.

<!-- AC-6588-->

*  The `bin/magento app:config:import`command now successfully imports the contents of a `config.php` file when it contains certain `cron` expressions. Previously, import failed with this error: `Import failed: Notice: Trying to access array offset on value of type null in [..]/vendor/magento/module-config/Model/Config/Backend/Currency/Cron.php on line 66`. [GitHub-31428](https://github.com/magento/magento2/issues/31428)

<!-- ACP2E-1289-->

*  Full export now works correctly when AWS S3 is used as remote storage. Previously, export failed due to the uploaded file size.

<!-- ACP2E-982-->

*  Product status is now imported correctly when inventory data columns in the CSV file are missing. Previously, after product import, default source was automatically assigned to the product, its quantity was set to zero, and its status was listed as out of stock when inventory data columns in the CSV file were missing.

<!-- ACP2E-841-->

*  Importing advance pricing values now provides the correct count for new and updated records when the import includes more than 100 records. Previously, the import success message provided the wrong count.

<!-- ACP2E-984-->

*  Exported CSV files now contain correct paths to category names that are saved in multiple languages. A store ID has been added for category collection. Previously, the exported files contained mixed paths with different languages instead of a category path derived from the default store view.

<!-- ACP2E-1319-->

*  Updating custom options for a product in a specific store view via import now completes successfully. Previously, an internal server error was thrown if a product-related rows were split into multiple batches.

<!-- AC-6926-->

*  The `Fixer.io` import service now works as expected. Currency rates are now imported successfully. [GitHub-36010](https://github.com/magento/partners-magento2ee/issues/36010)

### Index

<!-- ACP2E-1296-->

*  Price re-indexing now runs successfully when the catalog contains bundle products are not assigned to any website. Previously, the following error occurred when the product price index ran: `Warning: Undefined array key <bundel product id > in vendor/magento/module-bundle/Model/ResourceModel/Indexer/Price/DisabledProductOptionPriceModifier.php on line 117`. [GitHub-35796](https://github.com/magento/magento2/issues/35796)

### Infrastructure

<!-- AC-5972-->

*  Issues with the third-party `colinmollenhour/php-redis-session-abstract` module and PHP 8.1 have been resolved. [GitHub-35634](https://github.com/magento/magento2/issues/35634)


### Order

<!-- ACP2E-998-->

*  The order prefix that is passed in the installation script is now added correctly to the order ID.

<!-- ACP2E-790-->

*  The order details page now successfully loads when the order contains a product with a long custom text value. Previously, the order details page did not load, and the value in the `sales_order_item.product_options` column was not stored properly if a product contained a long value for a text custom option.

<!-- AC-3178-->

*  Storefront order status is now accurate for partially refunded orders. Previously, an order remained in the processing state after shipment when a partial refund was applied. [GitHub-35528](https://github.com/magento/magento2/issues/35528)

<!-- AC-3031-->

*  Customer group is now represented accurately as **Not Logged in** for an order created by a guest user. Previously, customer group was NULL in guest order summaries, which affected confirmation emails and order export. [GitHub-35440](https://github.com/magento/magento2/issues/35440)

<!-- AC-2811-->

*  A status of **[!UICONTROL Closed]** is now assigned to virtual orders as expected after a credit memo has been issued and the customer is refunded. Previously, virtual products were displayed as **[!UICONTROL Complete]** in the Status drop-down but **[!UICONTROL Closed]** in the footer of the order comments when the comment was added from the Admin. [GitHub-35283](https://github.com/magento/magento2/issues/35283)

<!-- AC-6641-->

*  Guests can now place orders for products with a quantity of less than one, and product quantity is now strictly typed as `float`. Previously, because product quantity was strictly typed as `int`, orders for a product quantity less than one failed with this message: `Some of the products are disabled`. [GitHub-36060](https://github.com/magento/magento2/issues/36060)

<!-- ACP2E-1313-->

*  Shipping refunds are now correctly calculated when the **[!UICONTROL Apply discount on prices]** configuration option is set to **[!UICONTROL including taxes]**.

<!-- ACP2E-1199-->

*  Invoice, shipment, and credit memo grids are now updated asynchronously after orders are archived.

<!-- ACP2E-1194-->

*  Duplicate orders no longer result from concurrent, identical GraphQL requests. Quotes are now locked for up to 10 seconds to prevent duplicate order creation, and the second request fails with these errors: `The cart isn't active` or `The order has already been placed and is currently processing`. This lock value can be configured through di for the `Magento\Quote\Model\PlaceOrderMutex` class `lockWaitTimeout` parameter. [GitHub-36274](https://github.com/magento/magento2/issues/36274)

<!-- ACP2E-860-->

*  Company attribute values are now displayed as expected in the billing and shipping address sections of the checkout workflow. Previously, company attributes were not displayed properly on the order detail page because stores were not set properly during order creation. Attribute values were stored correctly only when the **Show Company** property was set to **[!UICONTROL optional]** for **Main Website** in multi-store deployments.

<!-- ACP2E-1117-->

*  The `customer_address_id` value is now set as expected for a new billing address when **[!UICONTROL My billing and shipping address are the same]** checkbox is checked. An additional condition has been introduced to identify whether the billing address is same as shipping address before setting the customer address ID for the shipping address.

<!-- AC-6057-->

*  Concurrency issues with order placement have been resolved. Previously, if two orders were placed from different browsers at the same, or nearly the same, time, both orders were assigned the same order ID. [GitHub-35833](https://github.com/magento/magento2/issues/35833)

<!-- AC-6908-->

*  Placing an auto-invoiced order for a free product when asynchronous indexing is enabled now works as expected. No entries are added to the `sales_order_grid or sales_invoice_grid` table for these orders. Previously, Magento Open Source threw an exception because the application tried to index the grids during order placement instead of relying on `cron`. [GitHub-36334](https://github.com/magento/magento2/issues/36334)


### Payment methods


<!-- ACP2E-862-->

*  The COD payment method is no longer rendered on the storefront checkout workflow when COD is exempted for the country specified in the shipping and billing addresses. Previously, Admin configuration settings for this feature were not implemented.

<!-- AC-1119-->

*  Vault payment information is no longer shown in the Payment section of Admin order creation workflow if the shopper has not saved a token. [GitHub-33954](https://github.com/magento/magento2/issues/33954)

<!-- AC-2688-->

*  Custom prices are no longer doubled after a discount is applied by cart price rule. [GitHub-35154](https://github.com/magento/magento2/issues/35154)

<!-- ACP2E-1120-->

*  New order pending status is now honored as expected when an order is placed using the Zero Subtotal Checkout payment method.

<!-- ACP2E-1121-->

*  Guest email settings are now respected during order creation for a guest shopper with PayPal Express via GraphQL. Previously, the email address set was overridden by the email address set in the PayPal account.


#### Braintree


<!-- BUNDLE-3186-->

*  Order IDs are now added to settlement requests for payment transactions.

<!-- AC-3030-->

*  Magento Open Source no longer throws the following error when a merchant clicks on **[!UICONTROL Reports]** > **[!UICONTROL Braintree Settlement]**: `Error: Undefined constant Braintree\PaymentInstrumentType::ANDROID_PAY_CARD in /var/www/html/vendor/paypal/module-braintree-core/Ui/Component/Report/Listing/Column/PaymentType.php:49`. [GitHub-35434](https://github.com/magento/magento2/issues/35434)

<!-- BUNDLE-3043-->

*  The `customerPaymentTokens` query no longer returns Braintree tokens when the vault is turned off on the Admin.

<!-- BUNDLE-3107-->

*  The **[!UICONTROL Pay Later]** button and banners have been enabled for Italy and Spain.

<!-- BUNDLE-3137-->

*  Admin users can now create an order or reorder when the Braintree payment method is enabled. Previously, Magento Open Source threw this error: `report.CRITICAL: Error: Call to a member function getMethodInstance() on null in /app/vendor/paypal/module-braintree-core/Block/Form.php:174`.

<!-- BUNDLE-3139-->

*  Checkout using Braintree payment method now completes successfully when Braintree PayPal is enabled and **[!UICONTROL Enable Card Payments]** is disabled. Previously, the progress bar never resolved, and Magento Open Source displayed this console error: `adapter.js:66 Uncaught TypeError: Cannot read properties of undefined (reading 'clientToken')at Object.getClientToken (adapter.js:66:66)`. [GitHub-35961](https://github.com/magento/magento2/issues/35961)

<!-- BUNDLE-3140 3141-->

*  Fraud protection, ACH payment, and local payment method web hooks have been implemented. The fraud protection web hook Is triggered only if a risk decision has been made in Braintree. The ACH web hook is triggered only after an ACH payment has updated to `settled` or `settlement decline`.

<!-- BUNDLE-3143-->

*  The **[!UICONTROL Tagline]** and **[!UICONTROL Layout]** configuration fields have been removed from all **[!UICONTROL PayPal]** buttons in the Admin Styling section.

<!-- ACP2E-1229-->

*  The Braintree Vault payment method option remains selected in the checkout workflow when a shopper updates their billing address. Previously, the payment method was deselected when the shopper deselected the **[!UICONTROL My billing and shipping address are the same]** button.

<!-- BUNDLE-3184-->

*  Line items are now passed for PayPal transactions when the **[!UICONTROL Send Line Items]** configuration setting is enabled from the Admin.

<!-- BUNDLE-3187-->

*  Validation logic on the ACH payment method **[!UICONTROL Account Number]** field now supports four to 17 digit text.

<!-- BUNDLE-3043-->

*  The `customerPaymentTokens` query no longer returns Braintree tokens when the vault is turned off from the Admin.

<!-- BUNDLE-3137-->

*  Admin users can now create an order or reorder for customers when the Braintree payment method is enabled. Previously, Magento Open Source threw this error: `report.CRITICAL: Error: Call to a member function getMethodInstance() on null in /app/vendor/paypal/module-braintree-core/Block/Form.php:174`

<!-- BUNDLE-3139-->

*  Shoppers can now use the Braintree payment method in storefronts where **[!UICONTROL Enable Card Payments]** has been disabled. Previously, Magento Open Source threw this JavaScript error: `_adapter.js:66 Uncaught TypeError: Cannot read properties of undefined (reading 'clientToken')at Object.getClientToken (adapter.js:66:66).`


#### Performance

<!-- ACP2E-1028-->

*  The price indexer now deletes outdated data as expected after replacing records during partial re-indexing of large catalogs. Previously, the re-indexing process removed outdated records before replacing them, which caused products to occasionally disappear temporarily from the storefront. [GitHub-35616](https://github.com/magento/magento2/issues/35616)

<!-- ACP2E-963-->

*  The performance of the `bin/magento/setup:upgrade` command has been improved. Previously, this command recreated the database triggers, which caused significant downtime during command execution. Additionally, the indexers did not revert back to the scheduled mode and remained in save mode. [GitHub-33386](https://github.com/magento/magento2/issues/33386)

<!-- ACP2E-1016-->

*  Updating tier prices by API now executes faster. Previously, updating tier prices generated unnecessary `SELECT` queries, which delayed execution when many customer groups were assigned to a product.

<!-- ACP2E-1307-->

*  Loading of pages that include the catalog widget product list has been optimized. Previously, non-global attributes were loaded directly from the database.

### Reports

<!-- ACP2E-1104-->

*  The Order Total report **from** and **to** dates are now displayed properly after selection from the date picker.

<!-- BUNDLE-3147-->

*  The `ANDROID_PAY_CARD` constant in `Braintree/Ui/Component/Report/Listing/Column/PaymentType.php` has replaced `GOOGLE_PAY_CARD`. This resolves issues with the Braintree report. 

### Reviews

<!-- ACP2E-1214-->

*  Admin users with restricted access to a specific scope can now delete product reviews as expected.

### Roles

<!-- ACP2E-1277-->

*  Added a missing ACL for **[!UICONTROL Stores]** > **[!UICONTROL Configuration]** > **[!UICONTROL Services]** > **[!UICONTROL OAuth]**. Previously, you could not define access to this OAuth configuration setting when setting up role permissions.


### Search

<!-- ACP2E-989-->

*  Searches for strings within quotation marks now work as expected when the **[!UICONTROL Minimum Terms to Match]** configuration setting is enabled. Previously, Magento Open Source threw this error: `{"error":{"root_cause":[{"type":"parsing_exception","reason":"[match_phrase] query does not support [minimum_should_match]' ...`.

<!-- ACP2E-877-->

*  The **Signed up point** search filter for customer records on the sales order customer grids now works as expected during order creation.

<!-- ACP2E-783-->

*  The quality of search suggestions has been improved for multi-word queries.

<!-- AC-6768-->

*  Search results now include out-of-stock option outputs for all available products when **[!UICONTROL Display Out Of Stock Products]** is enabled [GitHub-36055](https://github.com/magento/magento2/issues/36055)


### Shipping

<!-- ACP2E-670-->

*  Shipping rates for FedEx, USPS, and UPS are calculated correctly when the Free Shipping Cart rule is set to match only a subset of items in the cart.

<!-- AC-937-->

*  The Admin shipping page no longer displays the free shipping option when the order total is less than the specified minimum order amount that is eligible for free shipping. [GitHub-33697](https://github.com/magento/magento2/issues/33697)

<!-- AC-838-->

*  Magento Open Source now honors the Admin customer **[!UICONTROL Show Company]** configuration setting when displaying shipping or customer address. When this setting is disabled, the shipping company is no longer included in the shipping, customer address, or in the database order record. Previously, the information was displayed despite setting disablement. [GitHub-33729](https://github.com/magento/magento2/issues/33729)

<!-- magento/magento2/pull/35631-->

*  Removed a superfluous save operation on quotes when estimating shipping.

<!-- magento/magento2/pull/35817-->

*  `storeId` scope is now applied directly from `$request->getStoreId()` to ensure that scope is not lost when a quote is created by an admin user. Previously, problems occasionally occurred with shipping methods when a quote was created from the Admin using third-party modules.

<!-- ACP2E-1304-->

*  SEO-friendly URLs are now generated for products whose `url_key` setting is overridden on the store-view level. Previously, category product URLs were not redirected to SEO-friendly URLs.

<!-- ACP2E-1196-->

*  Magento Open Source no longer throws a minimum order amount error when a discount is applied to shipping costs.

<!-- ACP2E-1190-->

*  Shipping refunds are now calculated correctly when tax is applied after a discount has been applied to shipping.

<!-- ACP2E-910 AC-3182-->

*  All applicable promotions for a requested cart through GraphQL `cart` query are returned together. Promotions include line item discounts, cart rules/discounts, coupons, gift cards, and store credit. [GitHub-35545](https://github.com/magento/magento2/issues/35545)

<!-- AC-2363-->

*  Added the `price_excl_tax` and `price_excl_tax` types to the output of the `setShippingMethodsOnCart` mutation. [GitHub-31206](https://github.com/magento/magento2/issues/31206) 

<!-- AC-1096-->

*  Unique shipping IDs are now passed in GraphQL responses as expected with shipping details for orders shipping to multiple addresses for GraphQL queries.

### Tax


<!-- AC-3201-->

*  The **[!UICONTROL Display Zero Tax Subtotal]** configuration setting is now applied as expected for orders in deployments offering multiple shipping methods. Previously, the zero tax field was visible on the cart page during checkout before a shipping method was selected even when this setting was disabled. [GitHub-35561](https://github.com/magento/magento2/issues/35561)

<!-- AC-3157-->

*  Magento Open Source can now display grouped products with tax on the storefront category page in deployments running PHP 8.1. Previously, Magento Open Source did not display a list of products and threw this exception: `main.CRITICAL: Exception: Deprecated Functionality: ucfirst(): Passing null to parameter #1 ($string) of type string is deprecated in /var/www/m24/vendor/magento/module-tax/Pricing/Render/Adjustment.php on line 188 in /var/www/m24/vendor/magento/framework/App/ErrorHandler.php:61`. [GitHub-35500](https://github.com/magento/magento2/issues/35500)

<!-- ACP2E-1258-->

*  Merchants can no longer move a scheduled update to another update that contains the same rule ID. Previously, schedule updates for cart price rules created duplicate schedules when an update was moved to another update that contained the same rule ID.

<!-- ACP2E-1295-->

*  Automatic customer group assignment now works when there is no VAT ID associated with the customer's address. If the address does not contain a VAT ID, it is treated as belonging to a non-VAT registered customer, and Magento Open Source changes the customer group to a non-VAT group. Previously, when **[!UICONTROL Enable Automatic Assignment to Customer Group]** was enabled, the customer account was not automatically assigned to the `customerGroup` when the VAT ID was deleted from the customer account.

<!-- ACP2E-493-->

*  The correct dynamic blocks are now shown for staged catalog rules in staging preview mode. Previously, unrelated dynamic blocks were shown.

<!-- ACP2E-1080-->

*  Multiple taxes are now rendered correctly in the Tax Summary section of invoices and credit memos when multi-shipping is applied during checkout.

<!-- ACP2E-1076-->

*  Discounts are no longer applied when an order subtotal including tax along with Fixed Product Tax amount exceeds the cart rule condition on the cart page. Previously, discounts were applied even when the total exceeded the cart rule condition.

<!-- ACP2E-913-->

*  You can now specify a `vat_id` when using GraphQL to add or update the address of a guest shopper.


### Test

<!-- ACP2E-1171-->

*  Fixed unit tests errors for different versions of the `ICU` and `libxml` libraries.

<!-- ACP2E-1134-->

*  Developers can now instruct the system to execute a data fixture in a specific store view. The new optional parameter `scope` accepts a `string` that corresponds to the store fixture alias.

<!-- ACP2E-1133-->

*  Added the ability to generate multiple instances of a data fixture using the optional `count` parameter.

<!-- AC-6860-->

*  Removed non-native `array_first` function from dev dependencies in the MFTF framework. 

### Translations and locales

<!-- ACP2E-912-->

*  Inline translation now works correctly with special characters including extended unicode characters in phrases located in SCRIPT tags. Previously, Japanese characters were rendered incorrectly in edited script when using inline translation.

<!-- ACP2E-844-->

*  The `ñ` character in a product name is now converted to `n` during URL key generation.

<!-- AC-3499-->

*  The output of running `bin/magento i18n:collect-phrases` now includes mail template translations in `depend` constructs as expected. [GitHub-35449](https://github.com/magento/magento2/issues/35449)

<!-- ACP2E-1135-->

*  Japanese characters can now be directly entered into the product page attribute set (combo box). Previously, directly inputting Japanese characters in this combo box resulted in changed or deleted characters when running the Firefox browser on MacOS. The `textInput` HTML attribute, which can better handle Japanese character conversion in all browsers, has replaced the `Value` and `valueUpdate` attributes.

<!-- ACP2E-1238-->

*  The `getOptions` method now correctly fetches `price` attribute label values based on store view. Previously, the `price` attribute was translated during GraphQL operations for the incorrect store view.


### UI


<!-- ACP2E-1018-->

*  Website-specific currency is now used as expected for Special Price, Cost and MSRP columns in the Admin products grid. Previously, the correct currency symbol was not displayed in the Admin catalog product grid when filtering by the store view for a special price.

<!-- ACP2E-980-->

*  The drag and drop functionality of product custom options now works as expected. You can now move a customizable option from one page to another when there are multiple pages available in the customizable option grid.

<!-- ACP2E-866-->

*  Admin dashboard charts now display YTD time intervals from the beginning of the current calendar year to the current date as expected. Previously, date ranges included over 12 months.

<!-- AC-3088-->

*  A missing default favicon on the storefront home page has been added. [GitHub-35493](https://github.com/magento/magento2/issues/35493)

<!-- ACP2E-1025-->

*  The Admin now successfully displays the latest login date of each admin user. Previously, when an admin user logged in to the Admin for the first time, an empty login date value was displayed on the Admin user grid.


<!-- AC-3762-->

*  The preview email template feature (**[!UICONTROL Marketing]** > **[!UICONTROL Communications]** > **[!UICONTROL Email Templates]**) now displays templates correctly. Previously, the preview image was truncated. [GitHub-35697](https://github.com/magento/magento2/issues/35697)

<!-- magento/magento2/pull/35656-->

*  Added the `new-shipping-address-modal` class to support styling of the new shipping address modal.

<!-- magento/magento2/pull/35738-->

*  Added informative text beneath the `Search Weight` attribute's `Storefront Properties` input field on Admin **[!UICONTROL Stores]**  > [!UICONTROL Attributes] > **[!UICONTROL Product]**.

<!-- ACP2E-1323-->

*  Email previews now open in a separate tab instead of a popup window, which provides a wider view of the email content. Previously, email content was truncated.

<!-- ACP2E-1299-->

*  The filter function for the user role grid (Admin **[!UICONTROL System]** > **[!UICONTROL Permissions]** > **[!UICONTROL User roles]** > **[!UICONTROL Administrators]**) now works as expected. The array value is now handled separately. Previously, when you tried to enter a query in this grid, Magento Open Source threw this console error, and the page did not load: `Uncaught TypeError: Cannot read properties of null`. [GitHub-35993](https://github.com/magento/magento2/issues/35993)

<!-- ACP2E-328-->

*  Validation for attribute values has been added when creating a customer through the REST API. The creation process now fails when invalid attributes values are provided. Previously, there was no validation for gender, which is not a required field. During customer creation, the value that was passed in for gender was saved in the `customer_entity` table.

<!-- ACP2E-1105-->

*  Addresses added during checkout now keep their expected format. Previously, blank lines were ignored.

<!-- ACP2E-897-->

*  Changing the product grid's columns grid view and selecting new columns for a custom view no longer triggers a Select All Grid Columns action. Previously, the column box disappeared, and products in the grid were selected or deselected. [GitHub-36302](https://github.com/magento/magento2/issues/36302)

<!-- ACP2E-1245 1405-->

*  Admin users can now clear the Admin completed tasks log successfully. Previously, the Admin displayed this error: `Something went wrong`. [GitHub-36255](https://github.com/magento/magento2/issues/36255)

<!-- AC-7525-->

*  The theme Header setting `Welcome Text` can now contain a single quote character. Previously, Magento Open Source threw this JavaScript error: `Uncaught SyntaxError: Unable to process binding "ifnot: function(){return customer().fullname }"`.

### URL rewrites

<!-- ACP2E-808-->

*  Changing product visibility to **[!UICONTROL Not Visible Individually]** in the global All Store Views scope now removes only URL rewrites for store views that have not overridden the visibility attribute. Changing product visibility in this way also generates URL rewrites for all store views including those that have overridden the URL key attribute (but not the visibility setting). Previously, URL-rewrite rules were not applied when visibility settings changed.

### Web API framework

<!-- ACP2E-1207-->

*  The REST API `DELETE /rest/V1/products/:sku/media/:entryId` now returns an error message if the image is not removed from the product because it is assigned to a role in other store views. Previously, the API returned a successful response even when the image was not removed successfully.

<!-- ACP2E-1155-->

*  Merchants can now use the REST API to create a credit memo for an order with zero grand total. Previously, Magento Open Source displayed this error: `The order does not allow a credit memo to be created. The credit memo's total must be positive. We can't create a credit memo for the invoice/order`.

<!-- ACP2E-1136-->

*  The Admin product edit page now accurately reflects a product's assignments after the product's website assignment has been changed using the REST API. [GitHub-36281](https://github.com/magento/magento2/issues/36281)

<!-- ACP2E-863-->

*  Duplicate option IDs can no longer be included for multi-select attributes during bulk REST API requests to update products. Previously, you could set duplicate option IDs for multi-select attributes when sending a bulk API request to update a product. When that multi-select attribute was configured for inclusion in layered navigation, EAV indexing failed with a `Duplicate entry` error.

<!-- ACP2E-778-->

*  Product names in shopping carts now use the specified store view's values as expected. Previously, product names in the cart always returned the default store view value in REST API cart responses.

<!-- AC-5986-->

*  Cart item custom option values can now be updated using the REST API. [GitHub-35768](https://github.com/magento/magento2/issues/35768)

<!-- AC-1330-->

*  Bulk API requests for more than 20 `sourceItems` now complete successfully in deployments where Inventory is enabled.

<!-- ACP2E-1044-->

*  The Fixer currency service now works as expected with keys generated via ApiLayer, and currency rates are exported correctly. Previously, Magento Open Source threw an error when a merchant tried to import currency rates through the Admin.

<!-- ACP2E-726-->

*  You can now use the REST API `/rest/V1/bulk?searchCriteria[filter_groups]` request to query bulk operations by search criteria. Previously, the following error was returned: `report.CRITICAL: Report ID: webapi-624bbb1db96c4; Message: Item (Magento\AsynchronousOperations\Model\Operation) with the same ID "0" already exists.`

<!-- magento/magento2/pull/36147-->

*  Product prices are now updated correctly on both the Admin and storefront catalog search pages using the Manage Base Price API. [GitHub-33767](https://github.com/magento/magento2/issues/33767)


### Wish list


<!-- ACP2E-1013-->

*  Shoppers can now add products to their wish list after logging in. Previously, due to issues with form key validation after log in, the form key submitted with the add-to-wishlist request was invalidated.

<!-- ACP2E-341-->

*  Products are now added as expected to the wish list from product list and view pages after a guest customer confirms their account from a confirmation email. Previously, products were not added to the wish list after account confirmation.

<!-- ACP2E-1175-->

*  The `addProductsToWishlist` query now returns an informative error message when a shopper tries to add an item to a wish list with an invalid value for the product `select` custom option. Previously, server validation for the dropdown custom option value was missing, which lead to an invalid value in the database. As a result, the endpoint returned this internal server error: `GraphQL endpoint returns Internal server error with "Call`.

## Known issue

**Issue**: You cannot create a credit memo when free shipping is enabled (**[!UICONTROL Stores]** > **[!UICONTROL Configuration]** > **[!UICONTROL Sales]** > **[!UICONTROL Delivery Methods]**) and the displayed shipping price includes tax. When you try to create a credit memo, Adobe Commerce throws this exception: `"Division by zero".vendor/magento/module-sales/Model/Order/Creditmemo/Total/Tax.phpLine 139`. [GitHub-36800](https://github.com/magento/magento2/issues/36800)

**Workaround**:  A hot fix for this issue is now available. Go to [Quality Patches Tool: Search for patches](https://experienceleague.adobe.com/tools/commerce-quality-patches/index.html) and search for patch ACSD-50814.

## Community contributions

We are grateful to the wider Magento Open Source community and would like to acknowledge their contributions to this release.

The Community Engineering team [Magento Contributors](https://magento.biterg.io/app/kibana) maintains a list of top contributing individuals and partners by month, quarter, and year. From that Contributors page, you can follow links to their merged PRs on GitHub.

### Partner contributions

The following table highlights contributions made by Partners. This table lists the Partner who contributed the pull request, the external pull request number, and the GitHub issue number associated with it (if available).

{{$include /help/_includes/release-notes/engcomm-2-4-6-partner.md}}

### Individual contributor contributions

The following table identifies contributions from our community members. This table lists the community member who contributed the pull request, the external pull request number, and the GitHub issue number associated with it (if available).

{{$include /help/_includes/release-notes/engcomm-2-4-6-issues.md}}

## System requirements

Our technology stack is built on PHP and MySQL. For more information, see [System Requirements](../../../installation/system-requirements.md).

## Installation and upgrade instructions

You can install Magento Open Source 2.4.6 using [Composer](../../../installation/composer.md).
