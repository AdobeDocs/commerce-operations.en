---
title: Adobe Commerce 2.4.7-beta1 release notes
description: Learn about new features, enhancements, bug fixes, and known issues in the 2.4.7-beta1 Adobe Commerce release.
badgeCoreBeta: label="2.4.7-beta1" type="informative"
---
# Adobe Commerce 2.4.7-beta1 release notes


>[!IMPORTANT]
>
>Beta releases may contain defects and are provided "AS IS" without warranty of any kind. Adobe will have no obligation to maintain, correct, update, change, modify or otherwise support (via Adobe Support Services or otherwise) the beta releases. Customers are advised to use caution and not to rely in any way on the correct functioning or performance of the beta releases and/or any accompanying documentation or materials. Accordingly, any use of the beta releases is entirely at the customer's own risk.


Adobe Commerce 2.4.7-beta1 includes over 200 quality fixes and enhancements. Core Composer dependencies and third-party libraries have been upgraded to the latest available versions. Support for Composer 2.5 has been added, while Composer 2.2.x remains supported. 

This release boosts GraphQL coverage for custom attributes and enhanced GraphQL caching abilities.

{{bics}}

## Other release information

Although code for these features is bundled with releases of the Adobe Commerce core code, several of these projects (for example, B2B, Page Builder, and Progressive Web Applications (PWA) Studio) are also released independently. Bug fixes for these projects are documented in the separate, project-specific release information that is available in the documentation for each project.

## Adobe Commerce 2.4.7-beta1

Adobe Commerce 2.4.7-beta1 has been tested against the following component versions:

*  Composer 2.5
*  Elasticsearch 8.5
*  MariaDB 10.6
*  MySQL 8.0
*  OpenSearch 2.5
*  PHP 8.2 and 8.1
*  RabbitMQ 3.11
*  Redis 7.0
*  Varnish 7.3

## Adobe Commerce 2.4.7 highlights

Look for the following highlights in this release.

### Security enhancements

This release includes 13 security fixes and platform security improvements.

No confirmed attacks related to these issues have occurred to date. However, certain vulnerabilities can potentially be exploited to access customer information or take over administrator sessions. Most of these issues require that an attacker first obtains access to the Admin. As a result, we remind you to take all necessary steps to protect your Admin, including but not limited to these efforts:

*  IP allowlisting
*  [Two-factor authentication](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/)
*  Use of a VPN
*  Use of a unique location rather than `/admin`
*  Good password hygiene

See Adobe Security Bulletin for the latest discussion of these fixed issues.

#### Additional security enhancements

Security improvements for this release improve compliance with the latest security best practices, including this change, which introduces a change in the default behavior of an existing REST endpoint:
 
The default behavior of the [`isEmailAvailable`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/queries/is-email-available/) GraphQL query and ([`V1/customers/isEmailAvailable`](https://adobe-commerce.redoc.ly/2.4.6-admin/tag/customersisEmailAvailable/#operation/PostV1CustomersIsEmailAvailable)) REST endpoint has changed. By default, the API now always returns `false`. Merchants can enable the original behavior, which is to return `true` if the email does not exist in the database and `false` if it exists. <!-- AC-6695 -->

### Platform enhancements

Platform upgrades for this release improve compliance with the latest security best practices. Adobe Commerce 2.4.7-beta1 introduces:

*  Composer 2.5.x. Compatibility with Composer 2.2.x remains.  <!-- AC-8129 -->

*  **Varnish cache 7.3 support**. This release is compatible with the latest version of Varnish Cache 7.3. Compatibility remains with the 6.0.x and 7.2.x versions, but we recommended using Adobe Commerce 2.4.7-beta1 only with Varnish Cache version 7.3 or version 6.0 LTS.

*  **RabbitMQ 3.11 support**. This release is compatible with the latest version of RabbitMQ 3.11. Compatibility remains with RabbitMQ 3.9, which is supported through August 2023, but we recommended using Adobe Commerce 2.4.7-beta1 only with RabbitMQ 3.11.

#### Other upgrades and replacements

Outdated JavaScript libraries have been upgraded to their latest versions, including:

*  `moment.js` library (v2.29.4) <!-- AC-7389 -->
*  `jQuery UI` library (v1.13.2)  <!-- AC-7775 -->
*  `jQuery` validation plugin library (v1.19.5) <!-- AC-8077 -->

### Performance and scalability enhancements

This release introduces significant improvements in processing speed of save operations for large deployment configurations.

*  **Faster save operations of store-level configurations for deployments with many stores**. Saving configuration settings in deployments with more than 500 stores can be time-consuming. The new [`Async Config`](../../../performance/configuration.md#asynchronous-configuration-save-badge-247-beta1typeinformative-urlhelpreleaserelease-notescommerce2-4-7md-tooltipavailable-in-247-beta1-only) module enables asynchronous configuration save operations by running a `cron` job that uses a consumer to process the save operation in a message queue. `AsyncConfig` is **disabled** by default.  <!-- ACPT-831 -->

*  **Faster generation of the config cache for large configurations**. The `bin/magento cache:clean config` command now pre-warms the config cache when the config cache is enabled. This reduces the downtime required to generate the config cache for large configurations. Configuration save operations no longer clean the `config_scopes` cache before writing data to the cache, which also reduces the time that other requests are locked out while config data is being written.
  <!-- ACPT-992 -->

*  **Introducing an application server for all GraphQL APIs** (excluding B2B- and service- related processes). This release introduces a new PHP application server that is implemented on a Swoole PHP extension. This application server enables Adobe Commerce to maintain  state between Commerce GraphQL API requests and eliminates the need for bootstrapping. By sharing application state among processes, API requests become significantly more efficient, and API response times potentially decrease by 50 - 60 milliseconds.


  The `ApplicationServer` module implements the PHP application server, which is available for on-premises deployments only. Developers who want to implement this server must also install and configure Swoole and Nginx.  
  
  This beta version of this application server is available for on-premises deployments only; it does not support Cloud-based deployments. It does not yet support B2B GraphQL functionality. GraphQL requests may not work as expected in on-premises deployments when this version of the PHP application server is configured. <!-- ACPT-27 -->


### Adobe Commerce Extension metapackage

This release introduces the Adobe Commerce Extension metapackage v2.0.0-beta1, which automatically bundles select Adobe Commerce extensions with this core release. The versions of these extensions that are included in this metapackage are installed when `composer update` is run, simplifying the process of upgrading these extensions when upgrading to the latest core release. These extensions will still maintain independent release schedules.

The Adobe Commerce Extension metapackage for Adobe Commerce 2.4.7-beta1 includes three extensions: 

*  [Bolt Quick Checkout](https://experienceleague.adobe.com/docs/commerce-merchant-services/quick-checkout/overview.html)
*  [Adobe I/O Events for Adobe Commerce](https://developer.adobe.com/commerce/events/get-started/)
*  [Payment Services](https://experienceleague.adobe.com/docs/commerce-merchant-services/payment-services/guide-overview.html)

Future versions of this extension metapackage will contain additional extensions. 

### Adobe Commerce integration with Adobe IMS

The `adobe-ims-metapackage` v2.3.0-beta1  is bundled with Adobe Commerce 2.4.7-beta1. <!-- CABPI-545-->

With Adobe IMS 2.3.0, admin users can be imported automatically from the Adobe Console into the Commerce Admin when logging in for the first time. Previously, admin user accounts had to be created manually in both the Adobe Console and Commerce Admin.

### B2B

This release introduces enhanced web API coverage of the storefront shared catalog feature. B2B enhancements include: 

* New endpoints that provide REST API coverage of Shared Catalog assign and reset custom price actions:  <!-- LYNX-42 -->

  * `POST /V1/sharedCatalog/:sharedCatalogId/assignCustomPrices`
  * `POST /V1/sharedCatalog/:sharedCatalogId/resetCustomPrices`

* The new `quickorder_active` field for the `storeConfig` and `availableStores` queries. This field indicates whether the quick order feature is enabled. <!-- LYNX-61 -->

This release includes multiple bug fixes. See [B2B Release Notes](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).

### GraphQL

This release adds enhanced GraphQL caching abilities and support to the GraphQL schema for custom attributes, including:

* **Enhanced support for custom attributes**. GraphQL custom attribute support has been enhanced by enriching API data so it now supports all attribute types. The GraphQL EAV attributes schema now supports extending customer attributes and customer address objects in the Admin and retrieving them using GraphQL. Specific areas of enhancement include: <!-- LYNX-61 110-->

  * extended/added custom attributes support to specific areas such as customer and customer address
  * added caching for custom attributes
  * enhanced existing custom attributes support for products

* **Enhanced GraphQL caching capabilities improve page load speed**. Caching capability has been added to these queries, improving the speed of page load time for most PWA pages:

  * [`storeConfig`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/) <!-- B2B-2487 2258 -->
  * [`currency`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/currency/) <!-- B2B-2255 -->
  * [`countries`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/countries/) and [`country`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/country/) <!-- B2B-2256 -->
  * [`availableStores`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/available-stores/) <!-- B2B-2257 -->
  * `symfony/process`
  * [`customAttributeMetadata`](https://developer.adobe.com/commerce/webapi/graphql-api/index.html#query-customAttributeMetadata) <!-- B2B-2259 -->

* **New GraphQL resolver cache types** include: 
  * CMS Page resolver cache. This caches the results of the CMS Page resolver.  <!-- B2B-2451 -->
  * `cmsBlocks` query resolver cache. This caches the results returned from `Magento\CmsGraphQl\Model\Resolver\Blocks::resolve`. <!-- B2B-2659 -->

* Added the `quickorder_active` field to the [`storeConfig`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/) and [`availableStores`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/available-stores/) queries. This field indicates whether the quick order feature is enabled. <!-- LYNX-58 -->

* The performance of the GraphQL parser has improved by reducing the number of times the `parse` method is called per request. It is now called once. Previously, the parser was called at least three times. <!-- B2B-2606 -->

#### New query

[`customAttributeMetadataV2`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/custom-attribute-metadata-v2/) <!-- LYNX-152 160-->

#### Deprecated queries

* [`attributesMetadata`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/attributes-metadata/) <!-- LYNX-77-->
* [`customAttributeMetadata`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/custom-attribute-metadata/)

### Page Builder

Page Builder v.1.7.4 is compatible with Adobe Commerce 2.4.7-beta1.

### PWA Studio

PWA Studio v.13.2.x is compatible with Adobe Commerce 2.4.7-beta1. It includes multiple enhancements to improve accessibility. For information about bug fixes, see [PWA Studio releases](https://github.com/magento/pwa-studio/releases). See [Version compatibility](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) for a list of PWA Studio versions and their compatible Adobe Commerce core versions.

## Fixed issues

We have fixed hundreds of issues in the Adobe Commerce 2.4.7-beta1 core code. A subset of the fixed issues included in this release is described below.

### Installation, upgrade, deployment

<!-- ACP2E-1505 -->

*  The `bin/magento setup:upgrade` command no longer fails with this type of MySQL memory limit-related error: `PHP Fatal error:  Allowed memory size of 4294967296 bytes exhausted (tried to allocate 20480 bytes)`. Multi-select attribute migration has been optimized to consume less memory during `setup:upgrade`.

<!-- ACP2E-1751 -->

*  Generating a database backup now works as expected from both the Admin and command line. Previously, Adobe Commerce threw this error: `Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'delimiter' at line 1, query was: delimiter ;;`.

<!-- ACP2E-1604 -->

*  Running `setup:config:set` without specifying the `--lock-db-prefix` parameter no longer erases the current value from the `env.php` file.

<!-- ACP2E-1498 -->

*  Varnish configuration has been updated to prevent guest users from accessing cached content related to other customer groups.

<!-- AC-7113 -->

*  Shoppers can now place an order in a deployment that implements split database when **[!UICONTROL Checkout Async]** is enabled. Previously, Adobe Commerce threw this error: `An error occurred on the server. Please try to place the order again`.


<!-- https://github.com/magento/magento2/pull/33092 -->

*  `bin/magento setup:upgrade` now completes successfully when installing a new module that installs both tables and associated `mview` indexers. 

<!-- ENGCOM-9243 -->

*  `bin/magento setup:upgrade` now displays a more informative error message when a message queue topic does not include a topic name. [GitHub-34246](https://github.com/magento/magento2/issues/34246)

<!-- https://github.com/magento/magento2/pull/36239 -->

*  `bin/magento setup:upgrade` now displays a more informative error message when merged XML files are invalid. The error message now includes the filename. 


### Bundle products

<!-- ACP2E-1478 -->

*  Bundle products are now successfully imported without duplicating SKUs in product options. Previously, Adobe Commerce created multiple duplicate SKUs in product options when you imported bundle products with duplicate entries. 

<!-- ACP2E-1388 -->

*  Bundle product price is now calculated properly when one of the products in the bundle is out of stock. Previously, if a product that was part of the bundle were out of stock, it was removed from the price calculation.

<!-- ACP2E-1503 -->

*  Bundle products are now displayed as out of stock when the last of their required children products are bought. Previously, bundle products were displayed as in-stock on the storefront when their simple products were out of stock.

<!-- ACP2E-1443 -->

*  Performance issues when adding bundle products with non-required options to the cart using the `addBundleProductsToCart` mutation have been resolved.

<!-- ACP2E-1264 -->

*  The `categoryList` query now returns all bundle options as expected when the **[!UICONTROL Show out-of-stock products]** configuration setting is enabled. Previously, out-of-stock options were not included in the query response. 

<!-- ACP2E-1345 -->

*  Bundle products created with `POST V1/products` now succeed when catalog price scope is set to `website`. Previously, an integrity constraint violation occurred. [GitHub-35595](https://github.com/magento/magento2/issues/35595)


### Cache

<!-- ACP2E-1524 -->

*  Page cache is now cleared as expected for a parent product when one of its child products has been saved from the Admin. A plugin check has been introduced to reach cache invalidation for configurable variants, similar to other product types, irrespective of indexer state (scheduled or real time). Previously, prices were not updated properly on the storefront after a configurable variation was updated from the Admin.

<!-- ACP2E-1454 -->

*  Added a caching mechanism for AWS credentials. A credentials provider now uses the Magento cache to cache credentials retrieved from AWS for EC2 configuration.

<!-- AC-7639 -->

*  The plugin whose purpose is to add the configurable cache tag when a simple product associated with a configurable product is saved now works as expected. All relevant configurable cache tags are removed as expected when a simple product is updated by `POST V1/products`. Previously, not all prices were updated on the storefront, and caches had to be manually cleared. [GitHub-36726](https://github.com/magento/magento2/issues/36726)

### Cart and checkout

<!-- ACP2E-1614 -->

*  Products in the cart are no longer excluded from related and upsell product lists after the cache is flushed.

<!-- ACP2E-1580 -->

*  The cart tax and shipping estimator now accurately reflects the default destination configuration. Previously, when you configured default tax destination calculation settings and specified State/Region and ZIP, only the ZIP value was shown in the cart under **[!UICONTROL Estimate Tax and Shipping]**. This resulted from Adobe Commerce setting the region ID to undefined before invoking the conditional statement that set the default region ID from the Admin. 

<!-- ACP2E-1547 -->

*  Adobe Commerce no longer throws this error during checkout when persistent shopping cart is enabled: `Invalid state change requested`. Previously, when this error was thrown, multiple orders with the same `quote_id` were occasionally created.

<!-- ACP2E-1456 -->

*  The mini cart now displays bundle product prices that reflect cart tax configuration settings. Previously, the mini cart always included taxes in the prices of bundle products. 

<!-- ACP2E-1414 -->

*  The performance of customer segment rules that rely on active carts has been improved, which has reduced the time needed to add a product to the cart.

<!-- AC-1116 -->

*  Shoppers can now add more products to the shopping cart than the amount specified in the **[!UICONTROL Minimum Qty Allowed in Shopping Cart]** setting. Previously, Adobe Commerce threw an error when a shopper added additional products to the cart after first adding the minimum quantity. [GitHub-33955](https://github.com/magento/magento2/issues/33955)

<!-- AC-7503 -->

*  The shipping estimate provided from the cart page is now accurate. `collectShippingRates` is now set only once. Previously, the shipping estimate was duplicated. [GitHub-36648](https://github.com/magento/magento2/issues/36648)

<!-- ACP2E-1445 -->

*  Mini cart and customer data in local storage now resets when the session is removed from the server. Previously, this data appeared when the session file was removed.

<!-- ACP2E-1417 -->

*  The `cart` query no longer returns an error when a product in the specified cart is out of stock. Previously, shoppers using this query to make a purchase could not complete their purchase when an item was out of stock, and their checkout page was blank.

<!-- ACP2E-1459 -->

*  Guest API requests to `POST V1/default/V1/guest-carts/<cartId>/shipping-information` no longer return a `cancel` status if the page reloads during login in a mobile environment. Previously, Adobe Commerce threw a 500 error and logged this exception: `TypeError: Argument 2 passed to Magento\CustomerCustomAttributes\Model\Plugin\ProcessCustomerShippingAddressCustomAttributes::beforeSaveAddressInformation() must be of the type string, null given`.

<!-- AC-7886 -->

*  Free shipping eligibility is now calculated as expected when the **[!UICONTROL Subtotal (Excl. Tax)]** condition for cart rules is applied. [GitHub-36760](https://github.com/magento/magento2/issues/36760)

<!-- AC-6672 -->

*  The `cart` query now returns the correct tier pricing for a product. [GitHub-29655](https://github.com/magento/magento2/issues/29655)

<!-- ACP2E-1162 -->

*  Informative error messages have been added to the checkout page to guide shoppers when application of a coupon on the shipping page conflicts with the selected shipping method. Previously, a message told shoppers to return to the previous page.

<!-- ENGCOM-8387 -->

*  The authentication popup is now initialized only when it is needed instead of whenever guest checkout is enabled. It is now initialized when the guest shopper tries to proceed to checkout, and guest checkout is disabled. [GitHub-30672](https://github.com/magento/magento2/issues/30672)

### Cart price rule

<!-- ACP2E-1516 -->

*  Cart price rules are now applied as expected when a cart price rule related to one shipping method is configured for the store, and this shipping method is changed to another during check out. Previously, the `applied_rule_ids` value was never changed in the `sales_order_item` table, and the cart price rule was not applied to the order.

### Catalog

<!-- ACP2E-1479 -->

*  Adobe Commerce no longer displays a warning message when you save a product that was created with custom options after deleting its image. 

<!-- ACP2E-1419 -->

*  Product thumbnail images are now displayed as expected in the product stock alert email that is sent when a product is back in stock. Previously, this image was not displayed in the alert email

<!-- AC-3003 -->

*  The product count in the category tree (Admin **[!UICONTROL Catalog]** > **[!UICONTROL Category]**)  is now accurate. Previously, the category products count could not be retrieved from the `catalog_category_product_index` table. The typo that triggered this bug has been fixed. [GitHub-35417](https://github.com/magento/magento2/issues/35417)

<!-- ACP2E-1239 -->

*  The main product image on the product details page no longer visibly shifts downward during page load when `product_image_white_borders` in theme `view.xml` is disabled. Previously, the product image visibly shifted downward during page load due to incorrect height settings in Fotorama JS.

<!-- ACP2E-1361 -->

*  Customers are now notified about drops in product price when the customer is subscribed to the price drop alert. Previously, price-drop notifications were not always sent due to application-level caching.

<!-- ACP2E-1422 -->

*  Server-side validation has been added to the process of creating product attributes through the web API. You cannot enable the **[!UICONTROL Use in Layered Navigation Catalog]** field when the **[!UICONTROL Catalog Input Type for Store Owner]** field value is `Text Field`,  `Text Area`,  `Text Editor`, `Date`, or `Date and Time`. Previously, products were omitted from categories and search results.

<!-- ACP2E-1413 -->

*  The category page now re-loads with the correct pagination after a shopper opens the page, changes the pagination, navigates to a product page, and then returns to the category page.  [GitHub-36563](https://github.com/magento/magento2/issues/36563)

<!-- ACP2E-1334 -->

*  Out-of-stock simple products that are options for a configurable product are now displayed as disabled on the storefront when **[!UICONTROL Display Out of Stock Products]** is set to **Yes**. Previously, all options were displayed as available, despite their status and real availability.

<!-- ACP2E-1384 -->

*  Updating the website scope attribute in a specific store view no longer overrides the value of that attribute in global scope. Previously, importing product prices when multiple rows are available with the same SKU and `store_view_code` resulted in inaccurate prices for the default and All Store view scopes.

<!-- ACP2E-1632 -->

*  Merchants can now add a GIF image to a product's image gallery from the Admin. Previously, Adobe Commerce displayed this error:  `imagecolorsforindex(): Argument #2 ($color) is out of range`. 

<!-- ACP2E-1709 -->

*  Checks have been added to handle errors that result from undefined array keys. Previously, an error occurred during declarative schema whitelist generation.

<!-- ACP2E-1749 -->

*  Adobe Commerce now returns a valid result for the custom date `01/01/1970`. Previously, the custom attribute returned this error: `Invalid input datetime format of value '1/01/1970`. [GitHub-37274](https://github.com/magento/magento2/issues/37274)

<!-- AC-6507 -->

*  `routes` queries that use fragments now return category information as expected. Previously, an internal server error occurred on the category page. [GitHub-35906](https://github.com/magento/magento2/issues/35906)

<!-- ACP2E-1772 -->

*  Issues with the `cataloginventory_stock` partial re-indexing process have been resolved, and indexer performance has improved. Previously, stock and product categories were not accurately updated.

<!-- AC-8226 -->

*  Adobe Commerce now generates a 301 redirect for a product when the category it belongs to has been moved to a new parent. [GitHub-37039](https://github.com/magento/magento2/issues/37039)

### Catalog rules

<!-- ACP2E-1579 -->

*  Catalog rules are now applied as expected in a multi-website environment.

### Coupons

<!-- ACP2E-1551 -->

*  Shoppers can now use two separate auto-generated coupon codes that have been generated by the same cart price rule. The `Uses per Coupon` field is now enabled when the coupon type selected to `Auto` (similar for coupon type =`Specific Coupon`) . This in turn enables the shopper to apply multiple coupon codes to the same cart price if the codes are different. 

<!-- ACP2E-1496 -->

*  A shopper's single-use coupon value is now restored as expected when the order to which it was applied is canceled. 

<!-- ACP2E-1195 -->

*  The `GET V1/coupons/<couponId>` endpoint now returns the full expected response for manually created coupons just as it does for autogenerated coupons.  Previously, some fields were omitted (for example, `usage_limit`, `usage_per_customer`, and `created_at`).

### cron

<!-- AC-7987 -->

*  Admin users can now view which task the `bin/magento cron:run` process is currently performing. The title of the currently running process now lists the group and job names. [GitHub-34321](https://github.com/magento/magento2/issues/34321)


<!-- AC-7449 -->

*  The `cron` `—exclude-group` flag is now stackable, which permits you to define multiple `cron` groups with one command. [GitHub-36628](https://github.com/magento/magento2/issues/36628)

### Customer

<!-- AC-6748 -->

*  Adobe Commerce now displays the **[!UICONTROL Date of Birth]**, **[!UICONTROL Tax/VAT Number]**, **[!UICONTROL Gender]**, **[!UICONTROL Telephone]**, **[!UICONTROL Company]**, and **[!UICONTROL Fax]** fields on the edit customer page based on configuration settings. [GitHub-36196](https://github.com/magento/magento2/issues/36196)



### Email

<!-- ACP2E-1529 -->

*  Company Admin details are now saved as expected, and admins are correctly redirected, when Assign Company Admin emails contain a `CMS Block URL` variable. 

<!-- AC-2903 -->

*  Customer email addresses can now include diacritics. Previously, front-end validation prohibited the creation of a user with diacritics in their email address. [GitHub-12075](https://github.com/magento/magento2/issues/12075)

<!-- ACP2E-1682 -->

*  Stock and price alert emails are now translated according to the language configured for the website default store view. Previously, these emails were not translated.

<!-- ACP2E-1571 -->

*  `POST V1/order/notify-orders-are-ready-for-pickup` now sends an email alerting customers that an order is ready for pickup only when the order is ready. Email is now triggered only when the request has been fulfilled without an exception. 

### Frameworks

<!-- ACP2E-1492 -->

*  Mutex has been implemented for orders to prevent race conditions during update by concurrent requests. Previously, concurrent requests (race conditions) for order cancellations caused duplicated entries in the `inventory_reservation` table.

<!-- ACP2E-1381 -->

*  The `populateWithArray` function now transforms object properties to snake case correctly, making it compatible with the `AbstractModel` getters and setters. Previously, the snake case formatting was incorrect when the data attribute name contained several uppercase letters in a row. 

<!-- ACP2E-1522 -->

*  The auto increment value in the `catalog_product_entity_varchar` table now increments correctly after a product is saved. Previously, this value increased by ten.

<!-- ACP2E-1701 -->

*  Adobe Commerce no longer throws this file system exception when you try to flush the JavaScript/CSS cache:  `No such file or directory`.

<!-- ACP2E-1358 -->

*  The value of `value_id` in `customer_entity_int` is now incremented correctly. An update query is executed instead of `insert on duplicate key update` when updating an entity that incorporates these attributes. As a result,  the auto-increment columns used within the EAV model now grow in a linear fashion. Previously, the auto-increment process for columns skipped values due to failed insert queries. [GitHub-28387](https://github.com/magento/magento2/issues/28387)

<!-- AC-8462 -->

*  Removed unnecessary white space from `id` attributes that do not require it. (This bug was introduced by an Adobe Commerce 2.4.6 code change.)

<!-- AC-7923 -->

*  Store codes no longer appear in the store URL when the store is in single-store mode. [GitHub-36831](https://github.com/magento/magento2/issues/36831)

<!-- AC-7988 -->

*  Minor updates have been made to `around` plugins. [GitHub-31443](https://github.com/magento/magento2/issues/31443)

<!-- AC-7989 -->

*  The swatches `Helper` has been refactored to remove misleading import aliases. [GitHub-31373](https://github.com/magento/magento2/issues/31373)

<!-- AC-8708 -->

*  Admin users can now delete or rename a `sitemap.xml` file as expected. Previously, an admin user could delete the file from the Admin, but it remained in the file system.  [GitHub-37468](https://github.com/magento/magento2/issues/37468)

<!-- AC-8383 -->

*  `restricted_classes.php` has replaced `Zend_Validate_File_Upload`. Previously, the validator crashed during upload of an import file larger than the value configured in `php.ini `. [GitHub-37281](https://github.com/magento/magento2/issues/37281)

<!-- ACP2E-1747 -->

*  Coupons are no longer flagged as used when payment fails for the order to which they have been applied. Queue messages are now processed in the order in which they are published when the consumer is started. Previously, the first message was pulled from the queue to simply check whether messages were queued, and was rejected afterward, which caused the first message to be processed last.

<!-- ACP2E-1627 -->

*  Adobe Commerce no longer throws an exception in the log file when a user tries to print shipping label. Previously, if an extension modifies response headers that contain an attachment, the system threw an exception in the log file.

<!-- AC-7986 -->

*  Support for more HTML classes has been added to `elements.xsd`. [GitHub-36891](https://github.com/magento/magento2/issues/36891)


### General fixes

<!-- ACP2E-1508 -->

*  Errors no longer occur during requests for an RSS feed for categories when **[!UICONTROL RSS Feed Top Level Category]** is enabled. Previously, browsing the RSS feed category page resulted in Elasticsearch `CRITICAL` errors in log files when **[!UICONTROL RSS Feed Top Level Category]** was enabled. 

<!-- ACP2E-1490 -->

*  The correct value is now saved for `gws_store_groups` when role scope is changed during user role creation. Previously, when role scope was selected as `All`, the `gws_store_groups` value was saved as null during user creation but not during role editing. Also, if role scope was selected as `Custom`, then the `gws_store_groups` value was always saved as null.

<!-- ACP2E-1446 -->

*  The reset password page can now be accessed by clicking the Admin reset password link on the Admin login page when the **[!UICONTROL Add Store Code to Urls]** setting is enabled. The Admin reset password link previously opened the login page or 404 page.

<!-- ACP2E-1274 -->

*  The date range in the Admin statistics dashboard is now calculated based on the time zone that is set in configuration settings, then converted to UTC in order to fetch data from the database. 

<!-- AC-3148 -->

*  Issues with the create account page have been resolved. Previously, Adobe Commerce threw this error when you tried to open this page: `Exception: Deprecated Functionality: trim(): Passing null to parameter #1 ($string) of type string is deprecated in /var/www/vendor/magento/module-customer/Block/Widget/Name.php on line 110 in /var/www/vendor/magento/framework/App/ErrorHandler.php:61`. [GitHub-35490](https://github.com/magento/magento2/issues/35490)

<!-- ACP2E-1665 -->

*  The CMS hierarchy filter works as expected after you filter a store view then click **[!UICONTROL Save]** on Admin **[!UICONTROL Content]** > **[!UICONTROL Hierarchy]**. Previously, clicking **[!UICONTROL Save]** refreshed the page, but the context was lost, and the selected store view was no longer displayed.

<!-- ACP2E-1631 -->

*  Clicking the **[!UICONTROL Send invitation]** button (Admin **[!UICONTROL Marketing]** > **[!UICONTROL Private sales]**  > **[!UICONTROL Invitation]**) now submits a POST request along with the form key and sends the invitation successfully. Previously, when you clicked this button, neither the HTTP POST method nor the form key were present.

<!-- ACP2E-1608 -->

*  Zero-byte files can now be successfully copied to remote storage with AWS S3.

<!-- AC-7402 -->

*  Admin users can now add a new customer address from the Admin when that customer has been created for another website whose store ID does not match the website ID. Previously, Adobe Commerce displayed this pop-up message: `Something went wrong`. [GitHub-36582](https://github.com/magento/magento2/issues/36582)

<!-- AC-2904 -->

*  Saving a product with a non-default store scope no longer results in unchanged attributes becoming store-scoped when loaded using `ProductRepository`. [GitHub-8897](https://github.com/magento/magento2/issues/8897)

### Gift cards and wrapping

<!-- ACP2E-1586 -->

*  Subtotals are now calculated correctly for custom gift card amounts. 

<!-- ACP2E-1350 -->

*  Gift cards are now applied correctly during checkout with multiple addresses. Previously, gift card amounts were applied incorrectly for multi-address shipments, which resulted in invalid gift card amounts. 

<!-- ACP2E-1341 -->

*  Emulation now starts during `send()` calls once the emulation has completed during the `getInfoBlockHtml()` call, and no error are logged. Previously, the `system.log` file was flooded with this error: `main.ERROR: Environment emulation nesting is not allowed`. [GitHub-35603](https://github.com/magento/magento2/issues/35603)

<!-- ACP2E-1612 -->

*  You can now use the `updateCartItems` mutation to update a gift card in a shopping cart. Previously, only the card amount could be updated in the cart by this mutation. 

<!-- ACP2E-1669 -->

*  Gift wrapping is now included as expected in a quote based on merged carts. Previously, gift messages were successfully merged, but not wrapping selections. 

<!-- AC-7530 -->

*  The `addProductsToCart` query now successfully adds a gift card to a cart. Previously, this query expected the gift card recipient name, but the sender name was instead returned. Adobe Commerce threw this error: `Please specify a recipient name`. [GitHub-36665](https://github.com/magento/magento2/issues/36665)

### GraphQL

<!-- ACP2E-1584 -->

*  Product attributes of type `DateTime` now map to the `FilterRangeTypeInput` filter in products queries. Previously, these attributes were mapped to `FilterMatchTypeInput`. As a result of this change, queries filtering on `DateTime` attributes require `from` and `to` values instead of match values.

<!-- ACP2E-1552 -->

*  The `customer` mutation now returns only customer reviews related to a specific store view as expected when filtered by store ID.

<!-- AC-7544 -->

*  The `categories` query no longer returns an error when the `items.redirect_code` response value contains a null value. [GitHub-36675](https://github.com/magento/magento2/issues/36675)

<!-- ACP2E-1465 -->

*  Rule-based related products now load as expected in GraphQL responses after a full cache clean. Previously, the product EAV attributes that were responsible for rule-based matches were not loaded for the requested entity, although they were loaded after re-loading the storefront product page. 

<!-- ACP2E-1486 -->

*  The `changeCustomerPassword` mutation now triggers email as expected after successfully resetting a password. 

<!-- ACP2E-1494 -->

*  `urlResolver` and `route` queries now return a result when the `Target Path` of URL rewrite is an absolute URL. Previously, the `urlResolver` query returned NULL when you used it to retrieve redirect data. 

<!-- AC-7979 -->

*  The `products` query now returns correct labels. [GitHub-29635](https://github.com/magento/magento2/issues/29635)


<!-- ACP2E-1315 -->

*  The `categoryList` query now returns a populated `product` section of the `options` block for bundle products' child products as expected.  Previously, no information about bundle product child products was returned. 

<!-- AC-7114 -->

*  The `route` query now returns routes for categories and products as expected without an internal server error. [GitHub-36544](https://github.com/magento/magento2/issues/36544)

<!-- ACP2E-1652 -->

*  The `products` query now fetches `url_key` values when multiple categories are selected. 

<!-- LYNX-17  16-->

*  `product` queries now return aggregations only for products that are assigned to the specified shared catalog. Previously, aggregation data for products not assigned to a shared catalog appeared in layered navigation.

<!-- AC-7974 -->

*  Transaction names have been added to New Relic GraphQL transactions. [GitHub-36874](https://github.com/magento/magento2/issues/36874)

<!-- ACP2E-1769 -->

*  The `customer` query now returns a `product_sale_price` field that includes tax when product price has been configured to include tax. [GitHub-36946](https://github.com/magento/magento2/issues/36946)

<!-- AC-6680 -->

*  The `OptionValueProvider` class `get()` method now returns an attribute option value based on the given option_id as expected. Previously, it returned an error. [GitHub-35910](https://github.com/magento/magento2/issues/35910)

<!-- AC-6745 -->

*  The `searchProducts` query now returns all available aggregations (filters) and their correctly translated labels. Previously, price and category aggregation labels were not translated as expected. [GitHub-36140](https://github.com/magento/magento2/issues/36140)

<!-- AC-6666 -->

*  You can now use a fragment `ProductCard` when querying `related_products`, `upsell_products`, and  `crosssell_products` on `ProductInterface`. [GitHub-29769](https://github.com/magento/magento2/issues/29769)

<!-- AC-7014 -->

*  The `products` query now returns related, upsell, and cross-sell products in the order in which they were saved. [GitHub-36461](https://github.com/magento/magento2/issues/36461)

<!-- AC-8623 -->

*  Address error handling for GraphQL library components now work as expected. 

<!-- AC-8573 -->

*  GraphQL queries now return related products data sorted by position. [GitHub-33010](https://github.com/magento/magento2/issues/33010)


<!-- AC-8542 -->

*  `category_url_path` has been added to `ProductAttributeFilterInput`, which supports requesting all products for a category in a single query. [GitHub-32460](https://github.com/magento/magento2/issues/32460)

<!-- AC-821 -->

*  Corrected an error in which the method that sets the current store in a GraphQL mutation executed before the method that handles validation. [GitHub-31336](https://github.com/magento/magento2/issues/31336)

### Google Tag Manager

<!-- ACP2E-1520 -->

*  The Google Tag module now pushes the correct data to the data layer. Previously, page impressions data was not pushed to the data layer.

### Google ReCAPTCHA

<!-- ACP2E-1539 -->

*  The Google reCAPTCHA in the checkout workflow now works as expected for checks, money orders, and custom payment methods.

<!-- ACP2E-1311 -->

*  Adobe Commerce forms can no longer be submitted before the Google ReCAPTCHA checkbox loads.

<!-- ACP2E-1338 -->

*  The reCAPTCHA widget now precedes the **[!UICONTROL Place Order]** button on the payment page. Previously, the widget was displayed at the top of the page.

### Image

<!-- ACP2E-1353 -->

*  The Admin favicon icon upload form now supports `.ico` file types. [GitHub-34858](https://github.com/magento/magento2/issues/34858)

### Import/export

<!-- ACP2E-1565 -->

*  The product import process is no longer interrupted when product images are missing. Previously, when a product image was missing during the import of a third-party service using a CSV file, Adobe Commerce displayed this error: `Maximum error count has been reached or a system error is occurred!`. 

<!-- ACP2E-1476 -->

*  The performance of customer export from the Customer grid has been improved in deployments where B2B is enabled. 

<!-- ACP2E-1391 -->

*  The product import process no longer throws a validation error when an attribute value in `configurable_variations` column contains a comma.

<!-- ACP2E-1377 -->

*  Decoding has been excluded from the export process. The CSV export file text remain unchanged after import. As a result, the description does not change after re-import. Previously, HTML tags were removed in the Page Builder editor after product export and import. 

<!-- ACP2E-1451 -->

*  Non-default configurations (website or store scope) that are added as environment variables no longer break the `app:config:import` process with a recursion error.

<!-- ACP2E-1569 -->

*  Catalog search and price indexers in Update on Save mode are no longer invalidated after import. Previously, the Elasticsearch Indexer document version changed version when new and existing products were imported.

<!-- ACP2E-1482 -->

*  Product reports are now exported to the `var` directory.  Previously, these reports were exported to the document root directory, which is a read-only directory in cloud instances.

<!-- ACP2E-1736 -->

*  Empty multi-select customer address fields no longer interrupt or halt the export process.

### Index

<!-- ACP2E-1697 -->

*  The performance of the Catalog Rule Product indexer in deployments where rules are not assigned to all websites has been improved.

<!-- ACP2E-1401 -->

*  Creating a custom product type when indexers are set to **[!UICONTROL Update on schedule]** no longer causes the index update `cron` task to fail. [GitHub-36471](https://github.com/magento/magento2/issues/36471)

<!-- ACP2E-1574 -->

*  Display issues on the storefront product details page that were due to catalog permissions indexing have been resolved. Previously, Adobe Commerce cleared the index table first and then re-indexed during a full `catalogpermissions_product` or `catalogpermissions_category` indexing process. Catalog permissions did not work as expected on the storefront until the re-indexing completed.

<!-- AC-6816 -->

*  `bin/magento indexer:reindex customer_grid` no longer fails with a MySQL error when the customer grid includes newly created custom customer attributes. [GitHub-36233](https://github.com/magento/magento2/issues/36233)

<!-- AC-6975 -->

*  All new indexers are by default in **[!UICONTROL Update by Schedule]** mode. Previously, the default mode was **[!UICONTROL Update on Save]**. Existing indexers are not affected. [GitHub-36419](https://github.com/magento/magento2/issues/36419)

<!-- AC-8076 -->

*  Changing indexer mode for multiple indexers (that is, a mass action indexer mode change) now changes an indexer's mode only when the current mode differs from the one being applied. This improves performance by preventing unnecessary trips to the database. [GitHub-36823](https://github.com/magento/magento2/issues/36823)

<!-- AC-6934 -->

*  Indexing products with many attribute options has been improved. [GitHub-36386](https://github.com/magento/magento2/issues/36386)


### Infrastructure

<!-- ACP2E-1462 -->

*  Adobe Commerce no longer includes the full path to the root of the server in the error message it displays when a malformed HTTP request has been sent to the server. Only strings are now passed to the `explode` method as a second argument.

<!-- AC-8384 -->

*  `restricted_classes.php` has replaced `Zend_Validate_File_Upload`. Previously, the validator crashed during upload of an import file larger than the value configured in `php.ini `. [GitHub-37281](https://github.com/magento/magento2/issues/37281)

<!-- ACP2E-1146 -->

*  Attribute options provided by the data source model and installed using the setup data patch (typically from third party modules) can now be used with customer segment rules. Previously, this combination did not return the list of customers that matched the configured segment.

<!-- ACP2E-1512 -->

*  Configuration values that are set by environment variables (`$_ENV`) are now updated as expected when store-view codes consist of capital letters. Previously, when the store-view code consisted of capital letters, these configuration values were not updated. Scope code was always converted to lower case when configuration values were retrieved. 

<!-- AC-7093 -->

*  The email template engine can now correctly process certain nested directives (for example, `{{if}}{{depend}}...{{/depend}}{{/if}}`). [GitHub-36438](https://github.com/magento/magento2/issues/36438)

<!-- AC-7920 -->

*  `product` queries with aggregation data now return the correct label values for Boolean type product attributes. [GitHub-29123](https://github.com/magento/magento2/issues/29123)

<!-- AC-2618 -->

*  Added Ukrainian regions to the `directory_country_region` table. [GitHub-35187](https://github.com/magento/magento2/issues/35187)

<!-- https://github.com/magento/magento2/pull/29173 -->

*  CSS files are no longer corrupted when merged when `var/tmp` and `pub/static` are on different filesystems and **[!UICONTROL CSS Merging Enabled]** is enabled. Temporary files have been created in the same static directory as the target file to ensure that both files are on the same filesystem. As a result, the call to rename it is atomic. [GitHub-29172](https://github.com/magento/magento2/issues/29172)

<!-- https://github.com/magento/magento2/pull/36769 -->

*  Call to a member function `getId()` no longer triggers an exception.

<!-- https://github.com/magento/magento2/pull/34092 -->

*  Type checks are now enforced for array type in the design theme config processor.  [GitHub-34440](https://github.com/magento/magento2/issues/34440)


### Logging

<!-- ACP2E-1385 -->

*  Admin users can now see the logs for bulk actions that are created by integrations in the Bulk Actions Log section of the Admin.

### Login

<!-- ACP2E-1521 -->

*  Resetting a password in one browser and subsequently logging in through a different browser no longer results in an exception. [GitHub-36447](https://github.com/magento/magento2/issues/36447)

<!-- ACP2E-1332 -->

*  Customers are now redirected to the login page after activating an account as expected. Previously, customers were automatically logged in.

### Orders

<!-- ACP2E-1514 -->

*  Shoppers can no longer order a product using a custom price when an order is first generated from the Admin using the one-off custom price. Previously, if an order contained an item with custom prices, this custom price was applied for other orders placed with the re-order functionality.

<!-- ACP2E-1421 -->

*  Shoppers can no longer save incorrect order statuses on the order page. Order status is no longer changed from Complete to Processing when an item is shipped. Previously, Adobe Commerce did not check current order status before saving order status after a shopper entered a comment. [GitHub-36562](https://github.com/magento/magento2/issues/36562)

<!-- ACP2E-1387 -->

*  Adobe Commerce no longer throws an error on the storefront order return page when the configurable product being returned has been deleted. Previously, Adobe Commerce logged this error: `report.CRITICAL: Error: Call to a member function getShipmentType() on null in magento2ee/app/code/Magento/Rma/view/frontend/templates/return/create.phtml:52`. 

<!-- ACP2E-1367 -->

*  The sales order grid is now asynchronously synced with all orders as expected. [GitHub-36562](https://github.com/magento/magento2/issues/36562)

<!-- ACP2E-1197 -->

*  The filter-by-purchase-date functionality in the customer orders section of the orders page now works as expected. Previously,  a JavaScript error occurred when the timezone conversion logic threw an error when the same time zone was provided to the method.

<!-- ACP2E-1294 -->

*  The Adobe Commerce dashboard now displays the correct orders statistics on first load. Previously, the dashboard displayed incorrect order information, but displayed the correct information once the time period was updated.

<!-- ACP2E-1762 -->

*  Admin users are now redirected as expected to the order page after selecting a store view during new order creation from the Admin. 

<!-- ACP2E-1418 -->

*  The Orders REST API now returns information on both the configurable and simple products in the order regardless of the stock status of the simple products. Admin users can place orders now only if the selected items (products) are in stock or salable. Previously, this API returned information only about the products that were in stock.

<!-- AC-7901 -->

*  The credit memo page no longer crashes when free shipping is enabled when shipping price includes tax, and tax calculations are applied after discounts. Previously, Adobe Commerce threw a `Division by zero` exception. [GitHub-36800](https://github.com/magento/magento2/issues/36800)

<!-- AC-1342 -->

*  Using the `rest/V1/orders/{id}/comments` endpoint to post a comment about an order without providing order status no longer affects the display of the order. Previously, order status was logged as NULL in the `sales_order` and `sales_order_grid` tables, and neither the My Orders page or the Admin order grid displayed the order. [GitHub-34180](https://github.com/magento/magento2/issues/34180)

<!-- ACP2E-1597 -->

*  Invoices, shipments, and credit memos can now be successfully moved back from the archive together with their associated orders when the IDs they include differ from order IDs. Previously, if an order were moved to the archive and then restored, then invoice, shipping, credit memo records are missing from that order if the ID numbers did not match. [GitHub-36847](https://github.com/magento/magento2/issues/36847)

### Page Builder

<!-- ACP2E-1564 -->

*  Adding a product to a shopping cart from the Page Builder carousel no longer duplicates item quantity from pages with two different widgets displaying the same products.

<!-- ACP2E-1542 -->

*  Page Builder no longer adds the `tabindex` HTML attribute to hyperlink tags `a` when you edit a hyperlink then save a template. 

<!-- ACP2E-1444 -->

*  The products widget and Page Builder preview now handle HTML special characters properly. Previously, the product widget did not correctly display SKUs that contained the `&` character. 

<!-- ACP2E-1441 -->

*  Page Builder text element content is now updated as expected when you select and update the complete content block in preview mode.

<!-- ACP2E-1362 -->

*  Copying and pasting text from one Page Builder text editor to another now works as expected. Previously, the page into which you tried to paste text could not saved, and Adobe Commerce displayed this console error: `[ERROR] Page Builder was rendering for 5 seconds without releasing locks.`.

<!-- ACP2E-1568 -->

*  Page Builder `column-block` content type that was created in older versions of Page Builder is now displayed correctly.

<!-- ACP2E-1234 -->

*  Filtering for the product meta data description during product creation from the Admin has been improved. Previously, if Page Builder were enabled, the product meta data description was generated based on the default` {{name}} {{description}}` mask. The default product meta description mask is now composed of `{{name}}`. [GitHub-36107](https://github.com/magento/magento2/issues/36107)

<!-- ACP2E-1758 -->

*  Adding a dynamic block with no content no longer triggers an error. 

<!-- AC-6645 -->

*  Issues with the display of columns in Page Builder content have been resolved. Previously, `column-line` content type content was not rendered. [GitHub-3949](https://github.com/magento/pwa-studio/issues/3949)

### Payment

<!-- ACP2E-1215 -->

*  The Vault payment method option no longer appears in the Admin checkout workflow when the shopper does not have a vault token. [GitHub-36273](https://github.com/magento/magento2/issues/36273)

<!-- ACP2E-1303 -->

*  The **[!UICONTROL Venmo]** button now can be hidden when the PayPal buttons are enabled. Previously, the **[!UICONTROL Venmo]** button could not be removed from the cart, mini cart, product detail, or the checkout pages.

<!-- AC-7105 -->

*  Shoppers are now redirected to the success page after successfully completing a Paypal Payflow link payment. [GitHub-36520](https://github.com/magento/magento2/issues/36520)

#### Braintree


<!-- ACP2E-1229 -->

*  The Braintree Vault payment method option is no longer automatically deselected in the checkout workflow when a shopper updates their billing address. Previously, the payment method was deselected when the shopper deselected the **[!UICONTROL My billing and shipping address are the same]** button.


<!-- BUNDLE-3248 -->

*  Resolved issues with checking out with PayPal through Braintree after upgrading from Adobe Commerce 2.4.5-p2. [GitHub-37242](https://github.com/magento/magento2/issues/37242)

<!-- BUNDLE-3257 -->

*  Phone numbers are now rendered as expected with addresses in the Google Pay modal popup shipping address fields. Previously, phone numbers were missing. 

<!-- BUNDLE-3228 -->

*  Orders are now placed successfully with Braintree when the Braintree response includes an empty value for `threeDSecureInfo/eciFlag`. Previously, a PHP error occurred during checkout when this value was empty. 

<!-- BUNDLE-3243 -->

*  Adobe Commerce no longer throws an error when a shopper applies a coupon on the order review page when checking out with Google Pay from the mini cart. Previously, shoppers were redirected to a 404 page. 

<!-- BUNDLE-3245 -->

*  Shoppers can now complete checkout using Braintree Payments and Adobe Commerce 2.4.6 with invisible ReCAPTCHA v2 or v3. [GitHub-37241](https://github.com/magento/magento2/issues/37241)

<!-- BUNDLE-3241 -->

*  Shoppers can no longer click the **[!UICONTROL PayPal]** button to purchase a configurable product without first selecting required options. Previously, shoppers could click the **[!UICONTROL PayPal]** button and were subsequently redirected back to the product page with an error: 

<!-- BUNDLE-3148 -->

*  The **[!UICONTROL PayPal]** button is now displayed as expected on the cart and mini cart pages. Previously, this button was not displayed on the cart page and duplicated on the mini cart page.

<!-- BUNDLE-3244 -->

*  Partially invoiced orders are now captured as expected in the correct account in deployments where merchants have two different merchant account IDs for the same currency in their Braintree account.

<!-- BUNDLE-3250 -->

*  Adobe Commerce no longer throws an error when creating a second partial invoice for an order paid for by Braintree when the **[!UICONTROL Enable Vault for Card Payments]** is enabled. Previously, when a merchant tried to create a second invoice, Adobe Commerce threw this error: `Your payment could not be taken. Please try again or use a different payment method. Payment method token is invalid`.

### Promotion

<!-- ACP2E-1290 -->

*  The effects of the **[!UICONTROL Fixed amount discount for whole cart]** price rule, when applied with the **[!UICONTROL Apply to shipping amount]** rule, is now proportionally distributed as expected between products and shipping amounts. Previously, discount calculations were incorrect. 

<!-- ACP2E-1300 -->

*  The **[!UICONTROL Discard Subsequent Rules]** setting is now applied as expected. When this setting is enabled, other rules with low priority can be applied to a different product only. It is not applied to a product to the selected product. [GitHub-35707](https://github.com/magento/magento2/issues/35707)

### Reports

<!-- ACP2E-1541 -->

*  The Orders report (**[!UICONTROL REPORTS]** > **[!UICONTROL Sales]** > **[!UICONTROL Orders]**) now includes correct order values when orders are generated by stores that use non-default currencies. Previously, this report included incorrect values. [GitHub-36742](https://github.com/magento/magento2/issues/36742)

<!-- ACP2E-1477 -->

*  Misleading information in the sales order report form has been revised for clarity. 

<!-- ACP2E-1435 -->

*  Admin users can now search for records with emails that contain  `+` (plus) signs from the Abandoned Carts Report page. [GitHub-36560](https://github.com/magento/magento2/issues/36560)

<!-- AC-7394 -->

*  GraphQL transactions names are now displayed properly after New Relic is disabled from the Commerce Admin. [GitHub-36112](https://github.com/magento/magento2/issues/36112)

### Rewards

<!-- ACP2E-1473 -->

*  The reward points balance update email notification now takes into account the current store context. Previously, the reward points balance update email used configuration settings for the default store.

<!-- ACP2E-1329 -->

*  Reward points can now be refunded after the creation of a credit memo. Previously, merchants could not refund rewards points after creating a credit memo, and order status remained `Completed`, not `Closed`. 

### RMA

<!-- ACP2E-1230 -->

*  The **[!UICONTROL Enable RMA]** attribute at the individual product level now respects the store RMA settings configuration. Previously, this setting was toggled off by default when you added a product, no matter what the store configuration settings were.

### Search {#search-heading}

<!-- ACP2E-1499 -->

*  Search results now display relevant results based on search weight of the attributes as expected.

<!-- AC-7505 -->

*  Informative text under the `Search Weight` attribute's `Storefront Properties` input field on Admin **[!UICONTROL Stores]** > **[!UICONTROL Attributes]** > **[!UICONTROL Product]** now describes possible values. [GitHub-36646](https://github.com/magento/magento2/issues/36675)


### Shipping

<!-- AC-7003 -->

*  The **[!UICONTROL Shipping Policy]** text box is now visible in the Admin Store View scope when  **[!UICONTROL Apply custom Shipping Policy]** is enabled and a custom shipping policy is available. [GitHub-36425](https://github.com/magento/magento2/issues/36425)

<!-- AC-7550 -->

*  The `cart` query now returns a `selected_shipping_method` value that matches one of the `available_shipping_methods` carrier and method codes. Previously, when one of the selected shipping methods contained an underscore, these carrier/method codes were mismatched. [GitHub-36606](https://github.com/magento/magento2/issues/36606)

<!-- AC-2556 -->

*  The `setShippingAddressesOnCart` mutation no longer throws an error when the second value in the street array is null. Previously, this exception was thrown: `The address failed to save. Verify the address and try again`. [GitHub-35160](https://github.com/magento/magento2/issues/35160)

### Staging

<!-- ACP2E-1501 -->

*  JavaScript errors no longer occur when you add or edit scheduled updates for categories when Google Analytics Content Experiments is enabled. 

<!-- ACP2E-1344 -->

*  Merchants can now successfully save an existing schedule update for a category after viewing or editing it. Previously, Adobe Commerce threw an error in `system.log`.

<!-- ACP2E-1596 -->

*  Downloadable links are now preserved as expected when a scheduled update is applied while previously added products are in the cart. Previously, downloadable links disappeared from the the customer's My Account (My Downloadable Products) page and the Admin order view page.

<!-- ACP2E-1458 -->

*  Products are now visible on the storefront as expected after a staging update that enables the product is applied. Previously, the product was enabled in the Admin but was not visible in the storefront category when the indexer mode of the catalog inventory was set to Update on Schedule. A full re-index fixed the issue.

<!-- ACP2E-1647 -->

*  The `staging.synchronize_entity_period` consumer queue in the `magento_bulk` table no longer increases when there are no staging updates to process. Previously, when `cron` was configured to run every minute, a new record related to the `staging.synchronize_entity_period` consumer was added to this table every minute.

<!-- ACP2E-1415 -->

*  Adobe Commerce no longer throws an SQL error when you create a schedule change for a product while saving another product.  Previously, Adobe Commerce displayed this error:  `The product with the SKU "%1" couldn't be added to the current update`. 

<!-- ACP2E-8256 -->

*  Adobe Commerce no longer throws an error when updating a category's scheduled changes for a specific store view. Previously, Adobe Commerce logged this error in `system.log`: `[2023-03-14T20:52:30.453553+00:00] report.CRITICAL: Exception message: Warning: Undefined array key "updated_in" in /app/vendor/magento/module-staging/Model/Operation/Update.php on line 174`. [GitHub-37210](https://github.com/magento/magento2/issues/37210)

### Target rules

<!-- ACP2E-1438 -->

*  Target rules now work correctly with different store views. Previously, issues with the related products rule cache prevented the display of recommended products in multi-store deployments.

### Tax

<!-- ACP2E-1527 -->

*  You can now edit the value of Tax Rate Country and Region from the Tax Rule edit page as expected. Previously, edits made from that page were not saved.

<!-- ACP2E-1143 -->

*  The tax amount in the cart estimation area is now refreshed as expected when the shipping method is updated and no shipping method is selected. Previously, the tax rate was not updated after a shopper changed country during check out.

<!-- AC-8227 -->

*  The `tax class` value for newly created simple products is now set to the parent product's value when creating new variations of an existing configurable product in Store View scope. Previously, this value was set to none. As a result, no tax was added to these products in the cart, and customers were undercharged tax. [GitHub-37180](https://github.com/magento/magento2/issues/37180)

### Test

<!-- AC-7098 -->

*  Performance issues with large arrays in `TableNameSniff` have been resolved. 

<!-- AC-1690 -->

*  Integration tests for the edit gift registry functionality no longer rely on existing entity IDs. All required data is now obtained through fixtures. Previously, `\Magento\GiftRegistry\Controller\Index\EditPostTest` failed. 

<!-- ACP2E-1748 -->

*  `CollectionTest::testGetDateRangeFirstPart()` now accounts for Daylight Savings time.

<!-- AC-8344 -->

*  Reverted a fix included in Adobe Commerce 2.4.6 that resulted in problems running unit tests for this release. [GitHub-37289](https://github.com/magento/magento2/issues/37289)

<!-- AC-8018 -->

*  Running `vendor/bin/phpunit -c dev/tests/unit/phpunit.xml.dist` no longer results in multiple test failures. [GitHub-34733](https://github.com/magento/magento2/issues/34733)


### UI

<!-- ACP2E-171 -->

*  The customer registration form now loads as expected when it includes multi-select customer attributes. Previously, Adobe Commerce threw this exception: `[2023-03-05T05:57:40.032602+00:00] report.CRITICAL: Exception: Deprecated Functionality: explode(): Passing null to parameter #2 ($string) of type string is deprecated in /magento2ee/app/code/Magento/CustomAttributeManagement/Block/Form/Renderer/Multiselect.php on line 53 in /lib/internal/Magento/Framework/App/ErrorHandler.php:62`. [GitHub-37189](https://github.com/magento/magento2/issues/37189)

<!-- ACP2E-1602 -->

*  Welcome messages containing single quotation marks are now rendered correctly on the storefront with no console errors. Previously, if a welcome message contained a single quotation mark, then the welcome message was not loaded during storefront rendering. Adobe Commerce also displayed console errors.

<!-- ACP2E-1369 -->

*  Adobe Commerce no longer throws an error when you try to quickly change the view between comment history and Returns in the Admin order page. Previously, Adobe Commerce displayed this generic error: `A technical problem with the server created an error`.

<!-- ACP2E-1374 -->

*  Admin users with privileges restricted to one website can now update website-specific product attributes set to an `all stores view` scope.

<!-- ACP2E-1648 -->

*  The magnifier widget now loads as expected on the product page.

<!-- ACP2E-1216 -->

*  Multi-line customizable options are now rendered properly in invoice, shipment, and credit memo PDF documents. Previously, multi-line text was preceded by an unexpected page break, and if the text exceeded the page, text was truncated.

<!-- AC-7402 -->

*  Admin users can now add a new customer address from the Admin when that customer has been created for another website whose store ID does not match the website ID. Previously, Adobe Commerce displayed this pop-up message: `Something went wrong`. [GitHub-36582](https://github.com/magento/magento2/issues/36582)

<!-- ACP2E-1529 -->

*  Company Admin details are now saved as expected, and admins are correctly redirected, when Assign Company Admin emails contain a `CMS Block URL` variable.

<!-- ACP2E-1775 -->

*  Error messages associated with submitting comments on the order details page are now more informative. Previously, when a shopper clicked **[!UICONTROL Submit comment]** without either changing order status or entering text into the comment area, Adobe Commerce displayed this message: `The comment is missing. Enter and try again`.

<!-- ACP2E-1659 -->

*  The calendar icon is now displayed as expected in the date range fields on Admin **[!UICONTROL Marketing]** > **[!UICONTROL Cart Price Rules]** after a date is selected for one field. Previously, after you selected a date for one field, the calendar icon was no longer displayed on other fields, and Adobe Commerce displayed placeholder text. [GitHub-36499](https://github.com/magento/magento2/issues/36499)

<!-- ACP2E-1717 -->

*  Customer registration forms that include multi-select fields now load successfully. Previously, this form did not load when it contained multi-select fields, and the following error was triggered:  `report.CRITICAL: Exception: Deprecated Functionality: explode(): Passing null to parameter #2 ($string) of type string is deprecated in /magento2ee/app/code/Magento/CustomAttributeManagement/Block/Form/Renderer/Multiselect.php on line 53 in /lib/internal/Magento/Framework/App/ErrorHandler.php:62`. [GitHub-37189](https://github.com/magento/magento2/issues/37189)

<!-- AC-7092 -->

*  Clicking on a video thumbnail in the product gallery full screen mode now displays the video as expected. Previously, the video was not displayed, and the browser console displayed a JavaScript error. [GitHub-36456](https://github.com/magento/magento2/issues/36456)

<!-- AC-7806 -->

*  Added a variable to the copyright line that is automatically updated each year. [GitHub-36776](https://github.com/magento/magento2/issues/36776)

<!-- AC-8441 -->

*  The image slider on the product page now works as expected in mobile view. Previously, only the first image was successfully displayed. [GitHub-37232](https://github.com/magento/magento2/issues/37232)

### URL rewrites

<!-- ACP2E-1737 -->

*  Category URL rewrites are now generated for all store views when a new category is imported from a CSV file.

<!-- ACP2E-1700 -->

*  Product URL suffix and Category URL suffix configurations now match the suffixes in the `url_rewrite` table. Previously, race conditions when updating URL suffix configurations occurred, and and the configured URL suffixes and the `url_rewrite` table did not match.

<!-- ACP2E-1703 -->

*  Adobe Commerce now renders the category tree at all levels when creating category URL rewrites. Previously, only the first three levels of categories were displayed. [GitHub-36973](https://github.com/magento/magento2/issues/36973)

<!-- ACP2E-1644 -->

*  Newly created CMS pages with one child node are now included in the marketing filter grid (**[!UICONTROL Marketing]** > **[!UICONTROL URL rewrites]**). Previously, URL rewrites were not created for those CMS pages.

<!-- ACP2E-1737 -->

*  Category URL rewrites are now present in the CSV file during import of a new category.

<!-- ACP2E-1668 -->

*  Multi-store CMS pages without URL rewrites are now forwarded as expected. Previously, requested multi-store CMS pages without URL rewrites were redirected to the store home page, but the  original CMS pages were not directed.

### Visual Merchandiser

<!-- ACP2E-1363 -->

*  You can now use the `Categories` attribute for Visual Merchandiser rules. Previously, Adobe Commerce threw this exception:  `Something went wrong while saving the category`.  

### Web API framework

<!-- ACP2E-1543 -->

*  Customers created using the Bulk API now receive customer registration emails in the language that is configured in their assigned website.  Previously, all emails were sent to the default locale, not the locale of the website to which the customer is assigned.

<!-- ACP2E-1339 AC-7577-->

*  The `POST V1/guest-carts` call no longer submits guest orders when **[!UICONTROL Allow Guest Checkout]** is disabled.

<!-- ACP2E-1336 -->

*  You can now open an order from the Admin with the status `Received` when `AsyncOrder` is not enabled. Previously, you could not open the order detail page from the Admin when the order status was changed by `POST V1/orders`.

<!-- ACP2E-1526 -->

*  Adobe Commerce now successfully returns the `content` attribute (base64 image code) in `GET V1/products/sku/media` product media API responses. The `content` attribute did not previously appear in the response.

## System requirements

Our technology stack is built on PHP and MySQL. For more information, see [System Requirements](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/system-requirements.html).

## Installation and upgrade instructions

You can install Adobe Commerce 2.4.7-beta1 using [Composer](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/composer.html).
