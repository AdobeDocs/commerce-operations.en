---
title: Adobe Commerce 2.4.7 release notes
description: Learn about new features, enhancements, bug fixes, and known issues in the 2.4.7 Adobe Commerce release.
exl-id: 6ceb1d6d-5076-49a1-925f-913aa3598c90
---

# Adobe Commerce 2.4.7 release notes

Adobe Commerce 2.4.7 introduces support for PHP 8.3. It introduces hundreds of quality fixes and enhancements. Core Composer dependencies and third-party libraries have been upgraded to the latest available versions. This release includes significant performance improvements, including faster loading of product listing pages for complex products with many options and enhancements for indexer management. This release increases GraphQL coverage for custom attributes and GraphQL resolver caches. It also introduces support for recently updated FedEx and UPS services.

{{bics}}

## Other release information

Although code for these features is bundled with releases of the Adobe Commerce core code, several of these projects (for example, B2B and Progressive Web Applications (PWA) Studio) are also released independently. Bug fixes for these projects are documented in the separate, project-specific release information that is available in the documentation for each project.

## Adobe Commerce 2.4.7 highlights

Look for the following highlights in this release.

### Security enhancements

This release includes the same security fixes and platform security improvements that are included in Adobe Commerce 2.4.6-p5, 2.4.5-p7, and 2.4.4-p8. See [Adobe Security Bulletin](https://helpx.adobe.com/security/products/magento/apsb24-18.html) for the latest discussion of these fixed issues.

No confirmed attacks related to these issues have occurred to date. However, certain vulnerabilities can potentially be exploited to access customer information or take over administrator sessions. Most of these issues require that an attacker first obtains access to the Admin. As a result, we remind you to take all necessary steps to protect your Admin, including but not limited to these efforts:

* IP allowlisting
* [Two-factor authentication](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/)
* Use of a VPN
* Use of a unique location rather than `/admin`
* Good password hygiene

#### Additional security enhancements

Security improvements for this release improve compliance with the latest security best practices.

* **Changes to the behavior of non-generated cache keys**:

  * Non-generated cache keys for blocks now include prefixes that differ from prefixes for keys that are generated automatically. (Non-generated cache keys are keys that are set through template directive syntax or the `setCacheKey` or `setData` methods.) 
  * Non-generated cache keys for blocks now must contain only letters, digits, hyphens (-), and underscore characters (_).  <!-- AC-9831 -->

* **Limitations on the number of auto-generated coupon codes**. Commerce now limits the number of coupon codes that are automatically generated. The default maximum is 250,000. Merchants can use the new **[!UICONTROL Code Quantity Limit]** configuration option (**[!UICONTROL Stores]** > **[!UICONTROL Settings:Configuration]** > **[!UICONTROL Customers]** > **[!UICONTROL Promotions]**) to prevent potentially overwhelming the system with many coupons. <!-- AC-8753 -->

* **Optimization of the default Admin URL generation process**. The generation of the default Admin URL has been optimized for increased randomness, which makes generated URLs less predictable. <!-- AC-9028 -->

* **Added Subresource Integrity (SRI) support** to comply with PCI 4.0 requirements for verification of script integrity on payment pages. Subresource Integrity (SRI) support provides integrity hashes for all JavaScript assets residing in the local filesystem. The default SRI feature is implemented only on the payment pages for the Admin and storefront areas. However, merchants can extend the default configuration to other pages. See [Subresource Integrity](https://developer.adobe.com/commerce/php/development/security/subresource-integrity/) in the _Commerce PHP Developer Guide_.<!--AC-1153-->

* **Changes to Content Security Policy (CSP)**—Configuration updates and enhancements to Adobe Commerce Content Security Policies (CSPs) to comply with PCI 4.0 requirements. For details, see [Content Security Policies](https://developer.adobe.com/commerce/php/development/security/content-security-policies/) in the _Commerce PHP Developer Guide_. <!--AC-11513-->

  * The default CSP configuration for payment pages for Commerce Admin and storefront areas is now `restrict` mode. For all other pages, the default configuration is `report-only` mode.  In releases prior to 2.4.7,  CSP was configured in `report-only` mode for all pages.

  * Added a nonce provider to allow execution of inline scripts in a CSP. The nonce provider facilitates the generation of unique nonce strings for each request. The strings are then attached to the CSP header.

  * Added options to configure custom URIs to report CSP violations for the Create Order page in the Admin and the Checkout page in the storefront. You can add the configuration from the Admin or by adding the URI to the `config.xml` file.

    >[!NOTE]
    >
    >Updating the CSP configuration to `restrict` mode might block existing inline scripts on payment pages in the Admin and storefront, which causes the following browser error when a page loads: `Refused to execute inline script because it violates the following Content Security Policy directive: "script-src`. Fix these errors by updating the whitelist configuration to allow required scripts. See [Troubleshooting](https://developer.adobe.com/commerce/php/development/security/content-security-policies/#troubleshooting) in the _Commerce PHP Developer Guide_.

* A new full-page cache configuration setting can help to mitigate the risks associated with the HTTP `{BASE-URL}/page_cache/block/esi` endpoint. This endpoint supports unrestricted, dynamically loaded content fragments from Commerce layout handles and block structures. The new **[!UICONTROL Handles params size]** configuration setting sets the value of this endpoint's `handles` parameter, which determines the maximum allowed number of handles per API. The default value of this property is 100. Merchants can change this value from the Admin (**[!UICONTROL Stores]** > **[!UICONTROL Settings:Configuration]** > **[!UICONTROL System]** > **[!UICONTROL Full Page Cache]** > **[!UICONTROL Handles params size]**). See [Configure the Commerce application to use Varnish](https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/cache/configure-varnish-commerce.html). <!-- AC-9113 -->

* **Native rate limiting for payment information transmitted through REST and GraphQL APIs**. Merchants can now [configure rate limiting](https://experienceleague.adobe.com/en/docs/commerce-admin/config/sales/sales#rate-limiting) for the payment information transmitted using REST and GraphQL. This added layer of protection supports prevention of carding attacks and potentially decreases the volume of carding attacks that test many credit card numbers at once. This is a change in the default behavior of an existing REST endpoint. See [Rate limiting](https://developer.adobe.com/commerce/webapi/get-started/rate-limiting/).

* The default behavior of the [isEmailAvailable](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/queries/is-email-available/) GraphQL query and the ([V1/customers/isEmailAvailable](https://adobe-commerce.redoc.ly/2.4.7-admin/tag/customersisEmailAvailable/#operation/PostV1CustomersIsEmailAvailable)) REST endpoint has changed. By default, the APIs now always return `true`. Merchants can enable the original behavior by setting the *[Enable Guest Checkout Login](https://experienceleague.adobe.com/en/docs/commerce-admin/config/sales/checkout)* option in the Admin to `yes`, but doing so can expose customer information to unauthenticated users.

### Platform enhancements

Platform upgrades for this release improve compliance with the latest security best practices. 

Adobe Commerce 2.4.7 includes the following platform upgrades:

* **PHP 8.3 compatibility**. This release introduces support for PHP 8.3. Commerce now supports both PHP 8.3 and 8.2. PHP 8.2 will be supported until its End of Service (EOS) date in December 2025. After December 2025, all merchants running 2.4.7 deployments should migrate to PHP 8.3. <!-- AC-8988 -->

Adobe Commerce 2.4.7 is still compatible with PHP 8.1 for upgrade purposes only. PHP 8.1 is not supported and not recommended. Adobe Commerce 2.4.7 core code, all bundled extensions, and all Adobe-owned extensions and SaaS services are compatible with PHP 8.3. <!-- AC-9668 -->

* **RabbitMQ 3.13 support**. This release is compatible with the latest version of RabbitMQ 3.13. Compatibility remains with RabbitMQ 3.11 and 3.12, which is supported through August 2024 and December 2024 respectively, but Adobe recommended using Adobe Commerce 2.4.7 only with RabbitMQ 3.13. <!-- AC-9659 --> 

* **Composer 2.7.x**. Compatibility with Composer 2.2.x remains. <!-- AC-9663 -->

* **Varnish cache 7.4 support**. This release is compatible with the latest version of Varnish Cache 7.4. Compatibility remains with the 6.0.x and 7.2.x versions, but we recommended using Adobe Commerce 2.4.7 only with Varnish Cache version 7.4 or version 6.0 LTS. <!-- AC-9662 -->

* **Elasticsearch 8.11** compatibility <!-- AC-9661 -->

* Opensearch 2.12 and OpenSearch 1.3 support <!-- AC-9659 -->

* **Redis 7.2** <!-- AC-10811 -->

* The `extjs` library has been replaced with the latest version of `jsTree`. <!-- AC-9320 --> 

* `jquery/fileUpload` library has been removed. <!-- AC-10569 -->

All JavaScript libraries and NPM dependencies in Adobe Commerce core code have been updated to the latest available versions. All Laminas library dependencies have been updated to the latest version that are compatible with PHP 8.3. <!-- AC-9667 9665 -->

#### Additional upgrades

* **Multiple coupons per order support**. Merchants can now [configure the maximum number of coupons](https://experienceleague.adobe.com/en/docs/commerce-admin/config/sales/sales#multicoupon-settings) that can be applied per order with the new **[!UICONTROL Maximum number of coupons per order]** configuration option. This value is set to 1 by default. You can now use [REST](https://developer.adobe.com/commerce/webapi/rest/modules/multicoupon/) or [GraphQL](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/apply-coupons/) to apply multiple coupons to a cart. 

* The Commerce UPS XML API gateway has been migrated to the new [Commerce UPS REST API](https://experienceleague.adobe.com/en/docs/commerce-admin/stores-sales/delivery/shipping-carriers/ups) to support updates that UPS is making to their [API security model](https://developer.ups.com/oauth-developer-guide). (UPS is implementing an OAuth 2.0 security model (bearer tokens) for all APIs.) All previous Commerce UPS XML APIs have been removed from the Adobe Commerce 2.4.7 code base. <!-- AC-8918 -->

* Adobe Commerce [integration](https://experienceleague.adobe.com/en/docs/commerce-admin/stores-sales/delivery/shipping-carriers/fedex) with FedEx has been migrated from legacy FedEx WSDL Web Services to the latest FedEx RESTful APIs. FedEx Web Services Tracking, Address Validation, and Validate Postal Codes WSDLS will be retired in May 2024. <!-- AC-1470 -->

* Added support for the new USPS Ground Advantage shipping method. This is an out-of-box integration with USPS's new shipping method, USPS Ground Advantage, which was released July 2023. This new integration can be used to retrieve shipping rates and schedule deliveries and returns through the USPS shipping service. The USPS Ground Advantage shipping method replaces these shipping methods, which were retired when the USPS Ground Advantage shipping method was released:

  * USPS Retail Ground
  * First-Class Package Service
  * Parcel Select Ground <!-- AC-9182 -->

* Temando shipping modules have been removed from the core Commerce code base. This feature was deprecated in Adobe Commerce 2.4.4. <!-- AC-8130 -->

### Performance and scalability enhancements

Commerce 2.4.7 includes the following enhancements to Commerce performance and scalability:

* Enterprise merchants can now configure up to **one million active, coupon-based cart price rules** in Adobe Commerce with no significant performance degradations of cart and checkout operations. <!-- ACPT-1198 -->

* **Enhanced indexer management**. The new `indexer:set-status` command supports the dynamic management of indexer status. Admin users can use this command to change indexer status to `suspended`, `invalid`, or `valid`. This feature is particularly useful for managing system performance during extensive bulk operations, such as product imports or updates, by allowing control over when indexers are automatically triggered by the system's cron jobs. See [Manage the indexers](https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/cli/manage-indexers.html). 

* **Product listing page for complex products with many options**. Load time has improved for product listing pages that include complex products with over 100 options. The performance of GraphQL requests to list products by category has also improved. <!-- ACPT-1683 -->

* **JSON format now supported for the REST [Import API](https://developer.adobe.com/commerce/webapi/rest/modules/import/)**. Merchants can now import up to 100,000 records per minute into Adobe Commerce in JSON format. <!-- ACPT-943 -->

* **Sales rule performance improvements**. Improved performance of enterprise deployments with many (approximately 100,000) active sales rules. Enterprise deployments that heavily implement promotions often deploy many active cart rules. These types of enterprise deployments running Commerce 2.4.7 will not see any performance degradation related to the number of configured cart price rules during checkout operations. <!-- ACPT-1198 -->

* **Faster save operations of store-level configurations for deployments with many stores**. Saving configuration settings in deployments with more than 500 stores can be time-consuming. The new [Async Config](../../../performance/configuration.md#asynchronous-configuration-save) module enables asynchronous configuration save operations by running a cron job that uses a consumer to process the save operation in a message queue. AsyncConfig is disabled by default.

* **Faster generation of the config cache for large configurations**. The `bin/magento cache:clean config` command now pre-warms the config cache when the config cache is enabled. This reduces the downtime required to generate the config cache for large configurations. Configuration save operations no longer clean the `config_scopes` cache before writing data to the cache, which also reduces the time that other requests are locked out while config data is being written.

### GraphQL Application Server

[GraphQL Application Server](../../../performance/application-server.md) enables Adobe Commerce to maintain state among Commerce GraphQL API requests and eliminates the need for bootstrapping, which results in higher throughput, lower latency, and efficient resource use for all GraphQL APIs. By sharing application state among processes, GraphQL API requests become significantly more efficient, and GraphQL API responses are on average 30% faster.<!-- ACPT-27 -->

GraphQL Application Server is available for Adobe Commerce only. It is not available for Magento Open Source. You must [submit an Adobe Commerce Support](https://experienceleague.adobe.com/en/docs/commerce-knowledge-base/kb/help-center-guide/magento-help-center-user-guide) ticket to enable GraphQL Application Server on Pro projects.

>[!NOTE]
>
>GraphQL Application Server is currently not compatible with [[!DNL Amazon Simple Storage Service (AWS S3)]](https://aws.amazon.com/s3/). Adobe Commerce on cloud infrastructure customers currently using [!DNL AWS S3] for [remote storage](../../../configuration/remote-storage/cloud-support.md) cannot use GraphQL Application Server.<!-- ACPT-1840 -->

### Adobe Commerce Extension metapackage

This release introduces the Adobe Commerce Extension metapackage v2.0.0, which automatically bundles select Adobe Commerce extensions with this core release. The versions of these extensions that are included in this metapackage are installed when `composer update` is run, simplifying the process of upgrading these extensions when upgrading to the latest core release. These extensions maintain independent release schedules.

The Adobe Commerce Extension metapackage for Adobe Commerce 2.4.7 includes these extensions:

* [Adobe Commerce Admin UI SDK](https://developer.adobe.com/commerce/extensibility/admin-ui-sdk/)
* [Adobe Commerce integration with Adobe IMS](https://experienceleague.adobe.com/docs/commerce-admin/start/admin/ims/adobe-ims-integration-overview.html) 
* [Adobe I/O Events for Adobe Commerce](https://developer.adobe.com/commerce/extensibility/events/)
* [Adobe Stock](https://experienceleague.adobe.com/en/docs/commerce-admin/content-design/wysiwyg/adobe-stock/adobe-stock)
* [Braintree](https://experienceleague.adobe.com/docs/commerce-admin/stores-sales/payments/braintree.html)
* [Payment Services](https://experienceleague.adobe.com/docs/commerce/payment-services/guide-overview.html)

Future versions of this extension metapackage may contain additional extensions.

### Adobe Commerce webhooks

Commerce webhooks (v1.2.0 ) enable developers to configure synchronous logic to execute calls to external systems when an Adobe Commerce event triggers. Synchronous calls are required when Commerce must immediately compute or validate a value such as an order total, tax, or payment using a third-party endpoint and subsequently write the result back into Adobe Commerce. 

Commerce webhooks is now installed by default. See [Adobe Commerce Webhooks Overview](https://developer.adobe.com/commerce/extensibility/webhooks/)

### Adobe Stock

The Adobe Stock package (`adobe-stock-integration`) is now packaged in the Commerce extensions meta package (`extensions-metapackage`) to support more frequent updates. <!-- CABPI-630 -->

### B2B

>[!NOTE]
>
>The 2.4.7 release is compatible with B2B 1.4.2. However, Adobe recommends that customers wait for the upcoming B2B 1.5.0 GA release before upgrading, which includes support for PHP 8.3. See [B2B release notes](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).

### Braintree

* **[!DNL Vaulted PayPal] and [!DNL Pay Later] Changes**—Logged-in customers who have previously vaulted/stored their PayPal account have the option to pay with:
  * [!DNL Pay Now] (without having to log into their [!DNL PayPal] account, the user can pay with their default card)
  * Pay with a different funding source
  * Pay with a different account
  * [!DNL PayPal Pay Later] or [!DNL PayPal Credit] button

* **3DS support for [!DNL Google Pay]**—Included 3DS verification support for the [!DNL Google Pay] non-tokenized cards. See the [Braintree documentation](https://developer.paypal.com/braintree/docs/guides/3d-secure/client-side/android/v3#using-3d-secure-with-google-pay) for more information.

* **[!DNL Vault Apple Pay Payments]**—Allow logged-in customers to vault/store their [!DNL Apple Pay] payments to their Commerce store account to use on future transactions. This reduces the number of steps on checkout and creates a faster checkout experience for the returning customer.

* **[!DNL Vault Google Pay Payments]**—Allow logged-in customers to vault/store their [!DNL Google Pay] payments to their Commerce store account to use on future transactions. This reduces the number of steps on checkout and creates a faster checkout experience for the returning customer.

* **[!DNL Vault Venmo Payments]**—Allow logged-in customers to vault/store their [!DNL Venmo] accounts to their Commerce store account to use on future transactions. This reduces the number of steps on checkout and creates a faster checkout experience for the returning customer.

* **[!DNL Vault ACH Payments]**—Allow logged-in customers to vault/store their ACH payments to their Commerce store account to use on future transactions. This reduces the number of steps on checkout and creates a faster checkout experience for the returning customer.

* **[!UICONTROL Express Payment] buttons at the top of checkout**—To encourage a faster checkout experience, we've introduced [!DNL Express Payment] options at the beginning of the checkout. Customers can now pay by [!DNL PayPal], [!DNL PayPal Pay Later], [!DNL Apple Pay], and [!DNL Google Pay Express] payments.

* **[!DNL Braintree] release notes and Support links within the Admin Configuration**—Merchants can now directly link from the Commerce Admin to Braintree support and release notes online.

* **GraphQL support for all [!DNL Braintree] payment methods except [!DNL Venmo]**—More configurations are exposed in the GraphQL API. This is particularly useful for headless applications.

* **[!DNL Vaulting] payments in account area**—Logged-in customers can now [vault/store](https://experienceleague.adobe.com/en/docs/commerce-admin/stores-sales/payments/braintree#step-3-complete-the-advanced-settings) new credit/debit cards and [!DNL PayPal] accounts in the Customer account area. Previously, customers could only vault/store when saving their payments for later use when completing a transaction on the checkout, now they can vault new credit/debit cards and PayPal accounts without needing to create a new transaction.

* **Frictionless Transactions**—Frictionless transactions accelerate the payment process by reducing the amount of customer clicks/steps to complete an online credit/debit card transaction. Previously (when 3DS was enabled), every customer was 3DS challenged. With the new Frictionless Transactions feature, customers are only challenged for 3DS when the bank requests it. This reduces cart abandonment, increases conversion rates, and leads to more sales.

* **Dispute webhooks**—When a customer disputes a transaction in Braintree, the dispute status is now passed on to Commerce. It is searchable in the **[!UICONTROL Sales]** > **[!UICONTROL Order]** grid and attached to each order.

### Commerce integration with Adobe IMS

The Adobe IMS integration package (`adobe-commerce/adobe-ims-metapackage`) is now packaged in the Commerce extensions meta package (`extensions-metapackage`) to support more frequent updates. <!-- CABPI-630 -->

### GraphQL

Commerce 2.4.7 includes enhanced GraphQL caching abilities, support to the GraphQL schema for custom attributes, support for headless order cancellation, and improved resolver caching.

* **More flexible cart management**. The `clearCart` mutation now clears the contents of a specified shopping cart in a single action. It replaces the `clearCustomerCart` mutation, which has been deprecated. <!-- LYNX-254 -->

* **Improvements in create cart mutations**. The `createGuestCart` mutation has been added to replace the deprecated `createEmptyCart` mutation. Previously, if you used `createEmptyCart`, you could not determine whether the cart was for a guest or logged-in customer. <!-- LYNX-224 -->

* **Order items now include product images**. `OrderItemInterface` exposes product images, which permits images to be associated with ordered products and load more efficiently.  [GitHub-32369](https://github.com/magento/magento2/issues/32369) <!-- AC-7918 -->

* **Expanded support for resolver caching**. The following GraphQL query resolvers are now cacheable in the GraphQL Resolver Results cache, which improves performance when queries are submitted with POST requests:

  * `Magento\CustomerGraphQl\Model\Resolver\Customer::resolve`
  * `Magento\CustomerGraphQl\Model\Resolver\CustomerAddress::resolve`
  * `Magento\CustomerGraphQl\Model\Resolver\IsSubscribed::resolve` <!-- B2B-2658 -->
  * `Magento\CatalogGraphQl\Model\Resolver\Product\MediaGallery::resolve` <!-- B2B-2677 -->

* **Support for order cancellation**. The [cancelOrder](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/mutations/cancel-order/) mutation allows a customer to cancel an order, passing its identifier and a cancellation reason. <!-- LYNX-197 -->

  * The new `order_cancellation_enabled` and `order_cancellation_reasons.description` response fields in the `storeConfig` 
query support user-initiated order cancellation requests. See [Query a store's order cancellation configuration](https://developer-stage.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/#query-a-stores-order-cancellation-configuration)

* **Enhanced support for custom attributes**. GraphQL custom attribute support has been enhanced by enriching API data to support all attribute types. The GraphQL EAV attributes schema now supports extending customer attributes and customer address objects in the Admin and retrieving them using GraphQL. Specific areas of enhancement include: <!-- LYNX-61 110-->

  * extended/added custom attributes support to specific areas such as customer and customer address
  * added caching for custom attributes
  * enhanced existing custom attributes support for products

* **Enhanced GraphQL caching capabilities improve page load speed**. Caching capability has been added to these queries, improving the speed of page load time for most PWA pages:

  * [`availableStores`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/available-stores/)
  * [`countries`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/countries/) and [country](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/country/)
  * [`storeConfig`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/)
  * [`currency`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/currency/)
  * [`customAttributeMetadata`](https://developer.adobe.com/commerce/webapi/graphql-api/index.html#query-customAttributeMetadata)

* **Improved GraphQL parser performance**. GraphQL parser performance has been improved by reducing the number of times the parse method is called per request. It is now called once. Previously, the parser was called at least three times.

#### New fields for existing mutations

* Added the `quickorder_active` field to the [storeConfig](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/) and [availableStores](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/available-stores/) queries. This field indicates whether the quick order feature is enabled.

* Added the following fields to the `setBillingAddressOnCart` and `setShippingAddressesOnCart` mutations:
  
  * `fax`
  * `middlename`
  * `prefix`
  * `suffix`

#### New queries and mutations

* [`attributeForms`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/attributes-form/) query<!-- LYNX-151 -->
* [`attributesList`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/attributes-list/) query<!-- LYNX-150 -->
* [`guestOrder`](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/queries/guest-order/) query
* [`guestOrderByToken`](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/queries/guest-order-by-token/) query
* [`recaptchaFormConfig`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/recaptcha-form-config/) query
* [`cancelOrder`](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/mutations/cancel-order/) mutation<!-- LYNX-172 --> 
* [`customAttributeMetadataV2`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/custom-attribute-metadata-v2/) query
* [`applyCouponsToCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/apply-coupons/) mutation
* [`clearCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/clear-cart/) mutation
* [`confirmEmail`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/confirm-email/) mutation
* [`createGuestCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/create-guest-cart/) mutation
* [`estimateShippingMethods`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/estimate-shipping-methods/) mutation
* [`estimateTotals`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/estimate-totals/) mutation
* [`removeCouponsFromCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/remove-coupons/) mutation

#### Deprecated queries and mutations

* `clearCustomerCart` mutation<!-- LYNX-254 -->
* [`createEmptyCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/create-empty-cart/) mutation<!-- LYNX-224 -->
* [`attributesMetadata`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/attributes-metadata/) query
* [`customAttributeMetadata`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/custom-attribute-metadata/) query

### Inventory Management

Inventory Management (v1.2.7) provides tools to manage product inventory. This community-developed feature is bundled with Adobe Commerce and Magento Open Source core code.

### Payments 

* GraphQL support has been added for core operations for all payment methods except for Venmo. New GraphQL endpoints for payment services are described in [Checkout](https://developer.adobe.com/commerce/webapi/graphql/schema/checkout/). <!-- BUNDLE-3326 -->

* Credit card vaulting has been enhanced for all payment methods except for Venmo. Shoppers can now vault, or save, their ACH payments and view or delete them from their account page. Merchants can enable and disable ACH vaulted payments from the Admin. <!-- BUNDLE-3324 -->

* The checkout workflow now includes an express payment section that provides PayPal, Google Pay, and Apple Pay **[!UICONTROL Express]** buttons. <!-- BUNDLE-3322 -->

[Payment Options](https://experienceleague.adobe.com/docs/commerce/payment-services/payments-checkout/payments-options.html) introduces supported payment methods.

### PWA Studio

PWA Studio v14.0 is compatible with Adobe Commerce 2.4.7. It includes multiple enhancements to improve accessibility. For information about bug fixes, see [PWA Studio releases](https://github.com/magento/pwa-studio/releases). See [Version compatibility](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) for a list of PWA Studio versions and their compatible Adobe Commerce core versions.

### Web API framework

**Working with multiple coupons per cart**

New REST endpoints support viewing, adding, and deleting multiple coupons associated with a cart.

>[!NOTE]
>
>For the first time, several REST endpoint routes contain the string `V2` instead of `V1`. For example, `GET /rest/default/V2/carts/{cartId}/coupons`. For Commerce merchants, these endpoints are meant to replace the `V1` versions of the endpoints. These endpoints are only available in Adobe Commerce.<!-- LYNX-208 -->

Return all coupon codes that are associated with a cart:

`GET  /rest/{store_code}/V2/carts/{cartId}/coupons`
`GET  /rest/{store_code}/V2/carts/mine/coupons`

Append a coupon code to a cart:

`POST /rest/{store_code}/V2/carts/{cartId}/coupons/{couponCode}`
`POST /rest/{store_code}/V2/carts/mine/coupons/{couponCode}`

Replace coupon codes in a cart:

`PUT /rest/{store_code}/V2/carts/{cartId}/coupons`
`PUT /rest/{store_code}/V2/carts/mine/coupons`

Remove coupon codes from a cart:

`POST /rest/{store_code}/V2/carts/{cartId}/coupons/deleteByCodes`
`POST /rest/{store_code}/V2/carts/mine/coupons/deleteByCodes`

**Additional endpoints**
This release introduces two new REST endpoints that provide a workaround for a limitation with the REST API `GET` and `POST V1/products/attributes` endpoints. These endpoints return the same value for the `is_filterable` attribute for both the `Filterable(with results)` and `Filterable(no results)` options of the **[!UICONTROL Use in Layered Navigation]** option. (The `is_filterable` attribute property is of type `Boolean`, which does not permit setting this property to `Filterable(no results)`.)

Two new REST endpoints have been implemented as a workaround:

* `PUT /V1/products/attributes/{attributeCode}/is-filterable/{isFilterable}`. Path parameters: `attributeCode` (`String`) and `isFilterable` (`int` values are: 0 is No; 1 is `Filterable (with results)`; 2 is `Filterable (no results)`). 
* `GET /V1/products/attributes/{attributeCode}/is-filterable`. Path parameters: `attributeCode` (`String`).<!-- ACP2E-2275 -->

## Fixed issues

We have fixed hundreds of issues in the Adobe Commerce 2.4.7 core code. A subset of the fixed issues included in this release is described below. Fixes included in previous Commerce 2.4.7-beta releases are also described.

### Installation, upgrade, deployment

<!-- AC-10396 -->

* Unnecessary cache manipulation has been removed from the set-up process. Previously, Commerce wrote its configuration to disk unnecessarily when `bin/magento setup:db-data:upgrade` or `bin/magento setup:upgrade` was run, which caused issues with som modules during setup. [GitHub-38124](https://github.com/magento/magento2/issues/38124)

<!-- ACP2E-1675 -->

* Deployment issues due to insufficient memory and large tables have been resolved. The `bin/magento  setup:upgrade` command no longer fails due to memory-exceeded errors that are related to large MySQL tables.

<!-- ACP2E-2198 -->

* `bin/magento setup:install` now completes successfully after `app/etc/config.php` has been deleted. Previously, the missing file was not regenerated during installation, and Commerce threw an error. [GitHub-37805](https://github.com/magento/magento2/issues/37805)

<!-- AC-8381 -->

* `bin/magento setup:upgrade` has been refactored to run successfully when installing a new module that installs both tables and associated `mview` indexers. [GitHub-37304](https://github.com/magento/magento2/issues/37304)

<!-- ACP2E-1882 -->

* Database restoration no longer fails due to a delimiter error. Previously, Commerce threw this error when `bin/magento setup:rollback --db` was executed: `Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'delimiter' at line 1, query was: delimiter ;;`.

<!-- ACP2E-1505 -->

* The `bin/magento setup:upgrade` command no longer fails with this type of MySQL memory limit-related error: `PHP Fatal error:  Allowed memory size of 4294967296 bytes exhausted (tried to allocate 20480 bytes)`. Multi-select attribute migration has been optimized to consume less memory during `setup:upgrade`.

<!-- ACP2E-1751 -->

* Generating a database backup now works as expected from both the Admin and command line. Previously, Adobe Commerce threw this error: `Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'delimiter' at line 1, query was: delimiter ;;`.

<!-- ACP2E-1604 -->

* Running `setup:config:set` without specifying the `--lock-db-prefix` parameter no longer erases the current value from the `env.php` file.

<!-- ACP2E-1498 -->

* Varnish configuration has been updated to prevent guest users from accessing cached content related to other customer groups.

<!-- AC-7113 -->

* Shoppers can now place an order in a deployment that implements split database when **[!UICONTROL Checkout Async]** is enabled. Previously, Adobe Commerce threw this error: `An error occurred on the server. Please try to place the order again`.

<!-- https://github.com/magento/magento2/pull/33092 -->

* `bin/magento setup:upgrade` now completes successfully when installing a new module that installs both tables and associated `mview` indexers. 

<!-- ENGCOM-9243 -->

* `bin/magento setup:upgrade` now displays a more informative error message when a message queue topic does not include a topic name. [GitHub-34246](https://github.com/magento/magento2/issues/34246)

<!-- https://github.com/magento/magento2/pull/36239 -->

* `bin/magento setup:upgrade` now displays a more informative error message when merged XML files are invalid. The error message now includes the filename. 

### Admin UI

<!-- AC-10998 -->

* Charts are now successfully disabled by default on the dashboard. [GitHub-38430](https://github.com/magento/magento2/issues/38430)

<!-- AC-9423 -->

* The Admin Sales menu now displays submenus correctly. Previously, the column break did not work correctly, and some submenus were not displayed. [GitHub-37812](https://github.com/magento/magento2/issues/37812)

<!-- AC-3122 -->

* **[!UICONTROL Select]** dropdown menu options are now visible on Admin **[!UICONTROL Content]** > **[!UICONTROL Pages]** when multiple pages are selected in the grid. [GitHub-35386](https://github.com/magento/magento2/issues/35386)

<!-- AC-9209 -->

* Corrected the path to the default value of `system/dashboard/enable_charts` in configuration settings. Charts are now displayed in the Admin as expected. [GitHub-37668](https://github.com/magento/magento2/issues/37668)

<!-- AC-9632 -->

* Corrected display issue with Admin Customer grids. Previously, grid columns were not completely contained within the displayed page.

<!-- AC-2916 -->

* Hover colors are now applied as expected on the rows of Admin static grids. [GitHub-35358](https://github.com/magento/magento2/issues/35358)

<!-- AC-7551 -->

* The checkout workflow no longer displays a warning when a shopper enters a postal code for Greece that does not contain a blank space. [GitHub-36676](https://github.com/magento/magento2/issues/36676)

<!-- AC-9357 -->

* The Admin `It's time to change your password` link now redirects to the Change Admin Password page as expected. [GitHub-37902](https://github.com/magento/magento2/issues/37902)

<!-- ACP2E-2460 -->

* Submenu titles now indicate any siblings irrespective of the access level that is assigned to the user. Previously, this information was hidden from admin users with limited access, even if multiple sibling groups existed for the submenu.

<!-- AC-9164 -->

* Page title suffixes are now included in both the `title` tag and the `meta title` tag for product pages. [GitHub-37680](https://github.com/magento/magento2/issues/37680)

<!-- ACP2E-2023 -->

* The product stock status condition is now correctly applied for related products rules.

<!-- ACP2E-2083 -->

* The **[!UICONTROL Login as Customer]** button is now displayed correctly on mobile devices.

<!-- ACP2E-2146 -->

* Adobe Commerce no longer displays the Admin **[!UICONTROL Add new customer group]** button if the logged-in admin user lacks permission to add a new customer group.

<!-- ACP2E-2286 -->

* An admin user with restricted permissions can now save a child product whose parent product is assigned to a different scope. Previously, Commerce invalidated the cache for a parent product that was not assigned to the scope in which the child product was changed.

<!-- ACP2E-2042 -->

* Admin users can now successfully switch between Admin filter views without view data being corrupted or lost. [GitHub-37529](https://github.com/magento/magento2/issues/37529)

<!-- ACP2E-2068 -->

* The archived order grid is now asynchronously updated with new order statuses as expected. An event-based approach to updating order status in the archive grid results in accurate order status, including post-credit memo refunds.

<!-- ACP2E-2049 -->

* The Admin grid actions dropdown menu can now hover as expected over a selected link for **[!UICONTROL Content]** > **[!UICONTROL Pages]** (and shared catalogs in the B2B module). Previously, this menu was mostly hidden, and admin users had to scroll to see options. [GitHub-36710](https://github.com/magento/magento2/issues/36710)

### Analytics

<!-- ACP2E-2266 -->

* The product detail page `meta itemprop="image"` and `meta itemprop="description"` properties are now available for the main product image. [GitHub-37497](https://github.com/magento/magento2/issues/37497)

<!-- ACP2E-2314 -->

* The Report section of the Products in Carts grid now displays the correct product price when **[!UICONTROL Catalog Price Scope]** is set to **[!UICONTROL Website]**. Previously, the product price was displayed as zero when the product was assigned to a website other than the default website.

<!-- AC-9275 -->

* Revenue reports are now displayed as expected in the Google Analytics (GA4) portal. [GitHub-37605](https://github.com/magento/magento2/issues/37605)

<!-- ACP2E-1880 -->

* `price` and `quantity` values in the Google Tag Manager data layer are now sent as numeric values as expected to Google Analytics. Previously, these values were sent as strings.

<!-- ACP2E-2030 -->

* Errors in handling header data when sending deployment data to the New Relic module have been resolved.

<!-- ACP2E-1833 -->

* Google Analytics 3 tags are now triggered as expected when the Google Analytics 4 tags are disabled.

### Banner

<!-- ACP2E-1818 -->

* Refactored the way banner content is loaded to remove excessive database queries, resulting in improved cart load times.

### Bundle products

<!-- ACP2E-1464 -->

* The category product count now correctly accounts for bundle products when **[!UICONTROL Display Out Of Stock*]** is enabled.

<!-- AC-8966 -->

* The `customerCart` query now returns all applied discounts on bundle products as expected. Previously, the total discounts that were applied to a bundle product were returned as zero.

<!-- ACP2E-2618 -->

* Product detail pages now display the correct price for bundle products for which a 100% discount has been applied. Previously, Commerce did not apply a 100% discount to bundle product prices.

<!-- ACP2E-2377 -->

* Cart price rules are now applied to product bundles instead of to each child product for dynamic-priced bundled products.

<!-- ACP2E-1650 -->

* Corrected an error that occurs when you use the `POST V1/shipment` endpoint to create a shipment containing a bundle product. The endpoint now adds items as expected and no longer returns this error: `The shipment couldn't be saved`.

<!-- ACP2E-1926 -->

* You can now save a scheduled update of a bundle product that includes a simple product that has an indefinite scheduled update. When the bundle product snapshot is created, the linked products are now grabbed by ID, entity ID, and also by SKU. Previously, the original version of the simple product was checked when the scheduled update on the bundle product was saved instead of the current version of the simple product.

<!-- ACP2E-1650 -->

* You can now use the `GET V1/shipment/` API route to create a shipment with a bundle product when the product has the **[!UICONTROL together]** shipment type set. Bundle products are also now validated based on their shipment type property.

<!-- ACP2E-2038 -->

* Shoppers can now edit the quantity of a bundle product in their storefront shopping cart. Previously, Adobe Commerce did not handle null values for `ItemId` when products were edited in the storefront shopping cart and displayed an error. [GitHub-37696](https://github.com/magento/magento2/issues/37696)

<!-- ACP2E-1801 -->

* Bundle products can now be successfully added to an Admin order using SKUs that contain a slash (`/`) character. Previously, admin users could not use this method to add products to an Admin order, and Commerce threw a JavaScript error.

<!-- ACP2E-1799 -->

* Admin users can now set decimal default values for newly added bundle options when **[!UICONTROL Qty Uses Decimal]** is enabled for the corresponding simple product. Previously, decimal values could be set only for saved selections.

<!-- ACP2E-1347 -->

* Optimized performance for saving bundle products with a large number of options

<!-- ACP2E-1478 -->

* Bundle products are now successfully imported without duplicating SKUs in product options. Previously, Adobe Commerce created multiple duplicate SKUs in product options when you imported bundle products with duplicate entries. 

<!-- ACP2E-1388 -->

* Bundle product price is now calculated properly when one of the products in the bundle is out of stock. Previously, if a product that was part of the bundle were out of stock, it was removed from the price calculation.

<!-- ACP2E-1503 -->

* Bundle products are now displayed as out of stock when the last of their required child products are bought. Previously, bundle products were displayed as in-stock on the storefront when their simple products were out of stock.

<!-- ACP2E-1443 -->

* Performance issues when adding bundle products with non-required options to the cart using the `addBundleProductsToCart` mutation have been resolved.

<!-- ACP2E-1264 -->

* The `categoryList` query now returns all bundle options as expected when the **[!UICONTROL Show out-of-stock products]** configuration setting is enabled. Previously, out-of-stock options were not included in the query response. 

<!-- ACP2E-1345 -->

* Bundle products created with `POST V1/products` now succeed when catalog price scope is set to `website`. Previously, an integrity constraint violation occurred. [GitHub-35595](https://github.com/magento/magento2/issues/35595)

### Cache

<!-- AC-11411 -->

* Categories are now visible to shoppers in stores where the cache is set to Fastly CDN (**[!UICONTROL Caching Application=Fastly CDN]**). This affected both guest shoppers and registered customers.

<!-- ACP2E-2070 -->

* Cache cookies after login are now the same after browsing the website. Previously, the login controller sent the wrong cache cookie, and pages might have been cached multiple times.

<!-- ACP2E-1840 -->

* Responses from GraphQL GET operations on CMS pages that contain CMS blocks are now cleared as expected in Fastly cache. Subsequent schedule updates now show accurate, update content for these pages.

<!-- ACP2E-1524 -->

* Page cache is now cleared as expected for a parent product when one of its child products has been saved from the Admin. A plugin check has been introduced to reach cache invalidation for configurable variants, similar to other product types, irrespective of indexer state (scheduled or real time). Previously, prices were not updated properly on the storefront after a configurable variation was updated from the Admin.

<!-- ACP2E-1454 -->

* Added a caching mechanism for AWS credentials. A credentials provider now uses the Commerce cache to cache credentials retrieved from AWS for EC2 configuration.

<!-- AC-7639 -->

* The plugin whose purpose is to add the configurable cache tag when a simple product associated with a configurable product is saved now works as expected. All relevant configurable cache tags are removed as expected when a simple product is updated by `POST V1/products`. Previously, not all prices were updated on the storefront, and caches had to be manually cleared. [GitHub-36726](https://github.com/magento/magento2/issues/36726)

### Cart and checkout

<!-- ACP2E-2658 -->

* Commerce now optimizes performance by not loading user-specific quote data when generating full page cacheable pages such as Product Details Pages (PDP) and CMS pages when persistent cart is enabled. Previously, the system would unnecessarily load user-specific session and quote data during the generation of these pages, which affected performance.

<!-- ACP2E-2684 -->

* Custom address custom attributes are now saved as expected in the database. Previously, attribute values that were saved in the database were prepended with attribute code.

<!-- ACP2E-2517 -->

* Generation of cart rules filter text for product attributes has been improved. Individual products are no longer loaded multiple times.

<!-- AC-8920 -->

* Adobe Commerce now displays an informative error message when an error occurs during checkout and no longer returns the shopper to an earlier checkout step. Previously, the shopper was returned to the shipping page.

<!-- ACP2E-2520 -->

* The `cart` query no longer returns shipping method and address for virtual carts. Previously, when a cart contained both physical and virtual products, and all physical products were removed, the cart query response continued to include shipping information.

<!-- ACP2E-2267 -->

* Commerce now displays informative messages when an add-to-cart action is triggered. Previously, the `The requested qty is not available` was not always displayed as needed on the storefront.

<!-- ACP2E-2166 -->

* Checkout page load times have been improved for customers with large address books. Commerce now processes only the number of customer addresses specified in the **[!UICONTROL Customer Addresses Limit]** setting. Previously, Commerce loaded the entire address book.

<!-- ACP2E-2174 -->

* Product quantity can now be changed in the cart as expected for in-stock items when one item is out of stock. Previously, shoppers could not change product quantity of any items when one was out of stock.

<!-- ACP2E-2269 -->

* The `AdvancedSalesRule` product attribute filter now works correctly with the decimal attribute backend type. As a result, the cart rules with `Coupon Type` set to **[!UICONTROL No Coupon]** now work as expected.

<!-- ACP2E-2376 -->

* The full amount of a whole cart discount is now applied as expected to carts that contain both bundle and configurable products.

<!-- ACP2E-2092 -->

* Customer Section cookies now honor the cookie's domain setting. Previously, the mini cart was not updating as expected in stores that contained subdomains, even though the session was shared.

<!-- AC-9340 -->

* Shipping an order to multiple addresses no longer triggers an error during region ID processing.

<!-- AC-8853 -->

* Fixed-discount amounts that are applied at the cart level are now correct.[GitHub-37496](https://github.com/magento/magento2/issues/37496)

<!-- AC-2044 -->

* Coupons are now applied successfully to an order when a shopper applies the coupon after selecting the flat rate shipping method where a cart price rule with shipping method set as a condition applies. Previously, the cart page displayed the Coupon is Not valid error, and the coupon was not applied. [GitHub-34866](https://github.com/magento/magento2/issues/34866)

<!-- AC-8596 -->

* The **[!UICONTROL My billing and shipping address are the same]** checkbox now remains checked by default when a shopper uses Chrome autocomplete to fill in their shipping address and then clicks **Next** before the shipping methods block is reloaded. [GitHub-33725](https://github.com/magento/magento2/issues/33725)

<!-- ACP2E-2005 -->

* The `applied_rule_ids` value in the `quote_item` table now includes a correct list of applied rule IDs. Previously, this value contained only the last applied rule ID.

<!-- ACP2E-2025 -->

* Mini-cart and customer data in local storage now resets when a session is removed from the server. Previously, this data still appeared when the session file was removed.

<!-- ACP2E-1763 -->

* Discrete carts are no longer mistakenly merged from the Admin when persistent cart is enabled.

<!-- ACP2E-1988 -->

* The default shipping address in the checkout shipping step is no longer populated with the previously selected pick-in-store address.

<!-- ACP2E-1614 -->

* Products in the cart are no longer excluded from related and upsell product lists after the cache is flushed.

<!-- ACP2E-1580 -->

* The cart tax and shipping estimator now accurately reflects the default destination configuration. Previously, when you configured default tax destination calculation settings and specified State/Region and ZIP, only the ZIP value was shown in the cart under **[!UICONTROL Estimate Tax and Shipping]**. This resulted from Adobe Commerce setting the region ID to undefined before invoking the conditional statement that set the default region ID from the Admin. 

<!-- ACP2E-1547 -->

* Adobe Commerce no longer throws this error during checkout when persistent shopping cart is enabled: `Invalid state change requested`. Previously, when this error was thrown, multiple orders with the same `quote_id` were occasionally created.

<!-- ACP2E-1456 -->

* The mini cart now displays bundle product prices that reflect cart tax configuration settings. Previously, the mini cart always included taxes in the prices of bundle products. 

<!-- ACP2E-1414 -->

* The performance of customer segment rules that rely on active carts has been improved, which has reduced the time needed to add a product to the cart.

<!-- AC-7503 -->

* The shipping estimate provided from the cart page is now accurate. `collectShippingRates` is now set only once. Previously, the shipping estimate was duplicated. [GitHub-36648](https://github.com/magento/magento2/issues/36648)

<!-- ACP2E-1417 -->

* The `cart` query no longer returns an error when a product in the specified cart is out of stock. Previously, shoppers using this query to make a purchase could not complete their purchase when an item was out of stock, and their checkout page was blank.

<!-- ACP2E-1459 -->

* Guest API requests to `POST V1/guest-carts/<cartId>/shipping-information` no longer return a `cancel` status if the page reloads during login in a mobile environment. Previously, Adobe Commerce threw a 500 error and logged this exception: `TypeError: Argument 2 passed to Magento\CustomerCustomAttributes\Model\Plugin\ProcessCustomerShippingAddressCustomAttributes::beforeSaveAddressInformation() must be of the type string, null given`.

<!-- AC-7886 -->

* Free shipping eligibility is now calculated as expected when the **[!UICONTROL Subtotal (Excl. Tax)]** condition for cart rules is applied. [GitHub-36760](https://github.com/magento/magento2/issues/36760)

<!-- AC-6672 -->

* The `cart` query now returns the correct tier pricing for a product. [GitHub-29655](https://github.com/magento/magento2/issues/29655)

<!-- ACP2E-1162 -->

* Informative error messages have been added to the checkout page to guide shoppers when the application of a coupon on the shipping page conflicts with the selected shipping method. Previously, a message told shoppers to return to the previous page.

<!-- ENGCOM-8387 -->

* The authentication popup is now initialized only when it is needed instead of whenever guest checkout is enabled. It is now initialized when the guest shopper tries to proceed to checkout, and guest checkout is disabled. [GitHub-30672](https://github.com/magento/magento2/issues/30672)

### Cart price rule

<!-- AC-2054 -->

* The cart price rule product subselect condition now includes the `total (incl.tax)` option as expected. [GitHub-34871](https://github.com/magento/magento2/issues/34871)

<!-- ACP2E-2029 -->

* The `If an item is FOUND/NOT FOUND in the cart with ALL/ANY of these conditions true` catalog price rule condition now works correctly with category and SKU attributes. Previously, this condition was not correctly applied in cart price coupon logic, and invalid coupons were applied to orders. [GitHub-37660](https://github.com/magento/magento2/issues/37660)

<!-- ACP2E-1932 -->

* You can now successfully save a new cart price rule with the `Magento_OfflineShipping` extension disabled. Previously, Adobe Commerce threw this error: `report.ERROR: Warning: Undefined array key "simple_free_shipping"`. [GitHub-37580](https://github.com/magento/magento2/issues/37580)

<!-- ACP2E-1516 -->

* Cart price rules are now applied as expected when a cart price rule related to one shipping method is configured for the store, and this shipping method is changed to another during check out. Previously, the `applied_rule_ids` value was never changed in the `sales_order_item` table, and the cart price rule was not applied to the order.

### Catalog

<!-- AC-10746 -->

* Running `bin/magento cache:clean` or `bin/magento cache:flush` no longer flushes the entire built-in or Varnish full-page cache unless specified. [GitHub-38301](https://github.com/magento/magento2/issues/38301)

<!-- ACP2E-2257 -->

* Merchants can now use the Product Carousel to create CMS blocks when `catalog_product_price dimensions-mode` is set to `website`. Previously, Commerce did not save the block and threw this SLQ error: `report.CRITICAL: PDOException: SQLSTATE[42S02]: Base table or view not found: 1146 Table`.

<!-- AC-6847 -->

* Commerce no longer displays duplicate images when the product color is changed on a product detail page.  [GitHub-36243](https://github.com/magento/magento2/issues/36243)

<!-- ACP2E-2504 -->

* Optimized the algorithm for synchronizing website-specific values after adding a new store or changing an existing one in large, multi-store environments.

<!-- ACP2E-2631 -->

* The clean-up process for cached image files has been improved to avoid the creation of hidden directories in the `pub/media/catalog/product` folder. Previously, hidden directories led to disk space issues during clean-up operations. The operation could be terminated, which left behind temporary hidden directories that were never deleted.

<!-- AC-10316 -->

* Bundle product prices are now calculated correctly, and an issue with the order of operations when calculating prices have been resolved. [GitHub-35665](https://github.com/magento/magento2/issues/35665)

<!-- AC-6996 -->

* An unnecessary clause has been removed from `catalog_product_price` index queries, which has improved performance of this indexer on stores with large catalogs. [GitHub-32382](https://github.com/magento/magento2/issues/32382)

<!-- ACP2E-2522 -->

* Commerce no longer inserts product description text into the product detail page **[!UICONTROL Meta Description]** field when this field has been left empty. Previously, when a product description contained HTML code that was generated by Page Builder or another HTML editor, the HTML was displayed in the Meta **[!UICONTROL Description]** field, and you could not leave this field empty.

<!-- ACP2E-2308 -->

* Configurable product options on configurable product PDP pages are no longer affected by other configurable products options on the page. Previously, configurable products with drop-down attributes no longer trigger an exception when a product carousel is present on the product details page. Configurable product options were not selectable when other configurable products with swatch options were present on the page.

<!-- ACP2E-2260 -->

* Recently viewed product information is now displayed in accordance with store view configuration. Previously, the recently viewed product data was not updated per store view, including name and prefered language.

<!-- ACP2E-2296 -->

* Vimeo videos now play as expected on product pages in mobile view in Chromium-based web browsers.

<!-- ACP2E-1959 -->

* The `bin/magento catalog:images:resize` command now correctly generates product images for the products that are assigned to a custom website with a custom theme.

<!-- ACP2E-1982 -->

* Metadata with `NULL` or `NOT NULL` values are now saved for the default store according to the **Use Default Value** checkbox as expected. Previously, metadata with `NULL` value was not saved when this checkbox was unchecked.

<!-- ACP2E-2093 -->

* Merchants can now successfully delete an existing image from the product details page, then upload a new image with the same name. Previously under those circumstances, the storefront product page did not display the correct image.

<!-- ACP2E-2128 -->

* The `productDetail` query now returns the product name instead of null when the product image `alt` attribute is set as empty.

<!-- ACP2E-2215 -->

* Orders that include both downloadable and physical products now include working links to the downloadable product as soon as the order has been completed. Previously, links to downloadable products were not available until the physical products in the same order shipped.

<!-- ACP2E-2343 -->

* URL rewrites are now updated when a category is moved from one store/root category to another store/root category. Obsolete database entries are now removed when the sub-categories are transferred to new parent categories. The database now includes only relevant entries. Previously, the `url_path` was not updated with the proper store ID.

<!-- ACP2E-2152 -->

* The REST `V1/products/<sku>/media` endpoint can now process the simultaneous upload of multiple media images. Previously, while processing several requests simultaneously, inconsistent data was created, and Commerce threw an error when this data was saved into the database.

<!-- ACP2E-2259 -->

* Customer segment banners now behave as expected when a shopper that is using a newly created customer account logs out. Previously, banners created for the logged-in customer segment was displayed even after that account session ended (that is, the registered shopper logged out). 

<!-- ACP2E-2219 -->

* Partial re-index performance for the Category Products and Product Categories indexers has been improved. Previously, the `indexer_update_all_views` cron job ran re-indexers multiple times per single product or category.

<!-- ACP2E-2043 -->

* When product stock status is automatically updated to out of stock based on stock configuration (quantity), stock status will be subsequently updated to in stock when the stock quantity is updated. Previously, the `stock_status_changed_auto` setting was ignored when a product's stock configuration was updated to in stock.

<!-- AC-8904 -->

* Toolbar sorting now works as expected on Search pages when the **[!UICONTROL Remember Category Pagination]** setting is enabled. [GitHub-33220](https://github.com/magento/magento2/issues/33220)

<!-- ACP2E-1640 -->

* Multi-select attributes are now saved as expected when **[!UICONTROL Use Default Value]** checkbox in the store-view scope is selected. Previously, this checkbox was unchecked when the product was edited and the default value was saved.

<!-- ACP2E-1878 -->

* Admin users with website-limited access can now add Images to a product that falls within their scope. If the admin user does not have access rights to the product, Commerce displays an informative message. Previously, admin users with website-limited access could not add images to products to which they had access.

<!-- ACP2E-1956 -->

* User-defined `special_from_date`, `special_to_date`, `news_from_date`, and `news_to_date` values are not overridden when a product is edited in store-view scope.

<!-- AC-6761 -->

* Commerce now displays the correct name after sorting products by name in Admin > **[!UICONTROL Category]** > **[!UICONTROL Products in category]** in multistore deployments where product names vary by store. [GitHub-36208](https://github.com/magento/magento2/issues/36208)

<!-- ACP2E-1975 -->

* The `addProductsToCart` mutation now returns customizable options with data. Previously, it returned only empty customizable options. [GitHub-37599](https://github.com/magento/magento2/issues/37599)

<!-- ACP2E-1859 -->

* Product position and ID selection are now displayed correctly when an admin user adds a new product to a category after clearing the cache but not reloading the category page. Previously, product position and selection were mismatched and displayed incorrectly.

<!-- ACP2E-1779 -->

* Merchants can now update the future start date or time of a scheduled change for downloadable product. Previously, Adobe Commerce threw this error during update of the future start date or time for the downloadable product: `The downloadable link isn't related to the product. Verify the link and try again`.

<!-- ACP2E-1943 -->

* Product backordered status is now displayed correctly on the storefront. Previously, products that were available for shipment were incorrectly identified as backordered.

<!-- ACP2E-1948 -->

* Accessing downloadable products from the Admin no longer results in an error when the admin user changes the store view from the view used during product creation to another store view. Product prices are now successfully converted to float when an admin user switches store view from all store views to the default store view. Previously, Adobe Commerce threw an error. [GitHub-37519](https://github.com/magento/magento2/issues/37519)

<!-- ACP2E-1994 -->

* Exported products now have the correct `manage_stock` value when the `use_config_manage_stock` value equals `1`. Previously, this default value was incorrect.

<!-- ACP2E-1479 -->

* Adobe Commerce no longer displays a warning message when you save a product that was created with custom options after deleting its image. 

<!-- ACP2E-1419 -->

* Product thumbnail images are now displayed as expected in the product stock alert email that is sent when a product is back in stock. Previously, this image was not displayed in the alert email

<!-- AC-3003 -->

* The product count in the category tree (Admin **[!UICONTROL Catalog]** > **[!UICONTROL Category]**) is now accurate. Previously, the category products count could not be retrieved from the `catalog_category_product_index` table. The typo that triggered this bug has been fixed. [GitHub-35417](https://github.com/magento/magento2/issues/35417)

<!-- ACP2E-1239 -->

* The main product image on the product details page no longer visibly shifts downward during page load when `product_image_white_borders` in theme `view.xml` is disabled. Previously, the product image visibly shifted downward during page load due to incorrect height settings in Fotorama JS.

<!-- ACP2E-1361 -->

* Customers are now notified about drops in product price when the customer is subscribed to price drop alerts. Previously, price-drop notifications were not always sent due to application-level caching.

<!-- ACP2E-1422 -->

* Server-side validation has been added to the process of creating product attributes through the web API. You cannot enable the **[!UICONTROL Use in Layered Navigation Catalog]** field when the **[!UICONTROL Catalog Input Type for Store Owner]** field value is `Text Field`, `Text Area`, `Text Editor`, `Date`, or `Date and Time`. Previously, products were omitted from categories and search results.

<!-- ACP2E-1413 -->

* The category page now re-loads with the correct pagination after a shopper opens the page, changes the pagination, navigates to a product page, and then returns to the category page. [GitHub-36563](https://github.com/magento/magento2/issues/36563)

<!-- ACP2E-1334 -->

* Out-of-stock simple products that are options for a configurable product are now displayed as disabled on the storefront when **[!UICONTROL Display Out of Stock Products]** is set to **Yes**. Previously, all options were displayed as available, despite their status and real availability.

<!-- ACP2E-1384 -->

* Updating the website scope attribute in a specific store view no longer overrides the value of that attribute in global scope. Previously, importing product prices when multiple rows are available with the same SKU and `store_view_code` resulted in inaccurate prices for the default and All Store view scopes.

<!-- ACP2E-1632 -->

* Merchants can now add a GIF image to a product's image gallery from the Admin. Previously, Adobe Commerce displayed this error: `imagecolorsforindex(): Argument #2 ($color) is out of range`.

<!-- ACP2E-1709 -->

* Checks have been added to handle errors that result from undefined array keys. Previously, an error occurred during declarative schema whitelist generation.

<!-- ACP2E-1749 -->

* Adobe Commerce now returns a valid result for the custom date `01/01/1970`. Previously, the custom attribute returned this error: `Invalid input datetime format of value '1/01/1970`. [GitHub-37274](https://github.com/magento/magento2/issues/37274)

<!-- AC-6507 -->

* `routes` queries that use fragments now return category information as expected. Previously, an internal server error occurred on the category page. [GitHub-35906](https://github.com/magento/magento2/issues/35906)

<!-- ACP2E-1772 -->

* Issues with the `cataloginventory_stock` partial re-indexing process have been resolved, and indexer performance has improved. Previously, stock and product categories were not accurately updated.

<!-- AC-8226 -->

* Adobe Commerce now generates a 301 redirect for a product when the category it belongs to has been moved to a new parent. [GitHub-37039](https://github.com/magento/magento2/issues/37039)

### Catalog rules

<!-- ACP2E-1834 -->

* Catalog rules are now correctly indexed when enabled by schedule update. As a result, discounted prices are now correctly generated and indexed. Previously, when two catalog rules were available, and one rule is activated after the first rule before the first rule's the catalog rule indexing operation has completed, the catalog rule discount prices were not generated for the second catalog rule.

<!-- ACP2E-1579 -->

* Catalog rules are now applied as expected in a multi-website environment.

### Configurable products

<!-- ACP2E-1881 -->

* Merchants can now select **[!UICONTROL Skip quantity at this time]** and **[!UICONTROL Skip image uploading at this time]** when configuring a configurable product without affecting the source of associated simple products. Previously, selecting  **[!UICONTROL Skip quantity at this time]** resulted in the disappearance of product sources.

<!-- AC-7099 -->

* The **[!UICONTROL As low as]** label is no longer displayed for a configurable product price when all options have the same price.

<!-- ACP2E-2464 -->

* Admin users with website permissions can now save a child product that is part of a configurable product in a different store context. Re-indexing processes now skip this type of configurable product.

<!-- ACP2E-2003 -->

* Configurable products with two child products are no longer marked as out of stock when one child product is disabled by a scheduled update.

<!-- AC-8060 -->

* The performance of save operations for configurable products with multiple options has improved. Previously, time outs could occur during product save operations. [GitHub-36928](https://github.com/magento/magento2/issues/36928)

<!-- ACP2E-1764 -->

* The storefront display of configurable product prices now change as expected when a shopper selects a product option. [GitHub-37378](https://github.com/magento/magento2/issues/37378)

### Coupons

<!-- ACP2E-2495 -->

* Coupon codes with a limited number of uses per customer can now be used a second time when the order for which it was previously used fails. Previously, the promo code was not released when the prior order was canceled.

<!-- ACP2E-2428 -->

* Coupon codes that contain space characters are no longer invalidated. Previously, if a coupon code contained a space character (before or after the actual code), validation failed. [GitHub-38048](https://github.com/magento/magento2/issues/38048)

<!-- ACP2E-1551 -->

* Shoppers can now use two separate auto-generated coupon codes that have been generated by the same cart price rule. The `Uses per Coupon` field is now enabled when the coupon type selected to `Auto` (similar for coupon type =`Specific Coupon`) . This in turn enables the shopper to apply multiple coupon codes to the same cart price if the codes are different. 

<!-- ACP2E-1496 -->

* A shopper's single-use coupon value is now restored as expected when the order to which it was applied is canceled. 

<!-- ACP2E-1195 -->

* The `GET V1/coupons/<couponId>` endpoint now returns the full expected response for manually created coupons just as it does for autogenerated coupons. Previously, some fields were omitted (for example, `usage_limit`, `usage_per_customer`, and `created_at`).

### cron

<!-- ACP2E-2457 -->

* The `aggregate_sales_report_bestsellers_data` cron job no longer creates very large temporary MySQL tables and now completes successfully. This cron job now inserts data per store, not for all stores at once. Previously, this cron job could result in `No space left on device` errors.

<!-- ACP2E-2427 -->

* The number of pending records in the `cron_schedule` table has been reduced by preventing cron jobs from trying to acquire unnecessary cron job locks. Previously, cron jobs tried to acquire locks when it was too late to run the job. Cron jobs in `cron_schedule` were not marked as missed even though they had already passed their scheduled time. Commerce also displayed this error repeatedly in the error log: `report.WARNING: Could not acquire lock for cron job: indexer_update_all_views`.

<!-- AC-9207 -->

* Fixed the divide-by-zero fatal error in cron expressions. [GitHub-37804](https://github.com/magento/magento2/issues/37804)

<!-- ACP2E-1792 -->

* The `sales_clean_quotes` cron process has been optimized to run faster by adding a composite index on `store_id` and `updated_at columns` in the quote table. This change improves cron job performance when processing many quotes.

<!-- AC-7987 -->

* Admin users can now view which task the `bin/magento cron:run` process is currently performing. The title of the currently running process now lists the group and job names. [GitHub-34321](https://github.com/magento/magento2/issues/34321)

### Customer

<!-- AC-6748 -->

* Adobe Commerce now displays the **[!UICONTROL Date of Birth]**, **[!UICONTROL Tax/VAT Number]**, **[!UICONTROL Gender]**, **[!UICONTROL Telephone]**, **[!UICONTROL Company]**, and **[!UICONTROL Fax]** fields on the edit customer page based on configuration settings. [GitHub-36196](https://github.com/magento/magento2/issues/36196)

### Customer segments

<!-- ACP2E-2471 -->

* Customer segment conditions now load all matched customers as expected. Previously, the customer segment matched customers list did not contain all matched customers.

### EAV

<!-- ACP2E-2222 -->

* The EAV indexer no longer requires the deletion of the non-visible entities during batch processing. By default, the indexer no longer batches non-visible products, and indexer performance has improved.

### Email

<!-- ACP2E-2125 -->

* Emails that contain diacritics or accents (that is, utf8 email) are now supported for customers and companies as well as for order placing by guests and registered customers. Previously, Commerce did not save customer records that contained diacritics and displayed this error: `Something went wrong while saving the customer`.

<!-- ACP2E-2503 -->

* Email sender names can no longer include colon characters. A new validation rule now prevents the saving of sender names that contain colon characters from the Store Email Addresses section of Admin **[!UICONTROL Stores]** > **[!UICONTROL General]**. Previously, merchants could save a sender name that contained a colon character, which resulted in mail server errors.

<!-- ACP2E-2018 -->

* Image options are no longer displayed as HTML markup in the Returns customer emails (default template) for products with custom image options.

<!-- ACP2E-1529 -->

* Company Admin details are now saved as expected, and admins are correctly redirected, when Assign Company Admin emails contain a `CMS Block URL` variable. 

<!-- AC-2903 -->

* Customer email addresses can now include diacritics. Previously, front-end validation prohibited the creation of a user with diacritics in their email address. [GitHub-12075](https://github.com/magento/magento2/issues/12075)

<!-- ACP2E-1682 -->

* Stock and price alert emails are now translated according to the language configured for the website default store view. Previously, these emails were not translated.

<!-- ACP2E-1571 -->

* `POST V1/order/notify-orders-are-ready-for-pickup` now sends an email alerting customers that an order is ready for pickup only when the order is ready. Email is now triggered only when the request has been fulfilled without an exception. 

### Frameworks

<!-- AC-10873 -->

* Improved debugging by adding the `UNCACHEABLE` value when outputting an HTTP header with Varnish is in use. Previously, only `HIT` or `MISS` values were outputted. [GitHub-37912](https://github.com/magento/magento2/issues/37912)

<!-- AC-10884 -->

* Added code to support default Varnish compression handling. [GitHub-38309](https://github.com/magento/magento2/issues/38309)

<!-- AC-8502 -->

* The `bin/magento varnish:vcl:generate` command now includes an `input-file argument`. This supports the addition of a custom VCL to a Git repository, relative to the Commerce root. [GitHub-37363](https://github.com/magento/magento2/issues/37363)

<!-- AC-10739 -->

* Support for Varnish 4.x and 5.x has been removed from the codebase. [GitHub-38304](https://github.com/magento/magento2/issues/38304)

<!-- AC-8023 -->

* `phpcodesniffer-composer-installer` in `composer.json` has been upgraded to v1.0.0. [GitHub-36913](https://github.com/magento/magento2/issues/36913)

<!-- AC-10858 -->

* Characters that do not comply with [RFC3986](https://www.rfc-editor.org/rfc/rfc3986.html) have been removed from the codebase. [GitHub-38355](https://github.com/magento/magento2/issues/38355)

<!-- AC-10692 -->

* Fixed an incorrect PHP doc tag in the `Magento\Reports\Block\Adminhtml\Shopcart\Product\Grid` class. [GitHub-38186](https://github.com/magento/magento2/issues/38186)

<!-- AC-10865 -->

* Refactored code throughout the codebase that was created when coding practice dictated that any cache section that was included in the `app/etc/env.php` file would include a frontend section. This refactoring addresses potential problems when upgrading Commerce pre-2.4.4 deployments. [GitHub-38363](https://github.com/magento/magento2/issues/38363)

<!-- AC-8005 -->

* Clarified the error message that is associated with `StockItemValidator.php` when a stock ID with a value of 0 is supplied during an API call. [GitHub-31107](https://github.com/magento/magento2/issues/31107)

<!-- AC-10583 -->

* Added a default empty array to `$tagGenerators` in `CompositeTagGenerator` to prevent errors during dependency injection compilation. Previously, running the `bin/magento setup:upgrade` command when the `Magento_DirectoryGraphQl` and `Magento_StoreGraphQl` modules were disabled resulted in an error. [GitHub-38165](https://github.com/magento/magento2/issues/38165)

<!-- AC-9232 -->

* The unused `AlgorithmProviderFactory` class has been removed as well as dependencies on this class in classes including `JweAlgorithmManagerFactory.php`, `JweContentAlgorithmManagerFactory.php`, and `JwsAlgorithmManagerFactory`. [GitHub-37783](https://github.com/magento/magento2/issues/37783)

<!-- AC-9776 -->

* The `var/log/system.log` file no longer contains `main.INFO error` messages. The menu entry log has been moved from level INFO to DEBUG. Previously, the `var/log/system.log` file was flooded with messages like this: `Add of item with id Magento_Theme::design_config was processed … `.

<!-- AC-8809 -->

* Redis preloading no longer fails when `exec()` returns false. Verification has been added to the preloading process to prevent `array_combine` from receiving `false` as a second argument. As a result, preloading will continue to run when `exec()` returns `false`. [GitHub-37509](https://github.com/magento/magento2/issues/37509)

<!-- AC-8220 -->

* Refactored the `Magento_CatalogWidget` module to replace `$block` escaping functions with `$escaper` escaping functions. [GitHub-37107](https://github.com/magento/magento2/issues/37107)

<!-- AC-9336 -->

* `Swaziland` has been updated to `Eswatini` throughout the codebase. [GitHub-37873](https://github.com/magento/magento2/issues/37873)

<!-- ACP2E-2638 -->

* Added the new Nicaraguan currency (NIO) to the list of available currencies.

<!-- AC-10591 -->

* Changed the name of the `reponseBody` variable to `responseBody` in `app/code/Magento/CatalogRule/Controller/Adminhtml/Promo/Catalog/NewConditionHtml.php`.[GitHub-38093](https://github.com/magento/magento2/issues/38093)

<!-- AC-9221 -->

* Resolved subtotal rounding errors that occurred in transactions for products for which decimal quantity has been enabled. [GitHub-37817](https://github.com/magento/magento2/issues/37817)

<!-- ACP2E-2127 -->

* The date filter for the Admin customer grid now works as expected according to the specified locale. 

<!-- AC-9027 -->

* The `bin/magento setup:upgrade` command no longer fails due to the `$schemaPatch` variable data type. Previously, the string value was passed to the `get_class` function, which caused the error. [GitHub-37545](https://github.com/magento/magento2/issues/37545)

<!-- ACP2E-2485 -->

* Critical database read failures when `synchronous_replication` is enabled for slave connections on Adobe Commerce Cloud no longer occur. 

<!-- ACP2E-2345 -->

* The connection to the MySQL database is now restored if the connection times out during a transaction when you set `max_messages = 0` for consumer. Previously, the connection was terminated.

<!-- ACP2E-2121 -->

* The `magento/module-release-notification` core module has been marked as deprecated in the 2.4-develop code with this comment: `Starting from Magento 2.4.7,  Magento_ReleaseNotification module is deprecated in favor of another in-product messaging mechanism`.

<!-- AC-9388 -->

* Proxy code generation now generates Proxy and Factory files as expected for deployments running in production mode. [GitHub-35252](https://github.com/magento/magento2/issues/35252)

<!-- AC-1477 -->

* The Indian state of Ladakh is now listed as an option in the Admin address **[!UICONTROL State]** dropdown menus. [GitHub-33698](https://github.com/magento/magento2/issues/33698)

<!-- AC-8388 -->

* The event countdown ticker is now displayed as expected on the category page.

<!-- AC-8369 8368 8365 8317 8351 8357 8377 8357 8351 8323-->

* The forbidden `@author` tag has been removed from the code base, including these modules: `Magento_user-variable-wee`, `Magento_Catalog`, and `Magento_Customer`, `Magento_Wishlist`, `Magento_Review` `Tax`, and throughout the framework. [GitHub-37245](https://github.com/magento/magento2/issues/37245), [GitHub-37246](https://github.com/magento/magento2/issues/37246), [GitHub-37249](https://github.com/magento/magento2/issues/37249), [GitHub-37263](https://github.com/magento/magento2/issues/37263)

<!-- AC-9489 -->

* The JSON serializer in the `User` module has been replaced with a new, more accurate serializer (`JsonHexTag`). Previously, Commerce sometimes crashed when trying to use data serialized by the regular serializer when it contained unescaped elements. [GitHub-31377](https://github.com/magento/magento2/issues/31377)

<!-- ACP2E-2138 -->

* Broken pipeline errors no longer occur while running a full reindex (`bin/magento indexer:reindex`). AMPQ connections are now closed before the process manager forks processes.

<!-- ACP2E-2244 -->

* The queue message validator now validates the the subtype of all array elements. Previously, Commerce threw an exception.

<!-- ACP2E-2066 -->

* The queue connection configuration per topic in `app/etc/env.php` now works correctly. Previously, the product alert queue does not generate correctly when a new message queue was created with a custom exchange. If the queue connection for a topic was configured in `app/etc/env.php` with a custom exchange, a new binding was created for all topics with that custom exchange. Merchants could not process product alerts.

<!-- ACP2E-2144 -->

* Temporal formats marked with a  `/* mariadb-5.3 */` comment no longer cause errors during `bin/magento setup:install` when upgrading MariaDB server to version 10.5.1 or higher.

<!-- ACP2E-2147 -->

* The AwsS3 driver now works as expected as a replacement for the base default file storage implementation. Previously, data could be corrupted when this driver was configured for file storage. [GitHub-37844](https://github.com/magento/magento2/issues/37844)

<!-- ACP2E-1999 -->

* `bin/magento config:show` and `set` commands that use `$_ENV` variables now support the use of website and store codes that contain camelcase or uppercase characters.

<!-- AC-8923 -->

* Added classes with `!important` as used in Tailwind 3 for CSS layout support. [GitHub-37568](https://github.com/magento/magento2/issues/37568)

<!-- AC-9115 -->

* A missing `jQuery` dependency has been added to the `trim-input.js` file. [GitHub-37683](https://github.com/magento/magento2/issues/37683)

<!-- AC-9387 -->

* Event-specific details are now passed as a second attribute (`context`) of the `log` method. [GitHub-37879](https://github.com/magento/magento2/issues/37879)

<!-- AC-9109 -->

* Aspect ratio values have been added to catalog images and unnecessary scripts have been removed from the UI framework. [GitHub-37691](https://github.com/magento/magento2/issues/37691)

<!-- AC-9188 -->

* Revised error messages triggered by invalid XML configuration to be more informative. [GitHub-37788](https://github.com/magento/magento2/issues/37788)

<!-- AC-9335 8817-->

* Refactored deprecated code related to the creation of dynamic properties throughout the codebase.

<!-- AC-7009 -->

* The performance of indexers for large stores with extremely active product databases has improved. Indexers now index the latest product information once for each index rather than multiple times. Previously, products disappeared from the website, and product data could be out of date on the website. [GitHub-30012](https://github.com/magento/magento2/issues/30012)

<!-- ACP2E-1971 -->

* `mview_state` record status now accurately indicates state based on changelog activity when a slave database connection is available. Previously, these records remained in a `waiting` state in cloud deployments even when there were no new entries in the changelog.

<!-- ACP2E-2022 -->

* Added support for the `precision` option for currency format to preserve feature parity with the deprecated `ZendCurrency` class.

<!-- AC-8854 -->

* Cookie messages have been converted into observable attributes, and developers can now manipulate state, which can potentially trigger UI changes. Previously, cookies were read-only and could not be manipulated. [GitHub-37308](https://github.com/magento/magento2/issues/37308)

<!-- AC-6325 -->

* Admin users can now generate an invoice when their Commerce instance is connected to S3 storage. Previously, Commerce displayed this error: `Cannot create image resource. File not found`. [GitHub-35706](https://github.com/magento/magento2/issues/35706)

<!-- AC-6906 -->

* Adobe Commerce now logs an exception message as expected when VAT number validation by the VIES validation service fails. [GitHub-36065](https://github.com/magento/magento2/issues/36065)

<!-- AC-8146 -->

* The `Administrators` name has been removed from the query used to fetch an administrators role during admin role creation. [GitHub-36998](https://github.com/magento/magento2/issues/36998)

<!-- AC-8607 -->

* The `bin/magento setup:config:set` command no longer fails when an invalid database user name is included in the `app/etc/env.php` file. [GitHub-37409](https://github.com/magento/magento2/issues/37409)

<!-- AC-8595 -->

* Sorting by column on reserved words in a default Admin UI component no longer results in an SQL error in `var/log/exception.log`. [GitHub-37423](https://github.com/magento/magento2/issues/37423)

<!-- AC-8562 -->

* Added `AddDataForCostaRica.php` to provide state information for Costa Rica. [GitHub-37382](https://github.com/magento/magento2/issues/37382).

<!-- AC-8577 -->

* Improved error message for scenario where user tries to access an invalid URL from the Admin. [GitHub-35682](https://github.com/magento/magento2/issues/35682).

<!-- ACP2E-1841 -->

* `Param $options[`position`]` for currency symbols now works as expected and supports the customization of the currency symbol position. Previously, after migrating from Zend Framework 1, the `toCurrency` method ignored the `position` parameter. This issue occurred throughout the Admin interface.

<!-- AC-8817 -->

* Refactored deprecated code related to creation of dynamic properties throughout the codebase.

<!-- AC-8154 -->

* Custom style formats that were created by extending the TinyMCE editor in Adobe Commerce and Magento Open Source releases prior to 2.4.6 are now available as expected in the Page Builder `text` content type. Previously, the custom style format was ignored, and only the default formats loaded after upgrade to Adobe Commerce 2.4.6-p1. [GitHub-36950](https://github.com/magento/magento2/issues/36950)

<!-- AC-8576 -->

* Added the following informative note to the `quote.php` file: `Important: This method also copies customer data to quote and removes quote addresses`. [GitHub-37400](https://github.com/magento/magento2/issues/37400)

<!-- ACP2E-1973 -->

* Instantiation of the lock provider now goes through `\Magento\Framework\Lock\Proxy` class. The lock provider is now configured with the `lock` setting through the `app/etc/env.php` file.

<!-- ACP2E-1492 -->

* Mutex has been implemented for orders to prevent race conditions during update by concurrent requests. Previously, concurrent requests (race conditions) for order cancellations caused duplicated entries in the `inventory_reservation` table.

<!-- ACP2E-1381 -->

* The `populateWithArray` function now transforms object properties to snake case correctly, making it compatible with the `AbstractModel` getters and setters. Previously, the snake case formatting was incorrect when the data attribute name contained several uppercase letters in a row. 

<!-- ACP2E-1522 -->

* The auto increment value in the `catalog_product_entity_varchar` table now increments correctly after a product is saved. Previously, this value increased by ten.

<!-- ACP2E-1701 -->

* Adobe Commerce no longer throws this file system exception when you try to flush the JavaScript/CSS cache: `No such file or directory`.

<!-- ACP2E-1358 -->

* The value of `value_id` in `customer_entity_int` is now incremented correctly. An update query is executed instead of `insert on duplicate key update` when updating an entity that incorporates these attributes. As a result, the auto-increment columns used within the EAV model now grow in a linear fashion. Previously, the auto-increment process for columns skipped values due to failed insert queries. [GitHub-28387](https://github.com/magento/magento2/issues/28387)

<!-- AC-8462 -->

* Removed unnecessary white space from `id` attributes that do not require it. (This bug was introduced by an Adobe Commerce 2.4.6 code change.)

<!-- AC-7923 -->

* Store codes no longer appear in the store URL when the store is in single-store mode. [GitHub-36831](https://github.com/magento/magento2/issues/36831)

<!-- AC-7988 -->

* Minor updates have been made to `around` plugins. [GitHub-31443](https://github.com/magento/magento2/issues/31443)

<!-- AC-7989 -->

* The swatches `Helper` has been refactored to remove misleading import aliases. [GitHub-31373](https://github.com/magento/magento2/issues/31373)

<!-- AC-8708 -->

* Admin users can now delete or rename a `sitemap.xml` file as expected. Previously, an admin user could delete the file from the Admin, but it remained in the file system. [GitHub-37468](https://github.com/magento/magento2/issues/37468)

<!-- ACP2E-1747 -->

* Coupons are no longer flagged as used when payment fails for the order to which they have been applied. Queue messages are now processed in the order in which they are published when the consumer is started. Previously, the first message was pulled from the queue to simply check whether messages were queued, and was rejected afterward, which caused the first message to be processed last.

<!-- ACP2E-1627 -->

* Adobe Commerce no longer throws an exception in the log file when a user tries to print a shipping label. Previously, if an extension modifies response headers that contain an attachment, the system threw an exception in the log file.

<!-- AC-7986 -->

* Support for more HTML classes has been added to `elements.xsd`. [GitHub-36891](https://github.com/magento/magento2/issues/36891)

### General fixes

<!-- AC-10591 -->

* Changed the name of the `reponseBody` variable to `responseBody` in `app/code/Magento/CatalogRule/Controller/Adminhtml/Promo/Catalog/NewConditionHtml.php`.[GitHub-38093](https://github.com/magento/magento2/issues/38093)

<!-- ACP2E-2647 -->

* Scheduling product updates no longer clears multi-select attribute data. Previously, when an update was scheduled for a product, the product's multi-select attribute data was erroneously cleared. [GitHub-37675](https://github.com/magento/magento2/issues/37675)

<!-- AC-2904 -->

* Saving a product with a non-default store scope no longer results in unchanged attributes becoming store-scoped when loaded using `ProductRepository`. [GitHub-8897](https://github.com/magento/magento2/issues/8897)

<!-- ACP2E-2132 -->

* Shoppers can now access pages that are configured as hierarchy nodes when access restrictions are enabled. Previously, an infinite redirect loop occurred, and the browser threw this error: `ERR_TOO_MANY_REDIRECTS`.

<!-- ACP2E-2404 -->

* Informative error messages have been added to custom field validation on product detail pages. [GitHub-38006](https://github.com/magento/magento2/issues/38006)

<!-- ACP2E-2511 -->

* Special characters can now be used in name fields. Previously, the ampersand character (&) was restricted in the name validator, which blocked customer add or edit operations when the customer name contained an ampersand. [GitHub-38080](https://github.com/magento/magento2/issues/38080)

<!-- ACP2E-2469 -->

* Admin users with restricted access to a specific store can now use a mass update action to update product reviews. Previously, Commerce threw this exception: `report.CRITICAL: TypeError: array_intersect(): Argument #1 ($array) must be of type array, null given in app/code/Magento/AdminGws/Model/Models.php:439`.

<!-- AC-8600 -->

* The storefront login page's Show Password functionality now displays passwords as expected. Previously, passwords were not displayed. [GitHub-37432](https://github.com/magento/magento2/issues/37432)

<!-- ACP2E-2062 -->

* The product comparison list is now always website-specific for guest shoppers and does not contain products that were added from the other websites, including products that were assigned to both websites.

<!-- ACP2E-2087 -->

* CMS content blocks that contain emojis are no longer truncated after the emoji when saved to the database. Previously, content was truncated after the emoji because the default database configuration did not support four-byte characters.

<!-- ACP2E-2154 -->

* The related product rule's **Is one of** condition now works correctly when configured with the **Products to match** setting. Previously, this rule did not identify any products.

<!-- ACP2E-2164 -->

* The CMS page grid now filters pages based on the store view that is assigned to the admin user. Previously, role scope was not applied.

<!-- AC-8823 -->

* Passwords are now displayed as expected when the **[!UICONTROL Show Password]** checkbox on the login page is active.

<!-- ACP2E-2037 -->

* The Reset Password Token system attribute of customer entity (`rp_token`) validation has been removed from attribute validation during customer account creation, and diacritics validation is included only in the resulting customer email. Previously, Commerce did not save the customer record and displayed this error: `Something went wrong while saving the customer`.

<!-- AC-8826 -->

* You can now successfully save edits to the Admin Pages and Block grid after deleting a column. [GitHub-37525](https://github.com/magento/magento2/issues/37525)

<!-- ACP2E-1933 -->

* Company admins can now add company users from the storefront. Previously, Commerce logged this error when admin user tried to add a new user: `report.CRITICAL: Error: Call to a member function __toArray() on null in app/code/Magento/LoginAsCustomerLogging/Observer/LogSaveCustomerObserver.php:123`. 

<!-- ACP2E-1972 -->

* Customers can now log in successfully with a new password from one device after resetting their password on a different device.

<!-- ACP2E-1609 -->

* The Admin customer address **State/Province** field now retains the last saved value as expected. Previously, when you removed the value from this field, Commerce continued to display the deleted value in the **State/Province** field. [GitHub-36846](https://github.com/magento/magento2/issues/36846)

<!-- ACP2E-1796 -->

* Adobe Commerce no longer throws a constraint violation error when you first deselect, then select a newly created CMS page.

<!-- ACP2E-1639 -->

* A hierarchy website root is now correctly assigned to a newly created CMS page.. Previously, the hierarchy website root selection was mismatched on newly created CMS pages.

<!-- ACP2E-1508 -->

* Errors no longer occur during requests for an RSS feed for categories when **[!UICONTROL RSS Feed Top Level Category]** is enabled. Previously, browsing the RSS feed category page resulted in Elasticsearch `CRITICAL` errors in log files when **[!UICONTROL RSS Feed Top Level Category]** was enabled. 

<!-- ACP2E-1490 -->

* The correct value is now saved for `gws_store_groups` when role scope is changed during user role creation. Previously, when role scope was selected as `All`, the `gws_store_groups` value was saved as null during user creation but not during role editing. Also, if role scope was selected as `Custom`, then the `gws_store_groups` value was always saved as null.

<!-- ACP2E-1446 -->

* The reset password page can now be accessed by clicking the Admin reset password link on the Admin login page when the **[!UICONTROL Add Store Code to Urls]** setting is enabled. The Admin reset password link previously opened the login page or 404 page.

<!-- ACP2E-1274 -->

* The date range in the Admin statistics dashboard is now calculated based on the time zone that is set in configuration settings, then converted to UTC in order to fetch data from the database.

<!-- ACP2E-1665 -->

* The CMS hierarchy filter works as expected after you filter a store view then click **[!UICONTROL Save]** on Admin **[!UICONTROL Content]** > **[!UICONTROL Hierarchy]**. Previously, clicking **[!UICONTROL Save]** refreshed the page, but the context was lost, and the selected store view was no longer displayed.

<!-- ACP2E-1631 -->

* Clicking the **[!UICONTROL Send invitation]** button (Admin **[!UICONTROL Marketing]** > **[!UICONTROL Private sales]** > **[!UICONTROL Invitation]**) now submits a POST request along with the form key and sends the invitation successfully. Previously, when you clicked this button, neither the HTTP POST method nor the form key were present.

<!-- ACP2E-1608 -->

* Zero-byte files can now be successfully copied to remote storage with AWS S3.

<!-- AC-7402 -->

* Admin users can now add a new customer address from the Admin when that customer has been created for another website whose store ID does not match the website ID. Previously, Adobe Commerce displayed this pop-up message: `Something went wrong`. [GitHub-36582](https://github.com/magento/magento2/issues/36582)

<!-- AC-8247 -->

* The CMS block editor page now displays the correct widget `block_id` value. [GitHub-29644](https://github.com/magento/magento2/issues/29644)

### Gift cards and wrapping

<!-- AC-7372 -->

* Merchants can no longer create a gift card with a negative value.

<!-- ACP2E-1890 1806-->

* The `setGiftOptionsOnCart` mutation now removes gift wrapping from an order as expected. The value of `gift_wrapping_id` is now unset at the cart level. Previously, the `gift_wrapping_id` was updated to its previous value after the order was placed even when this value was unset at the cart level.

<!-- ACP2E-1866 -->

* Gift card accounts now remain active as expected when the partial refund of a simple product is processed from the order to which the card was applied. Previously, the gift card account was deleted.

<!-- ACP2E-1805 -->

* The `setGiftOptionsOnCart` mutation now successfully updates the database when removing a gift message from the cart. Previously, message details were not updated in the database, and the gift message was not removed from the cart.

<!-- ACP2E-1741 -->

* The gift registry `Event Information` label is now translated as expected.

<!-- ACP2E-1586 -->

* Subtotals are now calculated correctly for custom gift card amounts. 

<!-- ACP2E-1350 -->

* Gift cards are now applied correctly during checkout with multiple addresses. Previously, gift card amounts were applied incorrectly for multi-address shipments, which resulted in invalid gift card amounts. 

<!-- ACP2E-1341 -->

* Emulation now starts during `send()` calls once the emulation has completed during the `getInfoBlockHtml()` call, and no error are logged. Previously, the `system.log` file was flooded with this error: `main.ERROR: Environment emulation nesting is not allowed`. [GitHub-35603](https://github.com/magento/magento2/issues/35603)

<!-- ACP2E-1612 -->

* You can now use the `updateCartItems` mutation to update a gift card in a shopping cart. Previously, only the card amount could be updated in the cart by this mutation. 

<!-- ACP2E-1669 -->

* Gift wrapping is now included as expected in a quote based on merged carts. Previously, gift messages were successfully merged, but not wrapping selections. 

<!-- AC-7530 -->

* The `addProductsToCart` mutation now successfully adds a gift card to a cart. Previously, this query expected the gift card recipient name, but the sender name was instead returned. Adobe Commerce threw this error: `Please specify a recipient name`. [GitHub-36665](https://github.com/magento/magento2/issues/36665)


### Google Tag Manager

<!-- ACP2E-1520 -->

* The Google Tag module now pushes the correct data to the data layer. Previously, page impressions data was not pushed to the data layer.

### GraphQL

<!-- AC-8964 -->

* The `getCustomerWishlist` query no longer results in an internal server error when querying lists that contain configurable products.

<!-- AC-8966 -->

* The `customerCart` query now returns all applied discounts on bundle products as expected. Previously, the total discounts that were applied to a bundle product were returned as zero.

<!-- AC-8964 -->

* The `getCustomerWishlist` query no longer results in an internal server error when querying lists that contain configurable products.

<!-- AC-9147 -->

* The declaration of the `is_subscribed` flag, its resolver, cache, and associated tests have been moved from the `CustomerGraphQl` module to the `NewsletterGraphQl` module.

<!-- ACP2E-3957 -->

* The X-Magento-Cache-Id header has been removed from GraphQL mutation responses. Since mutations are state-changing operations (such as adding items to the cart or placing an order), they are not meant to be cached. Including this header was misleading and could lead to incorrect behavior if caching were applied. This change aligns with GraphQL best practices and the core principles of Adobe Commerce’s architecture.

<!-- AC-9362 -->

* The `addProductsToCart` mutation no longer reports unrelated errors in `user_errors`. Previously, errors related to the cart were included in `user_errors` along with the expected operation errors. [GitHub-37908](https://github.com/magento/magento2/issues/37908)

<!-- ACP2E-2119 -->

* The `products` query product filter can now return partial match results as well as full matches. The new `match_type` (PARTIAL, FULL) attribute supports specifying match type. Previously, the query returned full matches only. 

<!-- ACP2E-2155 -->

* Mutex has been added to the `addConfigurableProductsToCart` query to prevent race conditions during an update by concurrent requests. Previously, when a merchant sent two parallel requests to add the same configurable product to a cart, two separate items with the same product SKU were added. [GitHub-37847](https://github.com/magento/magento2/issues/37847)

<!-- ACP2E-2201 -->

* Product aggregation in GraphQL responses now includes non-zero values for attributes when **[!UICONTROL Use in Layered Navigation]** is set to **[!UICONTROL Filterable (no results)]**. Previously, only non-zero values were returned.

<!-- ACP2E-2141 -->

* Improved the performance of the `setShippingAddressForEstimate` query for cart-related operations that involve custom product attributes. Previously, the query loaded all product attributes when parameters were sent as variables.

<!-- ACP2E-2255 -->

* The `products` query `ConfigurableProduct.configurable_options` field now returns only values that have at least one enabled product. Previously, this field returned disabled simple products.

<!-- ACP2E-2151 -->

* Improved the performance of the `GetCategories query` by reducing the number of unnecessary SQL queries it generates.

<!-- AC-8623 -->

* Address error handling for GraphQL library components now works as expected.

<!-- AC-9058 -->

* The `products` query now returns all relevant storefront pricing details when dynamic pricing is set to no and discounts are applied. Previously, the price range for products was not returned. [GitHub-35649](https://github.com/magento/magento2/issues/35649)

<!-- ACP2E-1744 -->

* GraphQL transactions names now include top-level query names only in the New Relic logs. Previously, transaction names also included secondary query names.

<!-- AC-8623 -->

* Address error handling for GraphQL library components now works as expected.

<!-- AC-7430 -->

* When the Visibility setting for a product is set to `Catalog`, `products` queries on that product now resolve the setting correctly. Previously, any filter provided was switched to the `Visibility: Catalog` setting. [GitHub-36591](https://github.com/magento/magento2/issues/36591)

<!-- ACP2E-1769 -->

* The `customer` query now returns a `product_sale_price` field that includes tax on orders when the product price has been configured to include tax. [GitHub-36946](https://github.com/magento/magento2/issues/36946)

<!-- ACP2E-1584 -->

* Product attributes of type `DateTime` now map to the `FilterRangeTypeInput` filter in products queries. Previously, these attributes were mapped to `FilterMatchTypeInput`. As a result of this change, queries filtering on `DateTime` attributes require `from` and `to` values instead of match values.

<!-- ACP2E-1552 -->

* The `customer` query now returns only customer reviews related to a specific store view as expected when filtered by store ID.

<!-- AC-7544 -->

* The `categories` query no longer returns an error when the `items.redirect_code` response value contains a null value. [GitHub-36675](https://github.com/magento/magento2/issues/36675)

<!-- ACP2E-1465 -->

* Rule-based related products now load as expected in GraphQL responses after a full cache clean. Previously, the product EAV attributes that were responsible for rule-based matches were not loaded for the requested entity, although they were loaded after re-loading the storefront product page. 

<!-- ACP2E-1486 -->

* The `changeCustomerPassword` mutation now triggers email as expected after successfully resetting a password. 

<!-- ACP2E-1494 -->

* `urlResolver` and `route` queries now return a result when the `Target Path` of URL rewrite is an absolute URL. Previously, the `urlResolver` query returned NULL when you used it to retrieve redirect data. 

<!-- AC-7979 -->

* The `products` query now returns correct labels when multiple store views exist. [GitHub-29635](https://github.com/magento/magento2/issues/29635)

<!-- ACP2E-1315 -->

* The `categoryList` query now returns a populated `product` section of the `options` block for bundle products' child products as expected. Previously, no information about bundle product child products was returned. 

<!-- AC-7114 -->

* The `route` query now returns routes for categories and products as expected without an internal server error. [GitHub-36544](https://github.com/magento/magento2/issues/36544)

<!-- ACP2E-1652 -->

* The `products` query now fetches `url_key` values when multiple categories are selected. 

<!-- LYNX-1716-->

* `product` queries now return aggregations only for products that are assigned to the specified shared catalog. Previously, aggregation data for products not assigned to a shared catalog appeared in layered navigation.

<!-- AC-6680 -->

* The `OptionValueProvider` class `get()` method now returns an attribute option value based on the given `option_id` as expected. Previously, it returned an error. [GitHub-35910](https://github.com/magento/magento2/issues/35910)

<!-- AC-6745 -->

* The `products` query now returns all available aggregations (filters) and their correctly translated labels. Previously, price and category aggregation labels were not translated as expected. [GitHub-36140](https://github.com/magento/magento2/issues/36140)

<!-- AC-6666 -->

* You can now use a fragment `ProductCard` when querying `related_products`, `upsell_products`, and `crosssell_products` on `ProductInterface`. [GitHub-29769](https://github.com/magento/magento2/issues/29769)

<!-- AC-7014 -->

* The `products` query now returns related, upsell, and cross-sell products in the order in which they were saved. [GitHub-36461](https://github.com/magento/magento2/issues/36461)

<!-- AC-8573 -->

* GraphQL queries now return related products data sorted by position. [GitHub-33010](https://github.com/magento/magento2/issues/33010)

<!-- AC-8542 -->

* `category_url_path` has been added to `ProductAttributeFilterInput`, which supports requesting all products for a category in a single query. [GitHub-32460](https://github.com/magento/magento2/issues/32460)

<!-- AC-821 -->

* Corrected an error in which the method that sets the current store in a GraphQL mutation executed before the method that handles validation. [GitHub-31336](https://github.com/magento/magento2/issues/31336)

### Image

<!-- ACP2E-1353 -->

* The Admin favicon icon upload form now supports `.ico` file types. [GitHub-34858](https://github.com/magento/magento2/issues/34858)

### Import/export

<!-- ACP2E-2261 -->

* The product import process now parses values with the correct separator. Previously, the import process used the pipe ("|") operator to parse multi-select values until the determined value separator was not equal to the default value. The import process subsequently failed.

<!-- ACP2E-2490 -->

* 301 redirects are now automatically created when `URL Key` values are updated by CSV import.

<!-- ACP2E-2129 -->

* Shipping table rates are now updated as expected in the table rate import CSV file. The table rate upload file is temporarily stored until the asynchronous configuration processor cron job runs. This cron job picks up the new location of the file and processes it accordingly. Previously, table rates were not updated as expected because the asynchronous processor looked for the file in the wrong location.

<!-- ACP2E-2298 -->

* The Export Files grid now shows all exported files regardless of timestamp. Previously, the grid did not display all exported files that had the same timestamp. [GitHub-36951](https://github.com/magento/magento2/issues/36951)

<!-- ACP2E-2028 -->

* Products with customizable options can now be imported successfully. Previously, options data was lost during import. [GitHub-37598](https://github.com/magento/magento2/issues/37598)

<!-- ACP2E-2214 -->

* Special characters in exported CSV files are now represented as expected in Excel. [GitHub-37921](https://github.com/magento/magento2/issues/37921)

<!-- ACP2E-2301 -->

* Importing stock sources and customer addresses using the **[!UICONTROL Customers and Addresses (single file)]**  option now completes successfully.

<!-- ACP2E-1930 -->

* Product import no longer fails due to lack of memory. Previously, importing any number of products to a database that already contains approximately ten million products failed due to lack of memory.

<!-- AC-9116 -->

* Validation checks now halt the import process as expected when there is no valid data to import, and Commerce now displays this error: `There are no valid rows to import`. Previously, validation passed under these conditions, but the import process failed with this message: `entity values are mixed`. [GitHub-32905](https://github.com/magento/magento2/issues/32905)

<!-- ACP2E-1754 -->

* Importing URL keys with the same product no longer overwrites or deletes existing default store view keys. URL rewrites are now regenerated for store views only when there is no overridden `url_key` value. Previously, importing URL rewrites with the same URL key overwrote the existing default store view URL key. (`key_store` URL rewrites were deleted, but the URL rewrite on the Default store view level for the product was still set to `key_store`.)

<!-- ACP2E-1875 -->

* Product count no longer changes unexpectedly during import. Cache flush is now postponed until after the import process.

<!-- ACP2E-1813 -->

* The status of scheduled import actions now accurately represents the success or failure of the import operation. Previously, all actions were logged as successful. 

<!-- AC-7039 -->

* Commerce now takes into account the **[!UICONTROL Disable Automatic Group Change Based on VAT ID]** setting during import of customer records. Previously, the `disable_auto_group_change` value in the import files was ignored. [GitHub-36409](https://github.com/magento/magento2/issues/36409)

<!-- AC-965 -->

* `Magento\Framework\Convert\Excel` now successfully handles numbers that are preceded by a space. The Excel XML now encodes fields as a `String`. Previously, the Excel writer encoded these values as `number`, which resulted in invalid files. [GitHub-33422](https://github.com/magento/magento2/issues/33422)

<!-- ACP2E-1641 -->

* Merchants can now specify the locale in which import data is presented and how data validators should parse this data. If a locale value is not specified, Adobe Commerce uses the default configuration locale (not the default store view) to parse the data. In the Admin, import and export processes continue to use the admin user interface locale to import, parse, and format data respectively.

<!-- ACP2E-1847 -->

* Importing products with `country_of_manufacture` attributes that were created by an admin user with a different locale setting than the admin user who is importing the products no longer throws a validation error. Previously, this import operation could result in a validation error on the `country_of_manufacture` attribute.

<!-- ACP2E-1981 -->

* Stock source data is now imported successfully by the store import process, and Commerce now displays a complete notification message when the import process completes. Previously, the notification message was missing.

<!-- ACP2E-1889 -->

* Redundant indexer invalidation has been removed when indexers are in scheduled mode.

<!-- ACP2E-1994 -->

* Exported products now have the correct `manage_stock` value when the `use_config_manage_stock` value equals `1`. Previously, this default value was incorrect.

<!-- ACP2E-1620 -->

* Adobe Commerce now displays an informative error message in the scheduled import grid when an image is not imported successfully during a scheduled import operation. Previously, no error message was displayed.

<!-- ACP2E-1565 -->

* The product import process is no longer interrupted when product images are missing. Previously, when a product image was missing during the import of a third-party service using a CSV file, Adobe Commerce displayed this error: `Maximum error count has been reached or a system error is occurred!`. 

<!-- ACP2E-1476 -->

* The performance of customer export from the Customer grid has been improved in deployments where B2B is enabled. 

<!-- ACP2E-1391 -->

* The product import process no longer throws a validation error when an attribute value in `configurable_variations` column contains a comma.

<!-- ACP2E-1377 -->

* Decoding has been excluded from the export process. The CSV export file text remain unchanged after import. As a result, the description does not change after re-import. Previously, HTML tags were removed in the Page Builder editor after product export and import. 

<!-- ACP2E-1451 -->

* Non-default configurations (website or store scope) that are added as environment variables no longer interrupt the `app:config:import` process with a recursion error.

<!-- ACP2E-1569 -->

* Catalog search and price indexers in Update on Save mode are no longer invalidated after import. Previously, the Elasticsearch Indexer document version changed version when new and existing products were imported.

<!-- ACP2E-1482 -->

* Product reports are now exported to the `var` directory. Previously, these reports were exported to the document root directory, which is a read-only directory in cloud instances.

<!-- ACP2E-1736 -->

* Empty multi-select customer address fields no longer interrupt or halt the export process.

### Index

<!-- AC-10911 -->

* Improved performance of the `catalogrule_product` indexer when no catalog rule is set. [GitHub-34784](https://github.com/magento/magento2/issues/34784)

<!-- ACP2E-2204 -->

* Problems with price indexer performance have been resolved. Indexer performance no longer gradually degrades. The indexer has been refactored to increase indexer processing speed by changing how temporary tables are created. These temporary tables are now recreated instead of being addressed by more time-consuming DELETE statements.

<!-- ACP2E-2033 -->

* Price indexer performance has been improved. An index hint has been added to the price indexer that improves the run times of MySQL queries that are fired during indexing.

<!-- AC-9223 -->

* All indexers now use the same colors to represent indexer state. [GitHub-34648](https://github.com/magento/magento2/issues/34648)

<!-- ACP2E-1697 -->

* The performance of the Catalog Rule Product indexer in deployments where rules are not assigned to all websites has been improved.

<!-- ACP2E-1401 -->

* Creating a custom product type when indexers are set to **[!UICONTROL Update on schedule]** no longer causes the index update `cron` task to fail. [GitHub-36471](https://github.com/magento/magento2/issues/36471)

<!-- ACP2E-1574 -->

* Display issues on the storefront product details page that were due to catalog permissions indexing have been resolved. Previously, Adobe Commerce cleared the index table first and then re-indexed during a full `catalogpermissions_product` or `catalogpermissions_category` indexing process. Catalog permissions did not work as expected on the storefront until the re-indexing completed.

<!-- AC-6816 -->

* `bin/magento indexer:reindex customer_grid` no longer fails with a MySQL error when the customer grid includes newly created custom customer attributes. [GitHub-36233](https://github.com/magento/magento2/issues/36233)

<!-- AC-8076 -->

* Changing indexer mode for multiple indexers (that is, a mass action indexer mode change) now changes an indexer's mode only when the current mode differs from the one being applied. This improves performance by preventing unnecessary trips to the database. [GitHub-36823](https://github.com/magento/magento2/issues/36823)

### Infrastructure

<!-- AC-10866 -->

* Added a missing `return` statement to the Admin usage enable controller. Previously, there was no `return` statement, and the controller in `FrontendController` class was handled incorrectly. [GitHub-31374](https://github.com/magento/magento2/issues/31374)

<!-- AC-9390 -->

* Replaced MySQL `CREATE TEMPORARY TABLE ... LIKE` with refactored `CREATE TEMPORARY TABLE` for compliance with MySQL 8.x. [GitHub-37926](https://github.com/magento/magento2/issues/37926)

<!-- ACP2E-1462 -->

* Adobe Commerce no longer includes the full path to the root of the server in the error message it displays when a malformed HTTP request has been sent to the server. Only strings are now passed to the `explode` method as a second argument.

<!-- AC-8384 -->

* `restricted_classes.php` has replaced `Zend_Validate_File_Upload`. Previously, the validator crashed during upload of an import file larger than the value configured in `php.ini `. [GitHub-37281](https://github.com/magento/magento2/issues/37281)

<!-- ACP2E-1146 -->

* Attribute options provided by the data source model and installed using the setup data patch (typically from third party modules) can now be used with customer segment rules. Previously, this combination did not return the list of customers that matched the configured segment.

<!-- AC-7093 -->

* The email template engine can now correctly process certain nested directives (for example, `{{if}}{{depend}}...{{/depend}}{{/if}}`). [GitHub-36438](https://github.com/magento/magento2/issues/36438)

<!-- AC-7920 -->

* `product` queries with aggregation data now return the correct label values for Boolean type product attributes. [GitHub-29123](https://github.com/magento/magento2/issues/29123)

<!-- https://github.com/magento/magento2/pull/29173 -->

* CSS files are no longer corrupted when merged when `var/tmp` and `pub/static` are on different filesystems and **[!UICONTROL CSS Merging Enabled]** is enabled. Temporary files have been created in the same static directory as the target file to ensure that both files are on the same filesystem. As a result, the call to rename it is atomic. [GitHub-29172](https://github.com/magento/magento2/issues/29172)

<!-- https://github.com/magento/magento2/pull/36769 -->

* Fixed a potential error when calling a member function `getId()` on `int`, which occasionally triggered an exception when a customer was viewed in the Admin.

<!-- https://github.com/magento/magento2/pull/34092 -->

* Type checks are now enforced for array type in the design theme config processor. [GitHub-34440](https://github.com/magento/magento2/issues/34440)

### Inventory management

<!-- ACP2E-1883 -->

* Products are now automatically returned to In-stock status after a credit memo that includes a return of product quantity. Previously, if a product was out of stock but a credit memo returned stock of this product, merchants had to manually change product stock status.

<!-- ACP2E-2123 -->

* Improved performance of the inventory indexer in async mode by removing redundant requests to re-index default source items.

<!-- AC-7023 -->

* Corrected issues with the Inventory indexer that affected the accuracy of the storefront stock count of configurable products. [GitHub-36421](https://github.com/magento/magento2/issues/36421)

<!-- ACP2E-2082 -->

* Updating inventory source items via REST `V1/inventory/source-items` now works faster. The call no longer triggers a re-index or a clean-cache operation on unchanged inventory products.

<!-- ACP2E-1842 -->

* REST `V1/products/<sku>` now triggers an automated stock re-index  when updating a product's stock status. Previously, a stock re-index was not triggered for the product that was being updated.

<!-- ACP2E-1653 -->

* Configurable product stock status is now updated on the storefront as expected when child products are updated by `V1/inventory/source-items`.

<!-- ACP2E-2114 -->

* The `POST <store_code>/V1/inventory/source-items` REST call now validates payload for whitespace in returned inventory source items and sends an error message about validation as needed.

<!-- ACP2E-2072 -->

* Merchants can now notify shoppers that an order is ready for pickup when the **[!UICONTROL No Manage Stock]** setting is enabled for a product. Previously, when this setting was enabled, Commerce displayed this error message: `Your order is not ready for pickup`.

<!-- ACP2E-2227 -->

* Merchants can now create a credit memo for orders from which a simple product that is associated with a configurable product has been deleted. Previously, merchants could not create the credit memo, and Commerce threw a `TypeError` exception.

<!-- ACP2E-2310 -->

* The Admin grid source count now returns valid records after a filter has been applied. Previously, the `getSourcesCount` method always returned the total number of sources after a filter was applied.

<!-- ACP2E-1364 -->

* The Category page no longer redirects to the Admin dashboard when you sort products using the "Move out of Stock to bottom" option. The issue has been resolved by putting the SQL join statement inside the conditional statement only after ensuring that it is already not included. Previously, the page redirected to the Admin dashboard with the message:`Invalid security or form key. Please refresh the page`.

<!-- ACP2E-1488 -->

* `AUTO_INCREMENT` of the `inventory_source_item` table is no longer increased with every `UPDATE` operation. Previously, each update increased the `AUTO_INCREMENT` of this table, which eventually caused the `AUTO_INCREMENT` value to be out of range when adding a new record to the `inventory_source_item table`. As a result, admin users received the following error when they tried to create a new product from the Admin: `Numeric value out of range...`.

<!-- ACP2E-1378 -->

* Admin users can now add a product to a customer cart from the Admin for a particular store view scope with Inventory management. Previously, the stock ID was not determined properly, and admin users could not add the product to the customer cart.

<!-- ACP2E-1399 -->

* Synchronization between Inventory and catalog no longer relies on the **[!UICONTROL Synchronize with Catalog]** configuration setting. Previously, products were properly synchronized only when this setting was enabled.

<!-- ACP2E-1382 -->

* Adobe Commerce no longer throws an error after page reload when a shopper deducts a product quantity from an order that falls within the range of product available while selecting shipping source.

<!-- ACP2E-1259 -->

* Configurable product stock status is now properly updated when a configurable product and its child products `Stock Availability` value is updated by a mass inventory update. Previously, you could not return a configurable product and its child products back to into stock by mass update.

<!-- ACP2E-2096 -->

* The datatype for non-default sources has been updated to `DECIMAL (12, 4)` to support up to eight integer digits, which is the same limit implemented for default stock. This value is now in sync with the Admin add and edit product pages, which support input validation for up to eight digits for all types of inventory sources. Previously, the input for the **[!UICONTROL Quantity]** field (for non-default sources) was supported up to six digits only.

<!-- ACP2E-2054 -->

* Both default and non-default sources now display the correct information for product salable quantity when a non-default source that was ordered from the storefront is processed for shipment. Previously, Adobe Commerce displayed incorrect stock status for product sources.

<!-- ACP2E-1950 -->

* `\Magento\Catalog\Model\Product::getIsSalable()` now returns stock status based on the scope defined in the product object (`\Magento\Catalog\Model\Product::getStoreId()`). Previously, `getIsSalable()` returned stock status based on current scope regardless of the product object.

### Logging

<!-- ACP2E-1788 -->

* Updated the date-time format in the System Reports feature to include records from log files in reports.

<!-- ACP2E-1385 -->

* Admin users can now see the logs for bulk actions that are created by integrations in the Bulk Actions Log section of the Admin.

### Login

<!-- ACP2E-1521 -->

* Resetting a password in one browser and subsequently logging in through a different browser no longer results in an exception. [GitHub-36447](https://github.com/magento/magento2/issues/36447)

<!-- ACP2E-1332 -->

* Customers are now redirected to the login page after activating an account as expected. Previously, customers were automatically logged in.

### Media Gallery

<!-- ACP2E-2568 -->

* Merchants can now upload images with the same name but different cases (a mix of upper and lower case characters) to the Media Gallery. Previously, image file names were case-insensitive in Page Builder, and files with the same names other than case were overwritten in Commerce media storage that were hosted on case-sensitive file systems.

### Newsletter

<!-- AC-10806 -->

* Commerce now checks whether the newsletter subscription functionality is enabled before accepting new subscribers to a newsletter. [GitHub-33040](https://github.com/magento/magento2/issues/33040)

### Orders

<!-- AC-8857 -->

* Products moved from the Admin shopping cart to the list of items to order are now deleted as expected from the shopping cart. [GitHub-37538](https://github.com/magento/magento2/issues/37538)

<!-- ACP2E-2535 -->

* Merchants can now create credit memos as expected for the partial return of orders that were paid for in part by reward points. Previously, when a merchant created a partial return, order status was incorrectly identified as closed, and the Admin order page did not display credit memo options.

<!-- ACP2E-2632 -->

* The Admin action log rotation now works as expected when rotation log archiving frequency is set to weekly or monthly intervals. Previously, when weekly or monthly intervals were set, logs were not rotated.

<!-- ACP2E-2583 -->

* Commerce now applies the correct discount amount to partially canceled orders. Previously, the discount amount as calculated in the `base_discount_cancelled` column was incorrectly calculated when an order was changed. Support for negative values has been added to invoices for discounted orders.

<!-- ACP2E-2585 -->

* The REST `V1/orders` endpoint now applies gift cards as expected when importing orders. Previously, changes to gift card extension attributes in this endpoint were not saved.

<!-- ACP2E-2412 -->

* Commerce now sorts custom customer address attributes based on the sort order that was provided when the admin user created the order in the Admin.

<!-- ACP2E-2400 -->

* The Admin Sales Order Grid page now loads as expected when a merchant initiates a search from this page. Previously, when a merchant tried to search orders from this table, the page froze, and Commerce displayed a `Request-URI Too Long` error in the browser console.

<!-- ACP2E-2294 -->

* Order status is now marked as closed rather than complete when the entire order amount has been refunded with store credit plus an additional payment method. Previously, order status was marked as complete because the refunded amount was incorrectly calculated.

<!-- ACP2E-2213 -->

* Improved the performance of the `OrderRepository::get()` method by reducing the number of times it loads an order from the database. Previously, this method loaded an order multiple times. [GitHub-36636](https://github.com/magento/magento2/issues/36636)

<!-- ACP2E-1918 -->

* Merchants can now generate credit memos for orders that contain some items with a zero total when other order items are available for refund. Previously, merchants could not perform multiple refunds when a customer had a 100% discount on some items in the order.

<!-- AC-8254 -->

* Links between child and parent products are now displayed on the order page during re-order of the child product from the Admin. [GitHub-37028](https://github.com/magento/magento2/issues/37028)

<!-- AC-1756 -->

* The header section of the order page now contains the expected information about the sent invoice, credit memo, and shipment. [GitHub-27474](https://github.com/magento/magento2/issues/27474)

<!-- AC-7632 -->

* Credit memos for orders that contain only one configurable product are now generated correctly. Previously, the `isLast()` function did not return `true` as expected. [GitHub-36722](https://github.com/magento/magento2/issues/36722)

<!-- ACP2E-1961 -->

* Improved performance of the `aggregate_sales_report_bestsellers_data` cron job by optimizing the main data query.

<!-- ACP2E-1962 -->

* Adobe Commerce no longer throws an error when creating a credit memo with an offline refund to a customer balance when the admin user does not have permission to the customer's website. Previously, Adobe Commerce threw this error: `More permissions are needed to view this item`, and the admin user could not create a store credit refund.

<!-- ACP2E-1714 -->

* Order status is now correct when a partial refund has been made for an order that contains bundle products. Previously, order status was listed as complete after a partial refund was issued, even though the remaining order was not complete. [GitHub-37377](https://github.com/magento/magento2/issues/37377)

<!-- ACP2E-1514 -->

* Shoppers can no longer order a product using a custom price when an order is first generated from the Admin using the one-off custom price. Previously, if an order contained an item with custom prices, this custom price was applied for other orders placed with the re-order functionality.

<!-- ACP2E-1421 -->

* Shoppers can no longer save incorrect order statuses on the order page. Order status is no longer changed from Complete to Processing when an item is shipped. Previously, Adobe Commerce did not check current order status before saving order status after a shopper entered a comment. [GitHub-36562](https://github.com/magento/magento2/issues/36562)

<!-- ACP2E-1387 -->

* Adobe Commerce no longer throws an error on the storefront order return page when the configurable product being returned has been deleted. Previously, Adobe Commerce logged this error: `report.CRITICAL: Error: Call to a member function getShipmentType() on null in magento2ee/app/code/Magento/Rma/view/frontend/templates/return/create.phtml:52`. 

<!-- ACP2E-1367 -->

* The sales order grid is now asynchronously synced with all orders as expected. [GitHub-36562](https://github.com/magento/magento2/issues/36562)

<!-- ACP2E-1197 -->

* The filter-by-purchase-date functionality in the customer orders section of the orders page now works as expected. Previously, a JavaScript error occurred when the timezone conversion logic threw an error when the same time zone was provided to the method.

<!-- ACP2E-1294 -->

* The Adobe Commerce dashboard now displays the correct orders statistics on first load. Previously, the dashboard displayed incorrect order information, but displayed the correct information once the time period was updated.

<!-- ACP2E-1762 -->

* Admin users are now redirected as expected to the order page after selecting a store view during new order creation from the Admin. 

<!-- ACP2E-1418 -->

* The `GET V1/orders/<OrderID>` endpoint now returns information on both the configurable and simple products in the order regardless of the stock status of the simple products. Admin users can place orders now only if the selected items (products) are in stock or salable. Previously, this API returned information only about the products that were in stock.

<!-- AC-7901 -->

* The credit memo page no longer crashes when free shipping is enabled when shipping price includes tax, and tax calculations are applied after discounts. Previously, Adobe Commerce threw a `Division by zero` exception. [GitHub-36800](https://github.com/magento/magento2/issues/36800)

<!-- AC-1342 -->

* Using the `rest/V1/orders/{id}/comments` endpoint to post a comment about an order without providing order status no longer affects the display of the order. Previously, order status was logged as NULL in the `sales_order` and `sales_order_grid` tables, and neither the My Orders page or the Admin order grid displayed the order. [GitHub-34180](https://github.com/magento/magento2/issues/34180)

<!-- ACP2E-1597 -->

* Invoices, shipments, and credit memos can now be successfully moved back from the archive together with their associated orders when the IDs they include differ from order IDs. Previously, if an order were moved to the archive and then restored, then invoice, shipping, credit memo records were missing from that order if the ID numbers did not match. [GitHub-36847](https://github.com/magento/magento2/issues/36847)

### Page Builder

<!-- AC-8777 -->

* Images now maintain the correct aspect ratio when resized in Page Builder. [GitHub-37493](https://github.com/magento/magento2/issues/37493)

<!-- AC-10919 -->

* Page Builder now displays error messages as needed when you try to upload an image larger than the specified maximum file size. Previously, Commerce displayed an alert popup message for uploaded image files that were smaller than the specified maximum.

<!-- ACP2E-1992 -->

* CMS page product sliders now include the parent products of any child products that have been selected for inclusion in the slider. Previously, parent products were excluded from the slider.

<!-- ACP2E-2115 -->

* HTML-converted content is now displayed in email templates as expected when the `Magento_AsyncConfig` module is disabled. Previously, email templates contained raw HTML only.

<!-- AC-9128 -->

* The performance of Page Builder save operations in the Chrome browser has improved.

<!-- ACP2E-1954 -->

* You can now use the Page Builder option in Admin > **[!UICONTROL Content]** > **[!UICONTROL Pages]** to insert copied text in all styles using the `text` element. Previously, Page Builder displayed plain text only and did not save styles.

<!-- ACP2E-1646 -->

* CORS errors no longer appear during product content editing with Page Builder when the admin user has a specific ACL. The admin user can now save the product. Previously, Page Builder did not save the product, and the save process froze.

<!-- ACP2E-1852 -->

* Accurate file size information is now included in the image preview for uploaded images in Page Builder.

<!-- ACP2E-2016 -->

* Page Builder page elements now render at an acceptable speed in the Chrome browser (v112). Previously, saving content with Page Builder running in the Chrome browser was slow, and Commerce logged this error in the browser console: `[ERROR] Page Builder was rendering for 5 seconds without releasing locks`.

<!-- ACP2E-1654 -->

* Page Builder video element autoplay now works as expected on mobile Safari browsers on iOS when the element is linked directly to a remote video file. Previously, no preview image was displayed.

<!-- ACP2E-1974 -->

* Page Builder now works as expected in the Chrome browser. Previously, content changes made in that browser were not always saved.

<!-- ACP2E-2086 -->

* Loading an Admin product edit page a product no longer generates an intermittent `Uncaught TypeError` JavaScript error.

<!-- ACP2E-1886 -->

* Images that are uploaded through the Page Builder editor are now tagged as used on **[!UICONTROL Content]** > **[!UICONTROL Media Gallery]**. Previously, these images were marked as **not used anywhere** in the Media Gallery.

<!-- ACP2E-1564 -->

* Adding a product to a shopping cart from the Page Builder carousel no longer duplicates item quantity from pages with two different widgets displaying the same products.

<!-- ACP2E-1542 -->

* Page Builder no longer adds the `tabindex` HTML attribute to hyperlink tags `a` when you edit a hyperlink, then save a template. 

<!-- ACP2E-1444 -->

* The products widget and Page Builder preview now handle HTML special characters properly. Previously, the product widget did not correctly display SKUs that contained the `&` character. 

<!-- ACP2E-1441 -->

* Page Builder text element content is now updated as expected when you select and update the complete content block in preview mode.

<!-- ACP2E-1362 -->

* Copying and pasting text from one Page Builder text editor to another now works as expected. Previously, the page into which you tried to paste text could not saved, and Adobe Commerce displayed this console error: `[ERROR] Page Builder was rendering for 5 seconds without releasing locks.`.

<!-- ACP2E-1568 -->

* Page Builder `column-block` content type that was created in older versions of Page Builder is now displayed correctly.

<!-- ACP2E-1234 -->

* Filtering for the product metadata description during product creation from the Admin has been improved. Previously, if Page Builder were enabled, the product metadata description was generated based on the default` {{name}} {{description}}` mask. The default product meta description mask is now composed of `{{name}}`. [GitHub-36107](https://github.com/magento/magento2/issues/36107)

<!-- ACP2E-1758 -->

* Adding a dynamic block with no content no longer triggers an error.

### Payment

<!-- ACP2E-2533 -->

* Commerce now correctly handles 502 errors from PayPal by preventing order creation when this error occurs. Previously, orders were still be created despite a 502 error from PayPal, which lead to inconsistencies between Commerce records and PayPal's.

<!-- AC-9142 -->

* PayPal Express Checkout transactions now include child product SKUs and full product titles. The `Magento/Paypal/Model/Cart.php` file now collects child product SKUs with their parent product title to identify the product title with the child SKU. [GitHub-36808](https://github.com/magento/magento2/issues/36808)

<!-- ACP2E-1964 -->

* The **[!UICONTROL Card Security Code Does Not Match]** configuration setting is now processed as expected during the Payflow Pro payment process. Previously, this evaluation process never completed, which blocked checkout.

<!-- ACP2E-1215 -->

* The Vault payment method option no longer appears in the Admin checkout workflow when the shopper does not have a vault token. [GitHub-36273](https://github.com/magento/magento2/issues/36273)

<!-- ACP2E-1303 -->

* The **[!UICONTROL Venmo]** button now can be hidden when the PayPal buttons are enabled. Previously, the **[!UICONTROL Venmo]** button could not be removed from the cart, mini cart, product detail, or the checkout pages.

<!-- BUNDLE-3313 -->

* Shoppers can now select a shipping method while applying coupon code during checkout. Previously under these conditions, Commerce threw an error and assigned flat rate shipping to the order.

<!-- BUNDLE-3310 -->

* Issues with the storefront processing of PayPal and PayPal credit payment methods have been resolved.

<!-- BUNDLE-3273 -->

* Resolved issues with fallback URLs for orders paid with by Ideal payments when local payment is enabled.

<!-- BUNDLE-3253 -->

* Shoppers can no longer create a PayPal order without adding a last name.

#### Braintree

<!-- AC-2901 -->

* Braintree payment information is now saved per store, and shoppers now see only card information that has been saved in the store in which they are shopping. Previously, shoppers could see stored card information from all stores during checkout. [GitHub-34253](https://github.com/magento/magento2/issues/34253)

<!-- BUNDLE-3304 -->

* Shoppers can now check out an order being shipped to multiple addresses using a Braintree payment method when vault for card payments is disabled. [GitHub-37615](https://github.com/magento/magento2/issues/37615)

<!-- BUNDLE-3244 -->

* Partially invoiced orders are now captured as expected in the correct account in deployments where merchants have two different merchant account IDs for the same currency in their Braintree account.

<!-- BUNDLE-3250 -->

* Adobe Commerce no longer throws an error when creating a second partial invoice for an order paid for by Braintree when the **[!UICONTROL Enable Vault for Card Payments]** is enabled. Previously, when a merchant tried to create a second invoice, Adobe Commerce threw this error: `Your payment could not be taken. Please try again or use a different payment method. Payment method token is invalid`.

<!-- ACP2E-1229 -->

* The Braintree Vault payment method option is no longer automatically deselected in the checkout workflow when a shopper updates their billing address. Previously, the payment method was deselected when the shopper deselected the **[!UICONTROL My billing and shipping address are the same]** button.

<!-- BUNDLE-3248 -->

* Resolved issues with checking out with PayPal through Braintree after upgrading from Adobe Commerce 2.4.5-p2. [GitHub-37242](https://github.com/magento/magento2/issues/37242)

<!-- BUNDLE-3257 -->

* Phone numbers are now rendered as expected with addresses in the Google Pay modal popup shipping address fields. Previously, phone numbers were missing. 

<!-- BUNDLE-3228 -->

* Orders are now placed successfully with Braintree when the Braintree response includes an empty value for `threeDSecureInfo/eciFlag`. Previously, a PHP error occurred during checkout when this value was empty. 

<!-- BUNDLE-3243 -->

* Adobe Commerce no longer throws an error when a shopper applies a coupon on the order review page when checking out with Google Pay from the mini cart. Previously, shoppers were redirected to a 404 page. 

<!-- BUNDLE-3245 -->

* Shoppers can now complete checkout using Braintree Payments and Adobe Commerce 2.4.6 with invisible ReCAPTCHA v2 or v3. [GitHub-37241](https://github.com/magento/magento2/issues/37241)

<!-- BUNDLE-3241 -->

* Shoppers can no longer click the **[!UICONTROL PayPal]** button to purchase a configurable product without first selecting required options. Previously, shoppers could click the **[!UICONTROL PayPal]** button and were subsequently redirected back to the product page with an error: 

<!-- BUNDLE-3148 -->

* The **[!UICONTROL PayPal]** button is now displayed as expected on the cart and mini cart pages. Previously, this button was not displayed on the cart page and duplicated on the mini cart page.

### Performance

<!-- AC-9753 -->

* Multiple clicks in the **Sales** > **Orders** page's mass action drop-down menu no longer generate multiple POST requests.  [GitHub-37997](https://github.com/magento/magento2/issues/37997)

<!-- AC-10944 -->

* Only `200` or `404` responses are cached when a shopper navigates to a page that triggers a 301 redirect unless the page's Cache-Control header contains `private `. Previously, an HTTP status 200 with `private` in the Cache-Control header was cached, and an HTTP status 301 was cached unless it contained `private` in its Cache-Control header. [GitHub-36492](https://github.com/magento/magento2/issues/36492)

<!-- AC-9302 -->

* Removed the unused `Magento\Catalog\Controller\Adminhtml\Product\Initialization\Helper` from `Magento\Catalog\Model\ProductRepository`. Previously, `ProductRepository` loaded this helper, which is an `Adminhtml` controller. [GitHub-37864](https://github.com/magento/magento2/issues/37864)

<!-- AC-9127 -->

* Improved performance of page loading speed when many options are added to bundled products. [GitHub-29409](https://github.com/magento/magento2/issues/29409)

<!-- ACP2E-2069 -->

* The process of assigning products to categories from the **[!UICONTROL Products in Category]** tab has been optimized. The **[!UICONTROL Assign]** and **[!UICONTROL Remove]** buttons in the **[!UICONTROL Add Product by SKU]** tab are now disabled until products are fully loaded in the grid. Previously, admin users could not add products by SKU in catalogs that contained millions of registered products.

<!-- ACP2E-2098 -->

* The performance of the `addProductToCart` mutation when executing with many custom product attributes has improved. Previously, when this mutation was executed with many product attributes ( approximately 1000), Commerce tried to load all product attributes.

<!-- ACP2E-1965 -->

* Performance issues when loading product attributes that are used by cart rules have been resolved. Only product attributes for active cart rules are now loaded.

<!-- ACP2E-1864 -->

* The `bin/magento setup:perf:generate-fixtures setup/performance-toolkit/profiles/ee/small.xml` command now executes successfully when run multiple times. Previously, it threw this error when run more than once: `Coupon with the same code already exists`.

### Promotion

<!-- ACP2E-1290 -->

* The effects of the **[!UICONTROL Fixed amount discount for whole cart]** price rule, when applied with the **[!UICONTROL Apply to shipping amount]** rule, is now proportionally distributed as expected between products and shipping amounts. Previously, discount calculations were incorrect. 

<!-- ACP2E-1300 -->

* The **[!UICONTROL Discard Subsequent Rules]** setting is now applied as expected. When this setting is enabled, other rules with low priority can be applied to a different product only. [GitHub-35707](https://github.com/magento/magento2/issues/35707)

### reCAPTCHA

<!-- ACP2E-2509 -->

* Invisible reCAPTCHA v3 now works as expected for the checkout page **[!UICONTROL Sign in]** button. Previously, shoppers could not login, and Commerce threw JavaScript errors.

<!-- ACP2E-1539 -->

* The Google reCAPTCHA in the checkout workflow now works as expected for checks, money orders, and custom payment methods.

<!-- ACP2E-1311 -->

* Adobe Commerce forms can no longer be submitted before the Google ReCAPTCHA checkbox loads.

<!-- ACP2E-1338 -->

* The reCAPTCHA widget now precedes the **[!UICONTROL Place Order]** button on the payment page. Previously, the widget was displayed at the top of the page.

### Reports

<!-- ACP2E-1541 -->

* The Orders report (**[!UICONTROL REPORTS]** > **[!UICONTROL Sales]** > **[!UICONTROL Orders]**) now includes correct order values when orders are generated by stores that use non-default currencies. Previously, this report included incorrect values. [GitHub-36742](https://github.com/magento/magento2/issues/36742)

<!-- ACP2E-1477 -->

* Misleading information in the sales order report form has been revised for clarity. 

<!-- ACP2E-1435 -->

* Admin users can now search for records with emails that contain `+` (plus) signs from the Abandoned Carts Report page. [GitHub-36560](https://github.com/magento/magento2/issues/36560)

<!-- AC-7394 -->

* GraphQL transactions names are now displayed properly after New Relic is disabled from the Commerce Admin. [GitHub-36112](https://github.com/magento/magento2/issues/36112)

### Reviews

<!-- ACP2E-1998 -->

* Shoppers can no longer quickly submit duplicate product reviews when Invisible reCAPTCHA v3 is enabled.

### Rewards

<!-- ACP2E-2099 -->

* Reward points expiration emails are no longer sent after the points have expired. The `magento_reward_balance_warning_notification` and `magento_reward_expire_points` cron tasks have been refactored to increase flexibility and email sending capacity. Previously, merchants could not send many emails that are generated by these cron tasks in a short period of time. This could have caused delays in delivering time-sensitive notifications.

<!-- ACP2E-2283 -->

* Expired reward points are now subtracted from a shopper's current reward points balance as expected.

<!-- ACP2E-1473 -->

* The reward points balance update email notification now takes into account the current store context. Previously, the reward points balance update email used configuration settings for the default store.

<!-- ACP2E-1329 -->

* Reward points can now be refunded after the creation of a credit memo. Previously, merchants could not refund rewards points after creating a credit memo, and order status remained `Completed`, not `Closed`. 

### RMA

<!-- ACP2E-2246 -->

* The REST `POST /V1/returns` request now creates one RMA per product. Previously, this request could bypass validation and return multiple RMAs per product.

<!-- ACP2E-2450 -->

* RMA attributes are now automatically added to the default EAV form when the **[!UICONTROL Show on Storefront]** RMA attribute is set to **no**. Previously, the RMA item details popup was blank when a custom return attribute was created and the **[!UICONTROL Show on Storefront]** RMA attribute was set to **no**.

<!-- ACP2E-2211 -->

* The value of the **[!UICONTROL Enable RMA]** attribute now matches the value that is specified in configuration when the **[!UICONTROL Use Config]** checkbox on the product edit page is enabled.

<!-- ACP2E-1230 -->

* The **[!UICONTROL Enable RMA]** attribute at the individual product level now respects the store RMA settings configuration. Previously, this setting was toggled off by default when you added a product, no matter what the store configuration settings were.

### Search {#search-heading}

<!-- ACP2E-2272 -->

* The auto-complete search suggestions on the header's mini search frontend now work as expected. Previously, auto-complete did not populate this field when this feature was enabled. [GitHub-37557](https://github.com/magento/magento2/issues/37557)

<!-- ACP2E-2101 -->

* The performance of queries made from the Admin search bar has been improved by the addition of an indexer. Previously, the larger the `search_query` table, the longer the query took to complete.

<!-- ACP2E-2279 -->

* Alphabetical sorting of products by name now works correctly for names that contain Turkish characters.

<!-- ACP2E-1854 -->

* The **[!UICONTROL Use in Search Results Layered Navigation]** product attribute property is now displayed only when **[!UICONTROL Use in Search]** setting is set to **[!UICONTROL Yes]**.

<!-- ACP2E-1870 -->

* The advanced search price and SKU filters now work correctly when applied together in an advanced search. [GitHub-37581](https://github.com/magento/magento2/issues/37581)

<!-- ACP2E-1787 -->

* Searches are no longer performed for empty search fields. This reduces the size of the `search_query` table. Previously, incorrect queries or querying on empty search fields returned a huge data set, which increased the size of the `search_query` table and resulted in problems with `/tmp`.

<!-- ACP2E-1916 -->

* Storefront filters now work as expected when sorting catalog entries with dropdown custom attributes.

<!-- ACP2E-1499 -->

* Search results now display relevant results based on search weight of the attributes as expected.

<!-- AC-7505 -->

* Informative text under the `Search Weight` attribute's `Storefront Properties` input field on Admin **[!UICONTROL Stores]** > **[!UICONTROL Attributes]** > **[!UICONTROL Product]** now describes possible values. [GitHub-36646](https://github.com/magento/magento2/issues/36675)

### Shipping

<!-- ACP2E-2515 -->

* Cart price rules now work as expected when a bundle product is added to the cart when dynamic price attributes are disabled. Free shipping and the correct table rate are applied whether the dynamic attribute is enabled or disabled. Previously, free shipping was not applied as expected.

<!-- AC-9729 -->

* Commerce now transitions to a new shipment page as expected after creating a partial shipment for an order. Previously, after creating a partial shipment, Commerce did not create a complete shipment page for the remaining products of the order. [GitHub-38063](https://github.com/magento/magento2/issues/38063)

<!-- AC-8795 -->

* The total amount for shipping an order to multiple addresses is now correctly calculated. Previously, when a quote contained more than one shipping address, the total collector updated the shipping amount for the address given in `$quote->getShippingAddress()` instead of passing it by `$shippingAssignment` as expected. [GitHub-37283](https://github.com/magento/magento2/issues/37283)

<!-- ACP2E-2459 -->

* Commerce no longer throws an exception during checkout with multiple shipping addresses when the admin user has used the login as customer feature.

<!-- ACP2E-2258 -->

* Products are now listed correctly on the Create Packages page Products grid when you add products to a package after the shipping label has been created. 

<!-- ACP2E-2044 -->

* The `cart` query now returns discrete shipping discounts as separate shipping discounts with unique discount labels. The new `applied_to` discount property supports differentiation between discounts applied to a cart item. Previously, all shipping discounts were combined into one hardcoded **[!UICONTROL Shipping Discount]** value.

<!-- ACP2E-1826 -->

* When an admin user creates a re-order, the billing and shipping addresses from the initial order automatically populate the relevant fields when the admin user clicks the **[!UICONTROL Reorder]** button (Admin **[!UICONTROL Sales]** > **[!UICONTROL Orders]** > **[!UICONTROL View]** ). If the same addresses are saved in the shopper's address book, the re-order will always incorporates an updated version of these addresses. Previously, the shipping address field was pre-populated with the updated data, but the billing address field was not.

<!-- AC-7003 -->

* The **[!UICONTROL Shipping Policy]** text box is now visible in the Admin Store View scope when **[!UICONTROL Apply custom Shipping Policy]** is enabled and a custom shipping policy is available. [GitHub-36425](https://github.com/magento/magento2/issues/36425)

<!-- AC-7550 -->

* The `cart` query now returns a `selected_shipping_method` value that matches one of the `available_shipping_methods` carrier and method codes. Previously, when one of the selected shipping methods contained an underscore, these carrier/method codes were mismatched. [GitHub-36606](https://github.com/magento/magento2/issues/36606)

<!-- AC-2556 -->

* The `setShippingAddressesOnCart` mutation no longer throws an error when the second value in the street array is null. Previously, this exception was thrown: `The address failed to save. Verify the address and try again`. [GitHub-35160](https://github.com/magento/magento2/issues/35160)

### Sitemap

<!-- AC-2465 -->

* The XML sitemap now works as expected in a multistory deployment. Previously, the sitemaps did not contain the assigned default pages for each store. [GitHub-35001](https://github.com/magento/magento2/issues/35001)

<!-- AC-2267 -->

* Merchants can now create and save a product when website `id != 1` and single-store mode is enabled. Previously, the save action failed with this message: `SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails`. [GitHub-35009](https://github.com/magento/magento2/issues/35009)

### Staging

<!-- ACP2E-2665 -->

* Staging updates for sales rules are no longer duplicated in the staging dashboard.

<!-- ACP2E-2173 -->

* Bundle products are now updated properly if a shopper adds them to their cart when a schedule update is in process. Previously, if a bundle product with options was added to the cart when a schedule task was in process, Commerce threw this exception: `Some of the products below do not have all the required options. Please select all required options`.

<!-- ACP2E-2252 -->

* Schedule updates now maintain the correct prices for bundle options. Previously, these prices were changed to zero for specific website or store views.

<!-- ACP2E-2150 -->

* Updating a scheduled update no longer removes the previous version of the staged item if no end date is specified. Previously, when a staged item was updated, the rollbacked version of the item was removed if no end date was specified. Commerce did not throw an error or warn admin users before deletion.

<!-- ACP2E-1923 -->

* Store view labels values are no longer erased after a scheduled update for cart price rules. Previously, these labels were erased even if they were not specified in the update.

<!-- ACP2E-1803 -->

* Content staging previews now work properly for linked pages. Previously, you could not navigate to linked pages in the staging preview, but were instead directed incorrectly to storefront pages.

<!-- ACP2E-1876 -->

* Сhanging a staging update no longer results in the removal of scheduled updates that are assigned a later date.

<!-- ACP2E-1501 -->

* JavaScript errors no longer occur when you add or edit scheduled updates for categories when Google Analytics Content Experiments is enabled. 

<!-- ACP2E-1344 -->

* Merchants can now successfully save an existing schedule update for a category after viewing or editing it. Previously, Adobe Commerce threw an error in `system.log`.

<!-- ACP2E-1596 -->

* Downloadable links are now preserved as expected when a scheduled update is applied while previously added products are in the cart. Previously, downloadable links disappeared from the the customer's My Account (My Downloadable Products) page and the Admin order view page.

<!-- ACP2E-1458 -->

* Products are now visible on the storefront as expected after a staging update that enables the product is applied. Previously, the product was enabled in the Admin but was not visible in the storefront category when the indexer mode of the catalog inventory was set to Update on Schedule. A full re-index fixed the issue.

<!-- ACP2E-1647 -->

* The `staging.synchronize_entity_period` consumer queue in the `magento_bulk` table no longer increases when there are no staging updates to process. Previously, when `cron` was configured to run every minute, a new record related to the `staging.synchronize_entity_period` consumer was added to this table every minute.

<!-- ACP2E-1415 -->

* Adobe Commerce no longer throws an SQL error when you create a schedule change for a product while saving another product. Previously, Adobe Commerce displayed this error: `The product with the SKU "%1" couldn't be added to the current update`. 

### Target rules

<!-- ACP2E-1438 -->

* Target rules now work correctly with different store views. Previously, issues with the related products rule cache prevented the display of recommended products in multi-store deployments.

### Tax

<!-- ACP2E-2651 -->

* Invoices now display the correct subtotal when taxes are configured and FPT is enabled.

<!-- ACP2E-2245 -->

* Commerce now displays the correct value for the **[!UICONTROL Regular Price]** value when a custom option is selected for a product that has a **[!UICONTROL Special Price]** value when **[!UICONTROL Price Display Settings]** is set to include tax.

<!-- ACP2E-2303 -->

* Tax is now included as expected in the checkout workflow shipping price as specified by configuration settings.

<!-- AC-9758 -->

* The `cart` query `applied_taxes` response value now includes all individual tax rules as expected. Previously, it returned the total tax value when multiple tax rules were configured.

<!-- ACP2E-2247 -->

* The collapse/expand icon for the **[!UICONTROL Additional Settings]** section during tax rule creation now works as expected. Previously, only the expand icon worked. [GitHub-37922](https://github.com/magento/magento2/issues/37922)

<!-- ACP2E-1527 -->

* You can now edit the value of Tax Rate Country and Region from the Tax Rule edit page as expected. Previously, edits made from that page were not saved.

<!-- ACP2E-1143 -->

* The tax amount in the cart estimation area is now refreshed as expected when the shipping method is updated. Previously, the tax rate was not updated after a shopper changed country during check out.

<!-- AC-8227 -->

* The `tax class` value for newly created simple products is now set to the parent product's value when creating new variations of an existing configurable product in Store View scope. Previously, this value was set to none. As a result, no tax was added to these products in the cart, and customers were undercharged tax. [GitHub-37180](https://github.com/magento/magento2/issues/37180)

### Test

<!-- ACP2E-2501 -->

* Improved the `AdminCreateOrderWithVirtualProductFromDefaultSourceWithBackorders` test to eliminate failures caused by premature completion of the email field.

<!-- AC-10863 -->

* `StorefrontVerifyProductAfterPartialReindexOnSeveralWebsitesTest` has been refactored to improve reliability. [GitHub-38359](https://github.com/magento/magento2/issues/38359)

<!-- ACP2E-2501 -->

* Fixed the `AdminSimpleProductwithTextandVisualSwatch` test by introducing an extra step that explicitly set the attributes to be used in the search.

<!-- AC-9194 -->

* Corrected typo in the `SortbyTest` unit test. [GitHub-37792](https://github.com/magento/magento2/issues/37792)

<!-- AC-9035 -->

* Removed references to non-existent classes in unit tests. [GitHub-37636](https://github.com/magento/magento2/issues/37636)

<!-- ACP2E-2604 -->

* Improved the `AdminCreateOrderWithVirtualProductFromDefaultSourceWithBackorders` test to eliminate failures caused by premature completion of the email field.

<!-- ACP2E-2202 -->

* Refactored `Magento\GraphQl\Catalog\ProductSearchTest::testFilterProductsBySingleCategoryId` test to handle random category order in `products` query responses.

<!-- AC-7098 -->

* Performance issues with large arrays in `TableNameSniff` have been resolved. 

<!-- ACP2E-1690 -->

* Integration tests for the edit gift registry functionality no longer rely on existing entity IDs. All required data is now obtained through fixtures. Previously, `\Magento\GiftRegistry\Controller\Index\EditPostTest` failed. 

<!-- ACP2E-1748 -->

* `CollectionTest::testGetDateRangeFirstPart()` now accounts for Daylight Savings time.

<!-- ACP2E-1824 -->

* Fixed deprecation notice for `StorefrontDeleteItemFromRequisitionListPrintView`.

### UI framework

<!-- AC-9604 -->

* The image uploader now works as expected in dynamic rows. Images are now uploaded correctly when sent as a multinational array. [GitHub-37957](https://github.com/magento/magento2/issues/37957)

<!-- AC-10877 -->

* File upload styles are no longer duplicated in the Luma theme. [GitHub-32373](https://github.com/magento/magento2/issues/32373)

<!-- AC-9984 -->

* Street fields on the street field customer account edit address form are now saved correctly. These fields are now sorted correctly by the given keys in the form. [GitHub-37973](https://github.com/magento/magento2/issues/37973)

<!-- AC-9107 -->

* Corrected cursor behavior in the gift registry **[!UICONTROL Message]** text field. 

<!-- AC-3001 -->

* Cumulative Layout Shift (CLS) values have improved for product detail pages. (This metric quantifies the visual stability of page layouts.)[GitHub-35410](https://github.com/magento/magento2/issues/35410)

<!-- AC-10567 -->

* Improved the messaging of errors that occur during template rendering. Commerce now displays an informative message. Previously, Commerce displayed HTML leaks when a PHP error occurred.

<!-- ACP2E-2595 -->

* Custom customer attributes (type `File attached`) now work correctly with images that have been deleted, then subsequently uploaded. Previously, custom attributes uploaded, then deleted, then uploaded again could not be saved from the storefront.

<!-- AC-9125 -->

* Corrected a syntax error in the calendar template file. [GitHub-37725](https://github.com/magento/magento2/issues/37725)

<!-- AC-6445 -->

* Admin users can now change the storefront logo when single store mode is enabled. Previously, Commerce displayed the default fallback logo. [GitHub-35952](https://github.com/magento/magento2/issues/35952)

<!-- ACP2E-2045 -->

* Mixins configuration values are no longer empty, and jQuery mixins now work regardless of loading position. Previously, jQuery mixins were not loaded consistently across browsers.

<!-- AC-8823 -->

* Passwords are now displayed as expected when the **[!UICONTROL Show Password]** checkbox on the login page is active.

<!-- ACP2E-2034 -->

* Adobe Commerce now displays correct prices for fixed bundle products with special prices.

<!-- AC-8285 -->

* Updated the link to the GitHub Issues listing page in the storefront footer template file. [GitHub-37214](https://github.com/magento/magento2/issues/37214)

<!-- AC-6282 -->

* The Recently Viewed widget now displays the correct amount of tax in grouped product prices. [GitHub-35881](https://github.com/magento/magento2/issues/35881)

<!-- AC-6636 -->

* Admin users was can now drag and drop the customizable options created for the simple product as expected. [GitHub-36051](https://github.com/magento/magento2/issues/36051)

<!-- AC-8345 -->

* The order of product Dropdown attribute types now matches the order of images on the configurable product page. [GitHub-37285](https://github.com/magento/magento2/issues/37285)

<!-- ACP2E-1969 -->

* System messages now load more quickly. Only the messages being displayed are loaded. Previously, all messages were loaded from the database, which was time-consuming. 

<!-- ACP2E-1804 -->

* Removing the breadcrumbs node by setting `remove=true` through the layout XML no longer results in removal of the page title on the category page. Previously, removing breadcrumbs this way removed the page title from the category page.

<!-- ACP2E-1717 -->

* The customer registration form now loads as expected when it includes multi-select customer attributes. Previously, Adobe Commerce threw this exception: `[2023-03-05T05:57:40.032602+00:00] report.CRITICAL: Exception: Deprecated Functionality: explode(): Passing null to parameter #2 ($string) of type string is deprecated in /magento2ee/app/code/Magento/CustomAttributeManagement/Block/Form/Renderer/Multiselect.php on line 53 in /lib/internal/Magento/Framework/App/ErrorHandler.php:62`. [GitHub-37189](https://github.com/magento/magento2/issues/37189)

<!-- ACP2E-1602 -->

* Welcome messages containing single quotation marks are now rendered correctly on the storefront with no console errors. Previously, if a welcome message contained a single quotation mark, then the welcome message was not loaded during storefront rendering. Adobe Commerce also displayed console errors.

<!-- ACP2E-1369 -->

* Adobe Commerce no longer throws an error when you try to quickly change the view between comment history and Returns in the Admin order page. Previously, Adobe Commerce displayed this generic error: `A technical problem with the server created an error`.

<!-- ACP2E-1374 -->

* Admin users with privileges restricted to one website can now update website-specific product attributes set to an `all stores view` scope.

<!-- ACP2E-1648 -->

* The magnifier widget now loads as expected on the product page.

<!-- ACP2E-1216 -->

* Multi-line customizable options are now rendered properly in invoice, shipment, and credit memo PDF documents. Previously, multi-line text was preceded by an unexpected page break, and if the text exceeded the page, text was truncated.

<!-- AC-7402 -->

* Admin users can now add a new customer address from the Admin when that customer has been created for another website whose store ID does not match the website ID. Previously, Adobe Commerce displayed this pop-up message: `Something went wrong`. [GitHub-36582](https://github.com/magento/magento2/issues/36582)

<!-- ACP2E-1529 -->

* Company Admin details are now saved as expected, and admins are correctly redirected, when Assign Company Admin emails contain a `CMS Block URL` variable.

<!-- ACP2E-1775 -->

* Error messages associated with submitting comments on the order details page are now more informative. Previously, when a shopper clicked **[!UICONTROL Submit comment]** without either changing order status or entering text into the comment area, Adobe Commerce displayed this message: `The comment is missing. Enter and try again`.

<!-- ACP2E-1659 -->

* The calendar icon is now displayed as expected in the date range fields on Admin **[!UICONTROL Marketing]** > **[!UICONTROL Cart Price Rules]** after a date is selected for one field. Previously, after you selected a date for one field, the calendar icon was no longer displayed on other fields, and Adobe Commerce displayed placeholder text. [GitHub-36499](https://github.com/magento/magento2/issues/36499)

<!-- ACP2E-1717 -->

* Customer registration forms that include multi-select fields now load successfully. Previously, this form did not load when it contained multi-select fields, and the following error was triggered: `report.CRITICAL: Exception: Deprecated Functionality: explode(): Passing null to parameter #2 ($string) of type string is deprecated in /magento2ee/app/code/Magento/CustomAttributeManagement/Block/Form/Renderer/Multiselect.php on line 53 in /lib/internal/Magento/Framework/App/ErrorHandler.php:62`. [GitHub-37189](https://github.com/magento/magento2/issues/37189)

<!-- AC-7092 -->

* Clicking a video thumbnail in the product gallery full screen mode now displays the video as expected. Previously, the video was not displayed, and the browser console displayed a JavaScript error. [GitHub-36456](https://github.com/magento/magento2/issues/36456)

<!-- AC-7806 -->

* Added a variable to the copyright line that is automatically updated each year. [GitHub-36776](https://github.com/magento/magento2/issues/36776)

<!-- AC-8441 -->

* The image slider on the product page now works as expected in mobile view. Previously, only the first image was successfully displayed. [GitHub-37232](https://github.com/magento/magento2/issues/37232)

### URL rewrites

<!-- AC-8039 -->

* The `crossorigin` attribute has been added to `linkTypes` for `HEAD` elements.[GitHub-32509](https://github.com/magento/magento2/issues/32509)

<!-- ACP2E-2549 -->

* URL rewrites are now generated based on store-level visibility configuration in multi-store deployments. Previously, URL rewrites were not generated for non-default stores when product visibility was set to **not visible** under the default store scope.

<!-- AC-10464 -->

* `Category::getUrl()` no longer fetches a 301 redirect. [GitHub-38152](https://github.com/magento/magento2/issues/38152)

<!-- ACP2E-2629 -->

* Commerce no longer generates product URL rewrites for root categories and for products that are set to **[!UICONTROL Not Visible Individually]** in multi-store setups when generating missing URL rewrites for custom stores.

<!-- ACP2E-2481 -->

* Canonical URL tags now reflect changes as expected after the category URL Key property has been updated. Previously, the obsolete category URL was used, which immediately triggered the redirection to the new URL.

<!-- AC-6728 -->

* Category product URL rewrites are now generated as expected for all store views when a product is added to a category. [GitHub-32910](https://github.com/magento/magento2/issues/32910)

<!-- ACP2E-1783 -->

* Commerce no longer throws an error when you try to create a 301/302 redirect for a product URL when **Generate category/product URL Rewrites** is enabled. When a product is created and assigned to a category, automated URL rewrites are created: one for the direct URL and one for the product through the category path. When a new product URL rewrite is created, correlations among product, category, and store are checked. This check is now based on correlated entity properties (category and product). Previously, this check was performed on pre-existing URL rewrites.

<!-- ACP2E-1737 -->

* Category URL rewrites are now generated for all store views when a new category is imported from a CSV file.

<!-- ACP2E-1700 -->

* Product URL suffix and Category URL suffix configurations now match the suffixes in the `url_rewrite` table. Previously, race conditions when updating URL suffix configurations occurred, and the configured URL suffixes and the `url_rewrite` table did not match.

<!-- ACP2E-1703 -->

* Adobe Commerce now renders the category tree at all levels when creating category URL rewrites. Previously, only the first three levels of categories were displayed. [GitHub-36973](https://github.com/magento/magento2/issues/36973)

<!-- ACP2E-1644 -->

* Newly created CMS pages with one child node are now included in the marketing filter grid (**[!UICONTROL Marketing]** > **[!UICONTROL URL rewrites]**). Previously, URL rewrites were not created for those CMS pages.

<!-- ACP2E-1737 -->

* Category URL rewrites are now present in the CSV file during import of a new category.

<!-- ACP2E-1668 -->

* Multi-store CMS pages without URL rewrites are now forwarded as expected. Previously, requested multi-store CMS pages without URL rewrites were redirected to the store home page, but the original CMS pages were not directed.

### Visual Merchandiser

<!-- ACP2E-1363 -->

* You can now use the `Categories` attribute for Visual Merchandiser rules. Previously, Adobe Commerce threw this exception: `Something went wrong while saving the category`.

### Web API framework

<!-- AC-6980 -->

* Commerce no longer displays an `Integration not secure` warning in Admin **[!UICONTROL System]** > **[!UICONTROL Extensions]** > **[!UICONTROL Integrations]** when the **[!UICONTROL Callback URL]** and **[!UICONTROL Identity link URL]** fields are empty. [GitHub-36407](https://github.com/magento/magento2/issues/36407)

<!-- ACP2E-2483 -->

* Added the `taxes`, `itemized_taxes`, and `additional_itemized_taxes` extension attributes to  `Magento\Sales\Api\Data\OrderInterface`. These attributes allow you to save applied taxes with Order REST calls.

<!-- ACP2E-2610 -->

* The Tier Prices REST API now supports decimal quantities. Previously, this API did not allow decimal quantities even when the **[!UICONTROL Use Decimal Quantity]** setting was enabled.

<!-- AC-8998 -->

* The REST `V1/orders/{id}/comments` endpoint no longer changes the status of an order when trying to add a comment to a pending order's status. It now gives an informative error. Previously, this endpoint changed the order status when adding a comment.

<!-- ACP2E-2275 -->

* The REST API `GET` and `POST V1/products/attributes` endpoint no longer returns the same value for the `is_filterable` attribute for both `Filterable(with results)` and `Filterable(no results)` options of the **[!UICONTROL Use in Layered Navigation]** option. Previously, this endpoint returned the same value because the `is_filterable` attribute property was of type `Boolean`, which did not permit setting this property to `Filterable(no results)`. [GitHub-37979](https://github.com/magento/magento2/issues/37979)

<!-- AC-9117 -->

* The missing `media_gallery_entries` field has been added to the REST `V1/configurable-products/sku/children` endpoint. Previously, this function was missing the code needed to store and display `media_gallery_entries`. [GitHub-37607](https://github.com/magento/magento2/issues/37607)

<!-- ACP2E-1986 -->

* The REST `V1/carts/mine/estimate-shipping-methods` method now validates all levels of payload field data and returns a 400 HTTP code for invalid data. Previously, only the first level of API payload was validated, and if invalid data was returned in non-validated levels of the payload, Commerce returned a 500 status code. 

<!-- ACP2E-2053 -->

* Asynchronous bulk REST API operations to update products with tier prices and different attribute sets now complete successfully. Previously, products with different attribute sets could not be updated this way, and Commerce displayed this error: `The product was unable to be saved. Please try again`.

<!-- AC-7002 -->

* The `POST /V1/products/tier-prices` endpoint now returns a more informative error message when an invalid customer group name is used during tier price creation. Previously, Adobe Commerce returned an error like this: `Notice: Undefined index: XXXXX in ~/public_html/vendor/magento/module-catalog/Model/Product/Price/Validation/TierPriceValidator.php on line 474"`. [GitHub-36431](https://github.com/magento/magento2/issues/36431)

<!-- ACP2E-1776 -->

* You can now execute an authorized asynchronous bulk API request to create customers with a non-default group ID. Previously, these requests reset the group ID to the default value.

<!-- ACP2E-1543 -->

* Customers created using the Bulk API now receive customer registration emails in the language that is configured in their assigned website. Previously, all emails were sent to the default locale, not the locale of the website to which the customer is assigned.

<!-- ACP2E-1339 AC-7577-->

* The `POST V1/guest-carts` call no longer submits guest orders when **[!UICONTROL Allow Guest Checkout]** is disabled.

<!-- ACP2E-1336 -->

* You can now open an order from the Admin with the status `Received` when `AsyncOrder` is not enabled. Previously, you could not open the order detail page from the Admin when the order status was changed by `POST V1/orders`.

<!-- ACP2E-1526 -->

* Adobe Commerce now successfully returns the `content` attribute (base64 image code) in `GET V1/products/sku/media` product media API responses. The `content` attribute did not previously appear in the response.

### Wish list

<!-- ACP2E-1784 -->

* Commerce now displays a message indicating that an item has already been added to a wishlist when a shopper tries to add the same item to a wishlist multiple times. Previously under these conditions, Commerce increased the product quantity in the wishlist.

<!-- AC-8610 -->

* Adobe Commerce now successfully adds products with required uploaded customizable option files to the wishlist. Previously, Commerce added two products to the wishlist, not one. [GitHub-37437](https://github.com/magento/magento2/issues/37437)


## System requirements

Our technology stack is built on PHP and MySQL. For more information, see [System Requirements](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/system-requirements.html).

## Installation and upgrade instructions

You can install Adobe Commerce 2.4.7 using [Composer](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/composer.html).
