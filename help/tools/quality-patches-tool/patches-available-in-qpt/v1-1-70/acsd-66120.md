---
title: 'ACSD-66120: GraphQL incorrectly displayed discount percentages and base prices when catalog prices were configured to include tax'
description: Apply the ACSD-66120 patch to fix the Adobe Commerce issue where GraphQL incorrectly displayed discount percentages and base prices when catalog prices were configured to include tax. Previously, rounding errors occurred, such as displaying 19.99% instead of 20%.
feature: GraphQL
role: Admin, Developer
type: Troubleshooting
---

# ACSD-66120: GraphQL incorrectly displayed discount percentages and base prices when catalog prices were configured to include tax

The ACSD-66120 patch fixes the issue where GraphQL incorrectly displayed discount percentages and base prices when catalog prices were configured to include tax. Previously, rounding errors occurred, such as displaying 19.99% instead of 20%. This patch is available when the [[!DNL Quality Patches Tool (QPT)]](/help/tools/quality-patches-tool/quality-patches-tool-to-self-serve-quality-patches.md) 1.1.70 is installed. The patch ID is ACSD-66120. Please note that this issue is scheduled to be fixed in Adobe Commerce 2.4.9.

## Affected products and versions

**The patch is created for Adobe Commerce version:**

* Adobe Commerce (all deployment methods) 2.4.6-p9

**Compatible with Adobe Commerce versions:**

* Adobe Commerce (all deployment methods) 2.4.4 - 2.4.8-p2

>[!NOTE]
>
>The patch might become applicable to other versions with new [!DNL Quality Patches Tool] releases. To check if the patch is compatible with your Adobe Commerce version, update the `magento/quality-patches` package to the latest version and check the compatibility on the [[!DNL Quality Patches Tool]: Search for patches page](https://experienceleague.adobe.com/tools/commerce-quality-patches/index.html). Use the patch ID as a search keyword to locate the patch.

## Issue

Issue where GraphQL incorrectly displayed discount percentages and base prices when catalog prices were configured to include tax. Previously, rounding errors occurred, such as displaying 19.99% instead of 20%.

<u>Steps to reproduce</u>:

1. Go to *Stores > Configuration > Catalog > Catalog > Price* 
1. Set *Catalog Price Scope: Website*
1. Go to *Stores > Configuration > Sales > Tax > Calculation Settings*
    1. Set *Tax Calculation Method Based On: Unit Price*
    1. Set *Catalog Prices: Including Tax*
    1. Set *Apply Discount On Prices: Including Tax*
    1. Go to *Stores > Configuration > Sales > Tax > Default Tax Destination Calculation*
    1. Set *Default Country: France*
    1. Go to *Stores > Tax Zones and Rates*
    1. Add new Tax Rate any name
    1. Zip/Post Code: *
    1. Country: France
    1. Rate Percent: 20.000000
    1. Save
1. Go to *Stores > Tax Rules*
    1. Add new Tax Rule: any name
    1. Tax Rate: rate added in previous step
1. Go to *Catalog > Products > Add Product*
    1. Name: test
    1. SKU: test
    1. Price: 82.65
    1. Tax Class: Taxable goods
    1. Quantity: 100
    1. Save
1. Change scope to *Default Store View*
    1. Unset "Use Default Value" on Price
    1. Set Price: 68.87
    1. Unset "Use Default Value" on Tax Class
    1. Set Tax Class: Taxable goods 
    1. Save
1. Go to *Marketing > Promotions > Catalog Price Rule*
    1. Add new Rule: any name
    1. Active: yes
    1. Website: Main Website
    1. Customer Groups: all
    1. Add Action: Apply as percentage of original
    1. Discount Amount: 20.000000
    1. save
1. Perform full reindex

```
$ bin/magento index:reindex
```

1. Perform GraphQL call:

```
query{
products(filter: {sku: {eq: "test"}}, sort: {name: ASC}) {
    items {
      name
      sku
      price_range {
        minimum_price {
          regular_price {
            value
            currency
          }
          final_price {
            value
            currency
          }
          discount {
            amount_off
            percent_off
          }
        }
        maximum_price {
          regular_price {
            value
            currency
          }
          final_price {
            value
            currency
          }
          discount {
            amount_off
            percent_off
          }
        }
      }
    }
  }
}
  
```

with Store: default in Headers

<u>Expected results</u>:

Discount percentage should be exactly as configured in the Catalog Price Rule - 20%

<u>Actual results</u>:

Discount is calculated as 19.99%

## Apply the patch

To apply individual patches, use the following links depending on your deployment method:

* Adobe Commerce or Magento Open Source on-premises: [[!DNL Quality Patches Tool] > Usage](/help/tools/quality-patches-tool/usage.md) in the [!DNL Quality Patches Tool] guide.
* Adobe Commerce on cloud infrastructure: [Upgrades and Patches > Apply Patches](https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/develop/upgrade/apply-patches.html) in the Commerce on Cloud Infrastructure guide.

## Related reading

To learn more about [!DNL Quality Patches Tool], refer to:

* [[!DNL Quality Patches Tool]: A self-service tool for quality patches](/help/tools/quality-patches-tool/quality-patches-tool-to-self-serve-quality-patches.md) in the Tools guide.